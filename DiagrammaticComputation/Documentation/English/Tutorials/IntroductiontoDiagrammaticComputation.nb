(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Wolfram 15.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       154,          7]
NotebookDataLength[    341111,       7992]
NotebookOptionsPosition[    318654,       7467]
NotebookOutlinePosition[    319194,       7485]
CellTagsIndexPosition[    319151,       7482]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["Introduction to Diagrammatic Computation", "Title",
 CellID->2019031772,ExpressionUUID->"b4bf44cf-d4cc-4c8b-bd8d-f0bc2b98e5cb"],

Cell[CellGroupData[{

Cell["\<\
Diagrammatic Computation (DC) involves representing operations and their \
connections visually, much like diagrams in mathematics or engineering. This \
approach emphasizes modular building blocks that can be composed in various \
ways to model complex systems. To illustrate these concepts computationally, \
we start by installing and loading the paclet:\
\>", "Text",
 CellID->718336811,ExpressionUUID->"1f4f97d9-544e-413c-964e-625ceedf7fc8"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"PacletInstall", "[", "\"\<Wolfram/DiagrammaticComputation\>\"", 
  "]"}]], "Input",
 CellLabel->"In[534]:=",
 CellID->2081202690,ExpressionUUID->"4714a160-2c15-4f02-bcda-f6da5df15fb4"],

Cell[BoxData[
 InterpretationBox[
  RowBox[{
   TagBox["PacletObject",
    "SummaryHead"], "[", 
   DynamicModuleBox[{Typeset`open$$ = False, Typeset`embedState$$ = "Ready"}, 
    
    TemplateBox[{
      PaneSelectorBox[{False -> GridBox[{{
            PaneBox[
             ButtonBox[
              DynamicBox[
               FEPrivate`FrontEndResource["FEBitmaps", "SummaryBoxOpener"], 
               ImageSizeCache -> {
                9.875531250000002, {0., 9.875531250000002}}], Appearance -> 
              None, BaseStyle -> {}, 
              ButtonFunction :> (Typeset`open$$ = True), Evaluator -> 
              Automatic, Method -> "Preemptive"], 
             Alignment -> {Center, Center}, ImageSize -> 
             Dynamic[{
               Automatic, 
                3.5 (CurrentValue["FontCapHeight"]/AbsoluteCurrentValue[
                 Magnification])}]], 
            GraphicsBox[{
              Thickness[0.0416667], {
               FaceForm[{
                 RGBColor[0.961, 0.961, 0.961], 
                 Opacity[1.]}], 
               
               FilledCurveBox[{{{0, 2, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {
                0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 
                0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}}}, {{{12.5454, 
                22.5972}, {7.5464, 20.5002}, {2.5454, 18.4022}, {2.5454, 
                12.5982}, {2.5454, 12.5972}, {2.5454, 6.7952}, {7.5454, 
                4.6962}, {7.546, 4.6972}, {12.5454, 2.5992}, {17.5454, 
                4.6972}, {17.5454, 4.6962}, {22.5454, 6.7952}, {22.5454, 
                12.5972}, {22.5454, 12.5982}, {22.5454, 18.4022}}}]}, {
               FaceForm[{
                 RGBColor[0.898, 0.898, 0.898], 
                 Opacity[1.]}], 
               
               FilledCurveBox[{{{0, 2, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {
                0, 1, 0}, {0, 1, 0}}}, {{{17.125, 8.3359}, {17.125, 
                14.0569}, {16.875, 14.0569}, {16.875, 8.3359}, {17., 
                8.1169}, {21.952, 6.0399}, {22.049, 6.2709}}}], 
               
               FilledCurveBox[{{{0, 2, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {
                0, 1, 0}, {0, 1, 0}}}, {{{7.125, 8.3359}, {7.125, 14.0569}, {
                6.875, 14.0569}, {6.875, 8.3359}, {1.952, 6.2709}, {2.048, 
                6.0399}, {7., 8.1169}}}], 
               
               FilledCurveBox[{{{0, 2, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {
                0, 1, 0}}}, {{{11.8745, 6.2383}, {6.9515, 4.1733}, {7.0475, 
                3.9423}, {11.9995, 6.0193}, {16.9515, 3.9423}, {17.0475, 
                4.1733}}}], 
               
               FilledCurveBox[{{{0, 2, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {
                0, 1, 0}, {0, 1, 0}}}, {{{17.125, 14.1392}, {17.125, 
                19.8602}, {16.875, 19.8602}, {16.875, 14.1392}, {17., 
                13.9202}, {21.952, 11.8432}, {22.049, 12.0742}}}], 
               
               FilledCurveBox[{{{0, 2, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {
                0, 1, 0}, {0, 1, 0}}}, {{{7.125, 14.1392}, {7.125, 19.8602}, {
                6.875, 19.8602}, {6.875, 14.1392}, {1.952, 12.0742}, {2.048, 
                11.8432}, {7., 13.9202}}}], 
               
               FilledCurveBox[{{{0, 2, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {
                0, 1, 0}}}, {{{11.8746, 21.3633}, {11.8746, 18.3563}, {
                11.9996, 18.3033}, {12.1246, 18.3563}, {12.1246, 21.3633}, {
                11.9996, 21.4153}}}]}, {
               FaceForm[{
                 RGBColor[0.749, 0.749, 0.749], 
                 Opacity[1.]}], 
               
               FilledCurveBox[{{{0, 2, 0}, {0, 1, 0}, {0, 1, 0}}, {{0, 2, 
                 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {1, 3, 
                 3}}}, {{{8.292, 19.8594}, {12., 21.4154}, {15.707, 
                 19.8594}, {12., 18.3034}}, {{17.5, 19.5274}, {17.5, 
                 20.1924}, {12., 22.5004}, {6.5, 20.1924}, {6.5, 19.5284}, {
                 12., 17.2194}, {12., 17.2194}, {15.7, 18.7724}, {17.5, 
                 19.5274}}}], 
               
               FilledCurveBox[{{{0, 2, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {
                0, 1, 0}}}, {{{11.5, 8.5156}, {11.5, 6.4876}, {11.5, 
                5.4026}, {12.5, 5.8226}, {12.5, 8.5156}, {12., 8.3056}}}], 
               
               FilledCurveBox[{{{0, 2, 0}, {0, 1, 0}, {0, 1, 0}}, {{0, 2, 
                 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {
                 0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 
                 0}, {0, 1, 0}}}, {{{21.5, 6.4873}, {17.5, 4.8083}, {17.5, 
                 9.5283}, {21.5, 11.2073}}, {{21.5, 12.7113}, {21.5, 
                 12.2913}, {17., 10.4033}, {16.5, 10.6133}, {16.5, 10.1943}, {
                 15.707, 9.8613}, {16.5, 9.5283}, {16.5, 4.8083}, {16.5, 
                 4.8093}, {16.5, 4.3903}, {15.707, 4.0573}, {17., 3.5143}, {
                 22.5, 5.8223}, {22.5, 12.2913}}}], 
               
               FilledCurveBox[{{{0, 2, 0}, {0, 1, 0}, {0, 1, 0}}, {{0, 2, 
                 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {
                 0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 
                 0}, {0, 1, 0}}}, {{{6.5, 4.8086}, {2.5, 6.4876}, {2.5, 
                 11.2066}, {6.5, 9.5286}}, {{7.5, 9.1096}, {7.5, 9.1096}, {
                 7.5, 9.5286}, {8.292, 9.8616}, {7.5, 10.1936}, {7.5, 
                 10.6136}, {7., 10.4036}, {2.5, 12.2906}, {2.5, 12.7106}, {
                 1.5, 12.2916}, {1.5, 5.8226}, {7., 3.5146}, {8.293, 
                 4.0576}, {7.5, 4.3906}}}], 
               
               FilledCurveBox[{{{0, 2, 0}, {0, 1, 0}, {0, 1, 0}}, {{0, 2, 
                 0}, {0, 1, 0}, {0, 1, 0}}, {{0, 2, 0}, {0, 1, 0}, {0, 1, 
                 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {
                 0, 1, 0}, {0, 1, 0}}}, {{{3.2925, 17.7622}, {7.0005, 
                 19.3182}, {10.7075, 17.7622}, {7.0005, 16.2062}}, {{6.5005, 
                 10.6122}, {2.5005, 12.2912}, {2.5005, 17.0102}, {6.5005, 
                 15.3322}}, {{7.5005, 10.1932}, {7.5005, 10.6122}, {7.5005, 
                 15.3322}, {12.0005, 17.2202}, {12.5005, 17.0102}, {12.5005, 
                 18.0952}, {7.0005, 20.4032}, {1.5005, 18.0952}, {1.5005, 
                 11.6262}, {7.0005, 9.3182}, {8.2935, 9.8612}}}], 
               
               FilledCurveBox[{{{0, 2, 0}, {0, 1, 0}, {0, 1, 0}}, {{0, 2, 
                 0}, {0, 1, 0}, {0, 1, 0}}, {{0, 2, 0}, {0, 1, 0}, {0, 1, 
                 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {
                 0, 1, 0}, {0, 1, 0}}}, {{{21.5, 12.291}, {17.5, 10.612}, {
                 17.5, 15.332}, {21.5, 17.01}}, {{13.293, 17.762}, {17., 
                 19.318}, {20.708, 17.762}, {17., 16.207}}, {{17., 20.403}, {
                 11.5, 18.095}, {11.5, 17.01}, {12., 17.22}, {16.5, 15.332}, {
                 16.5, 10.612}, {16.5, 10.194}, {15.706, 9.861}, {17., 
                 9.318}, {22.5, 11.626}, {22.5, 18.095}}}], 
               
               FilledCurveBox[{{{0, 2, 0}, {0, 1, 0}, {0, 1, 0}}, {{0, 2, 
                 0}, {0, 1, 0}, {0, 1, 0}}, {{0, 2, 0}, {0, 1, 0}, {0, 1, 
                 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {
                 0, 1, 0}, {0, 1, 0}}}, {{{16.4995, 4.3906}, {12.4995, 
                 2.7116}, {12.4995, 7.4316}, {16.4995, 9.1096}}, {{11.4995, 
                 2.7116}, {7.4995, 4.3906}, {7.4995, 9.1096}, {11.4995, 
                 7.4316}}, {{16.4995, 10.6136}, {16.4995, 10.1946}, {11.9995, 
                 8.3056}, {8.2915, 9.8616}, {7.4995, 10.1936}, {7.4995, 
                 10.6146}, {6.4995, 10.1946}, {6.4995, 3.7256}, {11.9995, 
                 1.4176}, {17.4995, 3.7256}, {17.4995, 10.1946}}}]}, {
               FaceForm[{
                 RGBColor[0.965, 0.765, 0.749], 
                 Opacity[1.]}], 
               
               FilledCurveBox[{{{0, 2, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {
                0, 1, 0}}}, {{{12., 17.6616}, {16.945, 15.5856}, {16.945, 
                9.9376}, {12., 7.8636}, {7.055, 9.9376}, {7.055, 
                15.5856}}}]}, {
               FaceForm[{
                 RGBColor[0.91, 0.655, 0.635], 
                 Opacity[1.]}], 
               
               FilledCurveBox[{{{0, 2, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {
                0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}}}, {{{12.125, 
                17.7627}, {11.875, 17.7627}, {11.875, 12.0407}, {6.952, 
                9.9757}, {7.048, 9.7447}, {12., 11.8227}, {16.952, 9.7447}, {
                17.048, 9.9757}, {12.125, 12.0407}}}]}, {
               FaceForm[{
                 RGBColor[0.867, 0.067, 0.], 
                 Opacity[1.]}], 
               
               FilledCurveBox[{{{0, 2, 0}, {0, 1, 0}, {0, 1, 0}}, {{0, 2, 
                 0}, {0, 1, 0}, {0, 1, 0}}, {{0, 2, 0}, {0, 1, 0}, {0, 1, 
                 0}}, {{0, 2, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 
                 0}}}, {{{12.5, 8.5146}, {12.5, 13.2336}, {16.5, 14.9116}, {
                 16.5, 10.1926}}, {{7.5, 14.9116}, {11.5, 13.2336}, {11.5, 
                 8.5146}, {7.5, 10.1926}}, {{15.708, 15.6636}, {12., 
                 14.1086}, {8.292, 15.6636}, {12., 17.2206}}, {{12., 
                 18.3046}, {6.5, 15.9956}, {6.5, 9.5286}, {12., 7.2206}, {
                 17.5, 9.5286}, {17.5, 15.9956}}}]}}, AspectRatio -> 
             Automatic, ImageSize -> {24., 24.}, 
             PlotRange -> {{0., 24.}, {0., 24.}}], 
            GridBox[{{
               RowBox[{
                 TagBox["\"Name: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox[
                 "\"Wolfram/DiagrammaticComputation\"", "SummaryItem"]}]}, {
               RowBox[{
                 TagBox["\"Version: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox["\"1.0.4\"", "SummaryItem"]}]}}, AutoDelete -> False, 
             BaseStyle -> {
              ShowStringCharacters -> False, NumberMarks -> False, 
               PrintPrecision -> 3, ShowSyntaxStyles -> False}, 
             GridBoxAlignment -> {
              "Columns" -> {{Left}}, "Rows" -> {{Automatic}}}, 
             GridBoxItemSize -> {
              "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
             GridBoxSpacings -> {
              "Columns" -> {{2}}, "Rows" -> {{Automatic}}}]}}, AutoDelete -> 
          False, BaselinePosition -> {1, 1}, 
          GridBoxAlignment -> {"Columns" -> {{Left}}, "Rows" -> {{Top}}}, 
          GridBoxItemSize -> {
           "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}], True -> 
        GridBox[{{
            PaneBox[
             ButtonBox[
              DynamicBox[
               FEPrivate`FrontEndResource["FEBitmaps", "SummaryBoxCloser"]], 
              Appearance -> None, BaseStyle -> {}, 
              ButtonFunction :> (Typeset`open$$ = False), Evaluator -> 
              Automatic, Method -> "Preemptive"], 
             Alignment -> {Center, Center}, ImageSize -> 
             Dynamic[{
               Automatic, 
                3.5 (CurrentValue["FontCapHeight"]/AbsoluteCurrentValue[
                 Magnification])}]], 
            GraphicsBox[{
              Thickness[0.0416667], {
               FaceForm[{
                 RGBColor[0.961, 0.961, 0.961], 
                 Opacity[1.]}], 
               
               FilledCurveBox[{{{0, 2, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {
                0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 
                0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}}}, {{{12.5454, 
                22.5972}, {7.5464, 20.5002}, {2.5454, 18.4022}, {2.5454, 
                12.5982}, {2.5454, 12.5972}, {2.5454, 6.7952}, {7.5454, 
                4.6962}, {7.546, 4.6972}, {12.5454, 2.5992}, {17.5454, 
                4.6972}, {17.5454, 4.6962}, {22.5454, 6.7952}, {22.5454, 
                12.5972}, {22.5454, 12.5982}, {22.5454, 18.4022}}}]}, {
               FaceForm[{
                 RGBColor[0.898, 0.898, 0.898], 
                 Opacity[1.]}], 
               
               FilledCurveBox[{{{0, 2, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {
                0, 1, 0}, {0, 1, 0}}}, {{{17.125, 8.3359}, {17.125, 
                14.0569}, {16.875, 14.0569}, {16.875, 8.3359}, {17., 
                8.1169}, {21.952, 6.0399}, {22.049, 6.2709}}}], 
               
               FilledCurveBox[{{{0, 2, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {
                0, 1, 0}, {0, 1, 0}}}, {{{7.125, 8.3359}, {7.125, 14.0569}, {
                6.875, 14.0569}, {6.875, 8.3359}, {1.952, 6.2709}, {2.048, 
                6.0399}, {7., 8.1169}}}], 
               
               FilledCurveBox[{{{0, 2, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {
                0, 1, 0}}}, {{{11.8745, 6.2383}, {6.9515, 4.1733}, {7.0475, 
                3.9423}, {11.9995, 6.0193}, {16.9515, 3.9423}, {17.0475, 
                4.1733}}}], 
               
               FilledCurveBox[{{{0, 2, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {
                0, 1, 0}, {0, 1, 0}}}, {{{17.125, 14.1392}, {17.125, 
                19.8602}, {16.875, 19.8602}, {16.875, 14.1392}, {17., 
                13.9202}, {21.952, 11.8432}, {22.049, 12.0742}}}], 
               
               FilledCurveBox[{{{0, 2, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {
                0, 1, 0}, {0, 1, 0}}}, {{{7.125, 14.1392}, {7.125, 19.8602}, {
                6.875, 19.8602}, {6.875, 14.1392}, {1.952, 12.0742}, {2.048, 
                11.8432}, {7., 13.9202}}}], 
               
               FilledCurveBox[{{{0, 2, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {
                0, 1, 0}}}, {{{11.8746, 21.3633}, {11.8746, 18.3563}, {
                11.9996, 18.3033}, {12.1246, 18.3563}, {12.1246, 21.3633}, {
                11.9996, 21.4153}}}]}, {
               FaceForm[{
                 RGBColor[0.749, 0.749, 0.749], 
                 Opacity[1.]}], 
               
               FilledCurveBox[{{{0, 2, 0}, {0, 1, 0}, {0, 1, 0}}, {{0, 2, 
                 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {1, 3, 
                 3}}}, {{{8.292, 19.8594}, {12., 21.4154}, {15.707, 
                 19.8594}, {12., 18.3034}}, {{17.5, 19.5274}, {17.5, 
                 20.1924}, {12., 22.5004}, {6.5, 20.1924}, {6.5, 19.5284}, {
                 12., 17.2194}, {12., 17.2194}, {15.7, 18.7724}, {17.5, 
                 19.5274}}}], 
               
               FilledCurveBox[{{{0, 2, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {
                0, 1, 0}}}, {{{11.5, 8.5156}, {11.5, 6.4876}, {11.5, 
                5.4026}, {12.5, 5.8226}, {12.5, 8.5156}, {12., 8.3056}}}], 
               
               FilledCurveBox[{{{0, 2, 0}, {0, 1, 0}, {0, 1, 0}}, {{0, 2, 
                 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {
                 0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 
                 0}, {0, 1, 0}}}, {{{21.5, 6.4873}, {17.5, 4.8083}, {17.5, 
                 9.5283}, {21.5, 11.2073}}, {{21.5, 12.7113}, {21.5, 
                 12.2913}, {17., 10.4033}, {16.5, 10.6133}, {16.5, 10.1943}, {
                 15.707, 9.8613}, {16.5, 9.5283}, {16.5, 4.8083}, {16.5, 
                 4.8093}, {16.5, 4.3903}, {15.707, 4.0573}, {17., 3.5143}, {
                 22.5, 5.8223}, {22.5, 12.2913}}}], 
               
               FilledCurveBox[{{{0, 2, 0}, {0, 1, 0}, {0, 1, 0}}, {{0, 2, 
                 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {
                 0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 
                 0}, {0, 1, 0}}}, {{{6.5, 4.8086}, {2.5, 6.4876}, {2.5, 
                 11.2066}, {6.5, 9.5286}}, {{7.5, 9.1096}, {7.5, 9.1096}, {
                 7.5, 9.5286}, {8.292, 9.8616}, {7.5, 10.1936}, {7.5, 
                 10.6136}, {7., 10.4036}, {2.5, 12.2906}, {2.5, 12.7106}, {
                 1.5, 12.2916}, {1.5, 5.8226}, {7., 3.5146}, {8.293, 
                 4.0576}, {7.5, 4.3906}}}], 
               
               FilledCurveBox[{{{0, 2, 0}, {0, 1, 0}, {0, 1, 0}}, {{0, 2, 
                 0}, {0, 1, 0}, {0, 1, 0}}, {{0, 2, 0}, {0, 1, 0}, {0, 1, 
                 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {
                 0, 1, 0}, {0, 1, 0}}}, {{{3.2925, 17.7622}, {7.0005, 
                 19.3182}, {10.7075, 17.7622}, {7.0005, 16.2062}}, {{6.5005, 
                 10.6122}, {2.5005, 12.2912}, {2.5005, 17.0102}, {6.5005, 
                 15.3322}}, {{7.5005, 10.1932}, {7.5005, 10.6122}, {7.5005, 
                 15.3322}, {12.0005, 17.2202}, {12.5005, 17.0102}, {12.5005, 
                 18.0952}, {7.0005, 20.4032}, {1.5005, 18.0952}, {1.5005, 
                 11.6262}, {7.0005, 9.3182}, {8.2935, 9.8612}}}], 
               
               FilledCurveBox[{{{0, 2, 0}, {0, 1, 0}, {0, 1, 0}}, {{0, 2, 
                 0}, {0, 1, 0}, {0, 1, 0}}, {{0, 2, 0}, {0, 1, 0}, {0, 1, 
                 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {
                 0, 1, 0}, {0, 1, 0}}}, {{{21.5, 12.291}, {17.5, 10.612}, {
                 17.5, 15.332}, {21.5, 17.01}}, {{13.293, 17.762}, {17., 
                 19.318}, {20.708, 17.762}, {17., 16.207}}, {{17., 20.403}, {
                 11.5, 18.095}, {11.5, 17.01}, {12., 17.22}, {16.5, 15.332}, {
                 16.5, 10.612}, {16.5, 10.194}, {15.706, 9.861}, {17., 
                 9.318}, {22.5, 11.626}, {22.5, 18.095}}}], 
               
               FilledCurveBox[{{{0, 2, 0}, {0, 1, 0}, {0, 1, 0}}, {{0, 2, 
                 0}, {0, 1, 0}, {0, 1, 0}}, {{0, 2, 0}, {0, 1, 0}, {0, 1, 
                 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {
                 0, 1, 0}, {0, 1, 0}}}, {{{16.4995, 4.3906}, {12.4995, 
                 2.7116}, {12.4995, 7.4316}, {16.4995, 9.1096}}, {{11.4995, 
                 2.7116}, {7.4995, 4.3906}, {7.4995, 9.1096}, {11.4995, 
                 7.4316}}, {{16.4995, 10.6136}, {16.4995, 10.1946}, {11.9995, 
                 8.3056}, {8.2915, 9.8616}, {7.4995, 10.1936}, {7.4995, 
                 10.6146}, {6.4995, 10.1946}, {6.4995, 3.7256}, {11.9995, 
                 1.4176}, {17.4995, 3.7256}, {17.4995, 10.1946}}}]}, {
               FaceForm[{
                 RGBColor[0.965, 0.765, 0.749], 
                 Opacity[1.]}], 
               
               FilledCurveBox[{{{0, 2, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {
                0, 1, 0}}}, {{{12., 17.6616}, {16.945, 15.5856}, {16.945, 
                9.9376}, {12., 7.8636}, {7.055, 9.9376}, {7.055, 
                15.5856}}}]}, {
               FaceForm[{
                 RGBColor[0.91, 0.655, 0.635], 
                 Opacity[1.]}], 
               
               FilledCurveBox[{{{0, 2, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {
                0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}}}, {{{12.125, 
                17.7627}, {11.875, 17.7627}, {11.875, 12.0407}, {6.952, 
                9.9757}, {7.048, 9.7447}, {12., 11.8227}, {16.952, 9.7447}, {
                17.048, 9.9757}, {12.125, 12.0407}}}]}, {
               FaceForm[{
                 RGBColor[0.867, 0.067, 0.], 
                 Opacity[1.]}], 
               
               FilledCurveBox[{{{0, 2, 0}, {0, 1, 0}, {0, 1, 0}}, {{0, 2, 
                 0}, {0, 1, 0}, {0, 1, 0}}, {{0, 2, 0}, {0, 1, 0}, {0, 1, 
                 0}}, {{0, 2, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 
                 0}}}, {{{12.5, 8.5146}, {12.5, 13.2336}, {16.5, 14.9116}, {
                 16.5, 10.1926}}, {{7.5, 14.9116}, {11.5, 13.2336}, {11.5, 
                 8.5146}, {7.5, 10.1926}}, {{15.708, 15.6636}, {12., 
                 14.1086}, {8.292, 15.6636}, {12., 17.2206}}, {{12., 
                 18.3046}, {6.5, 15.9956}, {6.5, 9.5286}, {12., 7.2206}, {
                 17.5, 9.5286}, {17.5, 15.9956}}}]}}, AspectRatio -> 
             Automatic, ImageSize -> {24., 24.}, 
             PlotRange -> {{0., 24.}, {0., 24.}}], 
            GridBox[{{
               RowBox[{
                 TagBox["\"Name: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox[
                 "\"Wolfram/DiagrammaticComputation\"", "SummaryItem"]}]}, {
               RowBox[{
                 TagBox["\"Version: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox["\"1.0.4\"", "SummaryItem"]}]}, {
               RowBox[{
                 TagBox["\"Location: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox[
                 "\"/Users/swish/src/wolfram/DiagrammaticComputation/\
DiagrammaticComputation\"", "SummaryItem"]}]}, {
               RowBox[{
                 TagBox["\"Description: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox[
                  TagBox[
                  "\"Abstract compositional diagrammatic calculus\"", Short], 
                  "SummaryItem"]}]}}, AutoDelete -> False, 
             BaseStyle -> {
              ShowStringCharacters -> False, NumberMarks -> False, 
               PrintPrecision -> 3, ShowSyntaxStyles -> False}, 
             GridBoxAlignment -> {
              "Columns" -> {{Left}}, "Rows" -> {{Automatic}}}, 
             GridBoxItemSize -> {
              "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
             GridBoxSpacings -> {
              "Columns" -> {{2}}, "Rows" -> {{Automatic}}}]}}, AutoDelete -> 
          False, BaselinePosition -> {1, 1}, 
          GridBoxAlignment -> {"Columns" -> {{Left}}, "Rows" -> {{Top}}}, 
          GridBoxItemSize -> {
           "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}]}, 
       Dynamic[Typeset`open$$], ImageSize -> Automatic]},
     "SummaryPanel"],
    DynamicModuleValues:>{}], "]"}],
  PacletObject[<|
   "Name" -> "Wolfram/DiagrammaticComputation", "Description" -> 
    "Abstract compositional diagrammatic calculus", "Creator" -> 
    "Nik Murzin, Ian Ford", "License" -> "MIT", "PublisherID" -> "Wolfram", 
    "Version" -> "1.0.4", "WolframVersion" -> "14.1+", "PrimaryContext" -> 
    "Wolfram`DiagrammaticComputation`", 
    "Extensions" -> {{
      "Kernel", "Root" -> "Kernel", 
       "Context" -> {"Wolfram`DiagrammaticComputation`"}, 
       "Symbols" -> {
        "Wolfram`DiagrammaticComputation`ColumnDiagram", 
         "Wolfram`DiagrammaticComputation`Diagram", 
         "Wolfram`DiagrammaticComputation`DiagramComposition", 
         "Wolfram`DiagrammaticComputation`DiagramDraw", 
         "Wolfram`DiagrammaticComputation`DiagramDual", 
         "Wolfram`DiagrammaticComputation`DiagramFlip", 
         "Wolfram`DiagrammaticComputation`DiagramFunction", 
         "Wolfram`DiagrammaticComputation`DiagramGraphics", 
         "Wolfram`DiagrammaticComputation`DiagramGrid", 
         "Wolfram`DiagrammaticComputation`DiagramNetwork", 
         "Wolfram`DiagrammaticComputation`DiagramProduct", 
         "Wolfram`DiagrammaticComputation`DiagramQ", 
         "Wolfram`DiagrammaticComputation`DiagramReverse", 
         "Wolfram`DiagrammaticComputation`DiagramSum", 
         "Wolfram`DiagrammaticComputation`DiagramTensor", 
         "Wolfram`DiagrammaticComputation`IdentityDiagram", 
         "Wolfram`DiagrammaticComputation`PermutationDiagram", 
         "Wolfram`DiagrammaticComputation`Port", 
         "Wolfram`DiagrammaticComputation`PortDual", 
         "Wolfram`DiagrammaticComputation`PortProduct", 
         "Wolfram`DiagrammaticComputation`RowDiagram", 
         "Wolfram`DiagrammaticComputation`TensorDiagram", 
         "Wolfram`DiagrammaticComputation`ToDiagram"}}, {
      "Documentation", "Language" -> "English"}}, "Location" -> 
    "/Users/swish/src/wolfram/DiagrammaticComputation/\
DiagrammaticComputation"|>],
  Editable->False,
  SelectWithContents->True,
  Selectable->False]], "Output",
 CellChangeTimes->{3.964865018468809*^9},
 CellLabel->"Out[534]=",
 CellID->559968494,ExpressionUUID->"68340a21-ab72-4c02-b2f2-649ca239ea24"]
}, Open  ]],

Cell[BoxData[
 RowBox[{"<<", " ", "Wolfram`DiagrammaticComputation`"}]], "Input",
 CellLabel->"In[2]:=",
 CellID->1117137504,ExpressionUUID->"47105a04-9a10-4903-80f0-b208e2efa093"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Core Ideas of Diagrammatic Thinking", "Section",
 CellID->280504007,ExpressionUUID->"c08f1988-0d86-41f2-839f-24ac485e9ea4"],

Cell["\<\
At its essence, DC treats computations as abstract structures: boxes \
representing operations, with ports for inputs and outputs. These can be \
wired together to form larger diagrams, revealing patterns and relationships \
that might be less apparent in linear code. The focus is on composition, \
modularity, and visualization, rather than specific applications.\
\>", "Text",
 CellID->704240484,ExpressionUUID->"d0d8b665-9bf7-47e2-a90d-719f4c994a09"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Constructing a Diagram", "Section",
 CellID->1387435971,ExpressionUUID->"7e7810f2-a82e-498b-b685-adb87c14ef16"],

Cell[CellGroupData[{

Cell["\<\
Consider representing addition with two inputs (x) and (y) and one output (z):\
\>", "Text",
 CellID->1258925471,ExpressionUUID->"0bed9253-b2ea-4105-8a0c-1823d7b2e943"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Diagram", "[", 
  RowBox[{"Plus", ",", " ", 
   RowBox[{"{", 
    RowBox[{"x", ",", " ", "y"}], "}"}], ",", " ", "z"}], "]"}]], "Input",
 CellLabel->"In[3]:=",
 CellID->1751500853,ExpressionUUID->"c796093e-e921-4635-b512-50c68eafd127"],

Cell[BoxData[
 GraphicsBox[
  NamespaceBox["Diagram",
   DynamicModuleBox[{Typeset`d = HoldComplete[
     Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
      "DiagramOptions" -> {
        "PortArrows" -> {{Automatic, Automatic}, {Automatic}}, 
         "PortLabels" -> {{Automatic, Automatic}, {Automatic}}}, "Expression" :> 
       Plus, "InputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> 
           Wolfram`DiagrammaticComputation`Port`PortDual[
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`x], "NeutralQ" -> 
           False, "Tags" -> {}, "Type" -> SuperStar[\[FormalCapitalT]]|>], 
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> 
           Wolfram`DiagrammaticComputation`Port`PortDual[
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`y], "NeutralQ" -> 
           False, "Tags" -> {}, "Type" -> SuperStar[\[FormalCapitalT]]|>]}, 
       "OutputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> $CellContext`z, "NeutralQ" -> False, "Tags" -> {}, 
           "Type" -> \[FormalCapitalT]|>]}|>]]}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      GeometricTransformationBox[
       RectangleBox[
        NCache[{Rational[-1, 2], Rational[-1, 2]}, {-0.5, -0.5}]], {{{1, 0}, {
        0, 1}}, {0, 0}}]}, {{{
        ArrowBox[{{-0.2666666666666667, 0.75}, {-0.2666666666666667, 0.5}}], 
        InsetBox[
         InterpretationBox[
          TagBox["x",
           HoldForm],
          
          Wolfram`DiagrammaticComputation`Port`Port[<|
           "Expression" :> 
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`x, "NeutralQ" -> 
            False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
          Tooltip->"\[FormalCapitalT]"], {-0.2666666666666667, 0.875}]}, {
        ArrowBox[{{0.2666666666666666, 0.75}, {0.2666666666666666, 0.5}}], 
        InsetBox[
         InterpretationBox[
          TagBox["y",
           HoldForm],
          
          Wolfram`DiagrammaticComputation`Port`Port[<|
           "Expression" :> 
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`y, "NeutralQ" -> 
            False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
          Tooltip->"\[FormalCapitalT]"], {0.2666666666666666, 0.875}]}}, {
       ArrowBox[{{0., -0.5}, {0., -0.75}}], InsetBox[
        InterpretationBox[
         TagBox["z",
          HoldForm],
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> $CellContext`z, "NeutralQ" -> False, "Tags" -> {}, 
           "Type" -> \[FormalCapitalT]|>],
         Tooltip->"\[FormalCapitalT]"], {0., -0.875}]}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox[
       TagBox["Plus",
        HoldForm], {0, 0}]}}]],
  BaseStyle->{{{}, {}}, {{}, {}}},
  FormatType->StandardForm,
  ImageSize->Tiny]], "Output",
 CellChangeTimes->{3.964865018606246*^9, 3.966450650644046*^9, 
  3.978086969766548*^9},
 CellLabel->"Out[3]=",
 CellID->264751408,ExpressionUUID->"24d97099-9309-4cc9-bc63-3966d7c601cd"]
}, Open  ]]
}, Open  ]],

Cell["\<\
This creates a symbolic diagram: a box labeled \"Plus\" with input ports (x) \
and (y), and a single output port (z). It remains unevaluated, serving as a \
blueprint. By default, such diagrams format visually, showing wires \
connecting the ports to the operation.\
\>", "Text",
 CellID->288812841,ExpressionUUID->"f27a399c-7e2d-434d-805e-96b32c48e0ca"],

Cell[CellGroupData[{

Cell["\<\
There are a few custom shapes that will be useful for changing diagram \
default appearance:\
\>", "Text",
 CellID->764376467,ExpressionUUID->"8e75747d-6428-4251-a2ce-9f23e7152e4b"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"Diagram", "[", 
    RowBox[{"\"\<\>\"", ",", "a", ",", "b", ",", 
     RowBox[{"\"\<Shape\>\"", "->", "#"}]}], "]"}], "&"}], "/@", 
  RowBox[{"{", 
   RowBox[{
   "Automatic", ",", "\"\<RoundedRectangle\>\"", ",", "\"\<Triangle\>\"", 
    ",", "\"\<UpsideDownTriangle\>\"", ",", "\"\<Disk\>\"", 
    ",", "\"\<Point\>\"", ",", "\"\<Wire\>\""}], "}"}]}]], "Input",
 CellLabel->"In[4]:=",
 CellID->628104515,ExpressionUUID->"bd580ecf-dc0e-4904-8d4e-8d535293779f"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   GraphicsBox[
    NamespaceBox["Diagram",
     DynamicModuleBox[{Typeset`d = HoldComplete[
       Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
        "DiagramOptions" -> {
          "PortArrows" -> {{Automatic}, {Automatic}}, 
           "PortLabels" -> {{Automatic}, {Automatic}}, "Shape" -> Automatic}, 
         "Expression" :> "", "InputPorts" -> {
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Port`PortDual[
              Wolfram`DiagrammaticComputation`Diagram`Rewriting`a], 
             "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
             SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>]]}, 
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        GeometricTransformationBox[
         RectangleBox[
          NCache[{Rational[-1, 2], Rational[-1, 2]}, {-0.5, -0.5}]], {{{1, 
          0}, {0, 1}}, {0, 0}}]}, {{ArrowBox[{{0., 0.75}, {0., 0.5}}], 
         InsetBox[
          InterpretationBox[
           TagBox["a",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`a, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {0., 0.875}]}, {
         ArrowBox[{{0., -0.5}, {0., -0.75}}], InsetBox[
          InterpretationBox[
           TagBox["b",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {0., -0.875}]}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox["\<\"\"\>",
          HoldForm], {0, 0}]}}]],
    BaseStyle->{{{}, {}}, {{}, {}}},
    FormatType->StandardForm], ",", 
   GraphicsBox[
    NamespaceBox["Diagram",
     DynamicModuleBox[{Typeset`d = HoldComplete[
       Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
        "DiagramOptions" -> {
          "PortArrows" -> {{Automatic}, {Automatic}}, 
           "PortLabels" -> {{Automatic}, {Automatic}}, "Shape" -> 
           "RoundedRectangle"}, "Expression" :> "", "InputPorts" -> {
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Port`PortDual[
              Wolfram`DiagrammaticComputation`Diagram`Rewriting`a], 
             "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
             SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>]]}, 
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        GeometricTransformationBox[
         RectangleBox[NCache[{Rational[-1, 2], Rational[-1, 2]}, {-0.5, -0.5}],
          RoundingRadius->{{Right, Bottom} -> 0.2}], {{{1, 0}, {0, 1}}, {0, 
          0}}]}, {{ArrowBox[{{0., 0.75}, {0., 0.5}}], InsetBox[
          InterpretationBox[
           TagBox["a",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`a, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {0., 0.875}]}, {
         ArrowBox[{{0., -0.5}, {0., -0.75}}], InsetBox[
          InterpretationBox[
           TagBox["b",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {0., -0.875}]}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox["\<\"\"\>",
          HoldForm], {5.4290419896311195*^-18, -8.673617379884037*^-18}]}}]],
    BaseStyle->{{{}, {}}, {{}, {}}},
    FormatType->StandardForm], ",", 
   GraphicsBox[
    NamespaceBox["Diagram",
     DynamicModuleBox[{Typeset`d = HoldComplete[
       Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
        "DiagramOptions" -> {
          "PortArrows" -> {{Automatic}, {Automatic}}, 
           "PortLabels" -> {{Automatic}, {Automatic}}, "Shape" -> "Triangle"},
          "Expression" :> "", "InputPorts" -> {
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Port`PortDual[
              Wolfram`DiagrammaticComputation`Diagram`Rewriting`a], 
             "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
             SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>]]}, 
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], GeometricTransformationBox[
         TagBox[
          PolygonBox[
           NCache[{{Rational[-1, 2], Rational[-1, 2]}, {0, Rational[1, 2]}, {
             Rational[1, 2], Rational[-1, 2]}}, {{-0.5, -0.5}, {0, 0.5}, {
             0.5, -0.5}}]],
          "Triangle"], {{{1, 0}, {0, 1}}, {0, 0}}]}, {{
         ArrowBox[{{0., 0.75}, {0., 0.5}}], InsetBox[
          InterpretationBox[
           TagBox["a",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`a, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {0., 0.875}]}, {
         ArrowBox[{{0., -0.5}, {0., -0.75}}], InsetBox[
          InterpretationBox[
           TagBox["b",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {0., -0.875}]}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox["\<\"\"\>",
          HoldForm], 
         NCache[{0, Rational[-1, 6]}, {0, -0.16666666666666666`}]]}}]],
    BaseStyle->{{{}, {}}, {{}, {}}},
    FormatType->StandardForm], ",", 
   GraphicsBox[
    NamespaceBox["Diagram",
     DynamicModuleBox[{Typeset`d = HoldComplete[
       Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
        "DiagramOptions" -> {
          "PortArrows" -> {{Automatic}, {Automatic}}, 
           "PortLabels" -> {{Automatic}, {Automatic}}, "Shape" -> 
           "UpsideDownTriangle"}, "Expression" :> "", "InputPorts" -> {
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Port`PortDual[
              Wolfram`DiagrammaticComputation`Diagram`Rewriting`a], 
             "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
             SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>]]}, 
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], GeometricTransformationBox[
         TagBox[
          PolygonBox[
           NCache[{{Rational[-1, 2], Rational[1, 2]}, {0, Rational[-1, 2]}, {
             Rational[1, 2], Rational[1, 2]}}, {{-0.5, 0.5}, {0, -0.5}, {0.5, 
             0.5}}]],
          "Triangle"], {{{1, 0}, {0, 1}}, {0, 0}}]}, {{
         ArrowBox[{{0., 0.75}, {0., 0.5}}], InsetBox[
          InterpretationBox[
           TagBox["a",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`a, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {0., 0.875}]}, {
         ArrowBox[{{0., -0.5}, {0., -0.75}}], InsetBox[
          InterpretationBox[
           TagBox["b",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {0., -0.875}]}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox["\<\"\"\>",
          HoldForm], 
         NCache[{0, Rational[1, 6]}, {0, 0.16666666666666666`}]]}}]],
    BaseStyle->{{{}, {}}, {{}, {}}},
    FormatType->StandardForm], ",", 
   GraphicsBox[
    NamespaceBox["Diagram",
     DynamicModuleBox[{Typeset`d = HoldComplete[
       Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
        "DiagramOptions" -> {
          "PortArrows" -> {{Automatic}, {Automatic}}, 
           "PortLabels" -> {{Automatic}, {Automatic}}, "Shape" -> "Disk"}, 
         "Expression" :> "", "InputPorts" -> {
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Port`PortDual[
              Wolfram`DiagrammaticComputation`Diagram`Rewriting`a], 
             "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
             SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>]]}, 
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        GeometricTransformationBox[
         DiskBox[{0, 0}, 
          NCache[{Rational[1, 2], Rational[1, 2]}, {0.5, 0.5}]], {{{1, 0}, {0,
           1}}, {0, 0}}]}, {{
         ArrowBox[
          NCache[{{0, Rational[3, 4]}, {0, Rational[1, 2]}}, {{0, 0.75}, {
            0, 0.5}}]], InsetBox[
          InterpretationBox[
           TagBox["a",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`a, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], 
          NCache[{0, Rational[7, 8]}, {0, 0.875}]]}, {
         ArrowBox[
          NCache[{{0, Rational[-1, 2]}, {0, Rational[-3, 4]}}, {{0, -0.5}, {
            0, -0.75}}]], InsetBox[
          InterpretationBox[
           TagBox["b",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], 
          NCache[{0, Rational[-7, 8]}, {0, -0.875}]]}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox["\<\"\"\>",
          HoldForm], {0, 0}]}}]],
    BaseStyle->{{{}, {}}, {{}, {}}},
    FormatType->StandardForm], ",", 
   GraphicsBox[
    NamespaceBox["Diagram",
     DynamicModuleBox[{Typeset`d = HoldComplete[
       Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
        "DiagramOptions" -> {
          "PortArrows" -> {{Automatic}, {Automatic}}, 
           "PortLabels" -> {{Automatic}, {Automatic}}, "Shape" -> "Point"}, 
         "Expression" :> "", "InputPorts" -> {
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Port`PortDual[
              Wolfram`DiagrammaticComputation`Diagram`Rewriting`a], 
             "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
             SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>]]}, 
      {Arrowheads[{{Small, 0.7}}], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        {PointSize[Medium], PointBox[{0, 0}]}}, {{ArrowBox[{{0, 1}, {0, 0}}], 
         InsetBox[
          InterpretationBox[
           TagBox["a",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`a, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], 
          NCache[{0, Rational[3, 2]}, {0, 1.5}]]}, {
         ArrowBox[{{0, 0}, {0, -1}}], InsetBox[
          InterpretationBox[
           TagBox["b",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], 
          NCache[{0, Rational[-3, 2]}, {0, -1.5}]]}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox["\<\"\"\>",
          HoldForm], {0, 0}]}}]],
    BaseStyle->{{{}, {}}, {{}, {}}},
    FormatType->StandardForm], ",", 
   GraphicsBox[
    NamespaceBox["Diagram",
     DynamicModuleBox[{Typeset`d = HoldComplete[
       Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
        "DiagramOptions" -> {
          "PortArrows" -> {{Automatic}, {Automatic}}, 
           "PortLabels" -> {{Automatic}, {Automatic}}, "Shape" -> "Wire"}, 
         "Expression" :> "", "InputPorts" -> {
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Port`PortDual[
              Wolfram`DiagrammaticComputation`Diagram`Rewriting`a], 
             "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
             SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>]]}, 
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        BSplineCurveBox[{{0., 0.5}, {0., 0.25}, {0, 0}, {0., -0.25}, {
          0., -0.5}}]}, {{ArrowBox[{{0., 0.75}, {0., 0.5}}], InsetBox[
          InterpretationBox[
           TagBox["a",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`a, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {0., 0.875}]}, {
         ArrowBox[{{0., -0.5}, {0., -0.75}}], InsetBox[
          InterpretationBox[
           TagBox["b",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {0., -0.875}]}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox["\<\"\"\>",
          HoldForm], {0, 0}]}}]],
    BaseStyle->{{{}, {}}, {{}, {}}},
    FormatType->StandardForm]}], "}"}]], "Output",
 CellChangeTimes->{3.964865018656898*^9, 3.966450652713861*^9, 
  3.978086972358459*^9},
 CellLabel->"Out[4]=",
 CellID->2025997700,ExpressionUUID->"cb5a5e46-23f7-4bd1-8b2f-f540521be9a0"]
}, Open  ]]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Vertical and Horizontal Composition", "Section",
 CellID->1343972969,ExpressionUUID->"c0348a54-f94d-439f-a1c2-763573d22ebb"],

Cell[CellGroupData[{

Cell["\<\
Vertical composition connects diagrams end-to-end, with outputs from one \
feeding inputs to the next, mirroring function composition. Matching port \
labels enable automatic wiring.

Consider numerical operations: one doubles a number, another increments it by \
1:\
\>", "Text",
 CellID->920690837,ExpressionUUID->"4d57d2fe-f504-46ac-bcf7-03f9efd9621f"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"double", " ", "=", " ", 
  RowBox[{"Diagram", "[", 
   RowBox[{"\"\<[2\[Times]]\>\"", ",", " ", "x", ",", " ", "y"}], 
   "]"}]}]], "Input",
 CellLabel->"In[5]:=",
 CellID->1431220824,ExpressionUUID->"3fc206a2-8ad1-4645-b400-50eb7d80e9da"],

Cell[BoxData[
 GraphicsBox[
  NamespaceBox["Diagram",
   DynamicModuleBox[{Typeset`d = HoldComplete[
     Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
      "DiagramOptions" -> {
        "PortArrows" -> {{Automatic}, {Automatic}}, 
         "PortLabels" -> {{Automatic}, {Automatic}}}, "Expression" :> 
       "[2\[Times]]", "InputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> 
           Wolfram`DiagrammaticComputation`Port`PortDual[
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`x], "NeutralQ" -> 
           False, "Tags" -> {}, "Type" -> SuperStar[\[FormalCapitalT]]|>]}, 
       "OutputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> Wolfram`DiagrammaticComputation`Diagram`Rewriting`y,
            "NeutralQ" -> False, "Tags" -> {}, 
           "Type" -> \[FormalCapitalT]|>]}|>]]}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      GeometricTransformationBox[
       RectangleBox[
        NCache[{Rational[-1, 2], Rational[-1, 2]}, {-0.5, -0.5}]], {{{1, 0}, {
        0, 1}}, {0, 0}}]}, {{ArrowBox[{{0., 0.75}, {0., 0.5}}], InsetBox[
        InterpretationBox[
         TagBox["x",
          HoldForm],
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> Wolfram`DiagrammaticComputation`Diagram`Rewriting`x,
            "NeutralQ" -> False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
         
         Tooltip->"\[FormalCapitalT]"], {0., 0.875}]}, {
       ArrowBox[{{0., -0.5}, {0., -0.75}}], InsetBox[
        InterpretationBox[
         TagBox["y",
          HoldForm],
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> Wolfram`DiagrammaticComputation`Diagram`Rewriting`y,
            "NeutralQ" -> False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
         
         Tooltip->"\[FormalCapitalT]"], {0., -0.875}]}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox[
       TagBox["\<\"[2\[Times]]\"\>",
        HoldForm], {0, 0}]}}]],
  BaseStyle->{{{}, {}}, {{}, {}}},
  FormatType->StandardForm,
  ImageSize->Tiny]], "Output",
 CellChangeTimes->{3.964865018700021*^9, 3.96645065646303*^9, 
  3.966450825408717*^9, 3.978086976140772*^9},
 CellLabel->"Out[5]=",
 CellID->1878825432,ExpressionUUID->"ce7f159e-4174-4569-b476-c0312e0711bd"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"increment", " ", "=", " ", 
  RowBox[{"Diagram", "[", 
   RowBox[{"\"\<[+1]\>\"", ",", " ", "y", ",", " ", "z"}], "]"}]}]], "Input",
 CellLabel->"In[6]:=",
 CellID->1145467389,ExpressionUUID->"85761fff-8b28-4f1d-9abd-e04d8ce1bc3b"],

Cell[BoxData[
 GraphicsBox[
  NamespaceBox["Diagram",
   DynamicModuleBox[{Typeset`d = HoldComplete[
     Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
      "DiagramOptions" -> {
        "PortArrows" -> {{Automatic}, {Automatic}}, 
         "PortLabels" -> {{Automatic}, {Automatic}}}, "Expression" :> "[+1]", 
       "InputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> 
           Wolfram`DiagrammaticComputation`Port`PortDual[
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`y], "NeutralQ" -> 
           False, "Tags" -> {}, "Type" -> SuperStar[\[FormalCapitalT]]|>]}, 
       "OutputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> $CellContext`z, "NeutralQ" -> False, "Tags" -> {}, 
           "Type" -> \[FormalCapitalT]|>]}|>]]}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      GeometricTransformationBox[
       RectangleBox[
        NCache[{Rational[-1, 2], Rational[-1, 2]}, {-0.5, -0.5}]], {{{1, 0}, {
        0, 1}}, {0, 0}}]}, {{ArrowBox[{{0., 0.75}, {0., 0.5}}], InsetBox[
        InterpretationBox[
         TagBox["y",
          HoldForm],
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> Wolfram`DiagrammaticComputation`Diagram`Rewriting`y,
            "NeutralQ" -> False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
         
         Tooltip->"\[FormalCapitalT]"], {0., 0.875}]}, {
       ArrowBox[{{0., -0.5}, {0., -0.75}}], InsetBox[
        InterpretationBox[
         TagBox["z",
          HoldForm],
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> $CellContext`z, "NeutralQ" -> False, "Tags" -> {}, 
           "Type" -> \[FormalCapitalT]|>],
         Tooltip->"\[FormalCapitalT]"], {0., -0.875}]}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox[
       TagBox["\<\"[+1]\"\>",
        HoldForm], {0, 0}]}}]],
  BaseStyle->{{{}, {}}, {{}, {}}},
  FormatType->StandardForm,
  ImageSize->Tiny]], "Output",
 CellChangeTimes->{3.9648650187170486`*^9, 3.966450658626664*^9, 
  3.96645082543639*^9, 3.978086978504434*^9},
 CellLabel->"Out[6]=",
 CellID->2118203562,ExpressionUUID->"c8913b56-6a74-4bfb-9a63-ad4fc288a45e"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Vertical composition (increment after double):", "Text",
 CellID->1587393699,ExpressionUUID->"56138853-185f-43c6-9b90-6477a0c12249"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"DiagramComposition", "[", 
  RowBox[{"increment", ",", " ", "double"}], "]"}]], "Input",
 CellLabel->"In[7]:=",
 CellID->1136552412,ExpressionUUID->"625616d3-15a2-4366-bae6-004e04e01516"],

Cell[BoxData[
 GraphicsBox[
  NamespaceBox["Diagram",
   DynamicModuleBox[{Typeset`d = HoldComplete[
     Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
      "DiagramOptions" -> {
        "PortArrows" -> {{Automatic}, {Automatic}}, 
         "PortLabels" -> {{Automatic}, {Automatic}}}, "Expression" :> 
       Wolfram`DiagrammaticComputation`Diagram`DiagramComposition[
         Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
          "DiagramOptions" -> {
            "PortArrows" -> {{Automatic}, {Automatic}}, 
             "PortLabels" -> {{Automatic}, {Automatic}}}, "Expression" :> 
           "[+1]", "InputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Port`PortDual[
                Wolfram`DiagrammaticComputation`Diagram`Rewriting`y], 
               "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
               SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> $CellContext`z, "NeutralQ" -> False, 
               "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>], 
         Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
          "DiagramOptions" -> {
            "PortArrows" -> {{Automatic}, {Automatic}}, 
             "PortLabels" -> {{Automatic}, {Automatic}}}, "Expression" :> 
           "[2\[Times]]", "InputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Port`PortDual[
                Wolfram`DiagrammaticComputation`Diagram`Rewriting`x], 
               "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
               SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Diagram`Rewriting`y, 
               "NeutralQ" -> False, "Tags" -> {}, 
               "Type" -> \[FormalCapitalT]|>]}|>]], "InputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> 
           Wolfram`DiagrammaticComputation`Port`PortDual[
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`x], "NeutralQ" -> 
           False, "Tags" -> {}, "Type" -> SuperStar[\[FormalCapitalT]]|>]}, 
       "OutputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> $CellContext`z, "NeutralQ" -> False, "Tags" -> {}, 
           "Type" -> \[FormalCapitalT]|>]}|>]]}, {{
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        GeometricTransformationBox[
         RectangleBox[{0.5, 0.5}], {{{1., 0.}, {0., 1.}}, {0., 0.}}]}, {{}, {
         ArrowBox[{{1., 0.5}, {1., 0.25}}], InsetBox[
          InterpretationBox[
           TagBox["z",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> $CellContext`z, "NeutralQ" -> False, "Tags" -> {},
              "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {1., 0.125}]}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox["\<\"[+1]\"\>",
          HoldForm], {1., 1.}]}}, 
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        GeometricTransformationBox[
         RectangleBox[{0.5, 2.5}], {{{1., 0.}, {0., 1.}}, {0., 0.}}]}, {{
         ArrowBox[{{1., 3.75}, {1., 3.5}}], InsetBox[
          InterpretationBox[
           TagBox["x",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`x, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {1., 3.875}]}, {}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox["\<\"[2\[Times]]\"\>",
          HoldForm], {1., 3.}]}}}, 
     {Arrowheads[{{Small, 0.5}}], {}, 
      ArrowBox[BSplineCurveBox[{{1., 2.5}, {1., 2.25}, {1., 1.75}, {1., 
        1.5}}]], InsetBox[
       TemplateBox[{"y"},
        "ClickToCopy"], {0.9, 2.}]}, {}, {}, 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Thickness[Tiny]}], FaceForm[None]}}]],
  BaseStyle->{{{}, {}}, {{}, {}}},
  FormatType->StandardForm,
  ImageSize->Small]], "Output",
 CellChangeTimes->{3.9648650187555437`*^9, 3.966450659537665*^9, 
  3.966450825476328*^9, 3.9780869795830936`*^9},
 CellLabel->"Out[7]=",
 CellID->1067105024,ExpressionUUID->"307cb994-3dbc-4ec2-8b14-ea2e2288b504"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["DiagramRightComposition composes vertically in reverse:", "Text",
 CellID->823045858,ExpressionUUID->"eb94f404-1542-461a-b601-117dcb3d0885"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"DiagramRightComposition", "[", 
  RowBox[{"double", ",", "increment", ",", 
   RowBox[{"\"\<Rotate\>\"", "->", "Right"}]}], "]"}]], "Input",
 CellLabel->"In[8]:=",
 CellID->989565079,ExpressionUUID->"7b8f6afc-c176-438d-b3f8-806a35e9c4fe"],

Cell[BoxData[
 GraphicsBox[
  NamespaceBox["Diagram",
   DynamicModuleBox[{Typeset`d = HoldComplete[
     Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
      "DiagramOptions" -> {
        "PortArrows" -> {{Automatic}, {Automatic}}, 
         "PortLabels" -> {{Automatic}, {Automatic}}, "Rotate" -> Right}, 
       "Expression" :> 
       Wolfram`DiagrammaticComputation`Diagram`DiagramComposition[
         Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
          "DiagramOptions" -> {
            "PortArrows" -> {{Automatic}, {Automatic}}, 
             "PortLabels" -> {{Automatic}, {Automatic}}}, "Expression" :> 
           "[+1]", "InputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Port`PortDual[
                Wolfram`DiagrammaticComputation`Diagram`Rewriting`y], 
               "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
               SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> $CellContext`z, "NeutralQ" -> False, 
               "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>], 
         Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
          "DiagramOptions" -> {
            "PortArrows" -> {{Automatic}, {Automatic}}, 
             "PortLabels" -> {{Automatic}, {Automatic}}}, "Expression" :> 
           "[2\[Times]]", "InputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Port`PortDual[
                Wolfram`DiagrammaticComputation`Diagram`Rewriting`x], 
               "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
               SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Diagram`Rewriting`y, 
               "NeutralQ" -> False, "Tags" -> {}, 
               "Type" -> \[FormalCapitalT]|>]}|>]], "InputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> 
           Wolfram`DiagrammaticComputation`Port`PortDual[
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`x], "NeutralQ" -> 
           False, "Tags" -> {}, "Type" -> SuperStar[\[FormalCapitalT]]|>]}, 
       "OutputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> $CellContext`z, "NeutralQ" -> False, "Tags" -> {}, 
           "Type" -> \[FormalCapitalT]|>]}|>]]}, {{
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        GeometricTransformationBox[
         RectangleBox[{-1.5, 0.5}], {{{0., -1.}, {1., 0.}}, {0., 
          2.}}]}, {{}, {ArrowBox[{{-0.5, 1.}, {-0.25, 1.}}], InsetBox[
          InterpretationBox[
           TagBox["z",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> $CellContext`z, "NeutralQ" -> False, "Tags" -> {},
              "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {-0.125, 1.}]}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox["\<\"[+1]\"\>",
          HoldForm], {-1., 1.}]}}, 
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        GeometricTransformationBox[
         RectangleBox[{-3.5, 0.5}], {{{0., -1.}, {1., 0.}}, {-2., 4.}}]}, {{
         ArrowBox[{{-3.75, 1.}, {-3.5, 1.}}], InsetBox[
          InterpretationBox[
           TagBox["x",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`x, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {-3.875, 1.}]}, {}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox["\<\"[2\[Times]]\"\>",
          HoldForm], {-3., 1.}]}}}, 
     {Arrowheads[{{Small, 0.5}}], {}, 
      ArrowBox[BSplineCurveBox[{{-2.5, 1.}, {-2.25, 1.}, {-1.75, 1.}, {-1.5, 
        1.}}]], InsetBox[
       TemplateBox[{"y"},
        "ClickToCopy"], {-2., 0.9}]}, {}, {}, 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Thickness[Tiny]}], FaceForm[None]}}]],
  BaseStyle->{{{}, {}}, {{}, {}}},
  FormatType->StandardForm,
  ImageSize->Small]], "Output",
 CellChangeTimes->{3.964865018798324*^9, 3.9664506620458307`*^9, 
  3.978086981256336*^9},
 CellLabel->"Out[8]=",
 CellID->1021039707,ExpressionUUID->"aa100893-5665-438e-bb79-4c373572e194"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
This connects (y) from double to (y) in increment. The rendering shows \
stacked boxes connected by a wire. Using standard sequential Composition (@*) \
this can be represented like this:\
\>", "Text",
 CellID->1536261624,ExpressionUUID->"efcfc20e-e596-4b47-bae4-09f35c213cb5"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(", 
   RowBox[{"\"\<[+1]\>\"", "@*", "\"\<[2\[Times]]\>\""}], ")"}], "@", 
  "3"}]], "Input",
 CellLabel->"In[18]:=",
 CellID->753226687,ExpressionUUID->"78e3b507-00b4-4c67-8709-918358e5281f"],

Cell[BoxData[
 RowBox[{"\<\"[+1]\"\>", "[", 
  RowBox[{"\<\"[2\[Times]]\"\>", "[", "3", "]"}], "]"}]], "Output",
 CellChangeTimes->{3.9648650188123198`*^9, 3.9664506635467167`*^9},
 CellLabel->"Out[18]=",
 CellID->566987472,ExpressionUUID->"f98c83b6-ade8-4e41-a78a-5793b33aa12f"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
Or using RightComposition (\\*) producing the same expression:\
\>", "Text",
 CellID->812575579,ExpressionUUID->"8528d356-10c5-4415-a768-11e41c1d967c"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(", 
   RowBox[{"\"\<[2\[Times]]\>\"", "/*", "\"\<[+1]\>\""}], ")"}], "@", 
  "3"}]], "Input",
 CellLabel->"In[543]:=",
 CellID->1109244980,ExpressionUUID->"c9cfecd3-3f82-4733-80d8-7b58fcd9f0e5"],

Cell[BoxData[
 RowBox[{"\<\"[+1]\"\>", "[", 
  RowBox[{"\<\"[2\[Times]]\"\>", "[", "3", "]"}], "]"}]], "Output",
 CellChangeTimes->{3.964865018821859*^9},
 CellLabel->"Out[543]=",
 CellID->774839253,ExpressionUUID->"81141519-2d06-4115-8e4c-f343dabac398"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
If abstract nodes are replaced by actual functions, this would produce the \
expected result. For input 3, double produces 6, increment yields 7:\
\>", "Text",
 CellID->382489763,ExpressionUUID->"679c1537-2a51-48fe-af0d-2e33dae9c454"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(", 
   RowBox[{
    RowBox[{"(", 
     RowBox[{"y", " ", "|->", " ", 
      RowBox[{"2", " ", "y"}]}], ")"}], "/*", 
    RowBox[{"(", 
     RowBox[{"x", " ", "|->", " ", 
      RowBox[{"x", " ", "+", " ", "1"}]}], ")"}]}], ")"}], "@", 
  "3"}]], "Input",
 CellLabel->"In[544]:=",
 CellID->1086891270,ExpressionUUID->"6fbcd388-20d5-4a04-bcc3-719ad98004b6"],

Cell[BoxData["7"], "Output",
 CellChangeTimes->{3.96486501882603*^9},
 CellLabel->"Out[544]=",
 CellID->885673508,ExpressionUUID->"525eaa7e-01f1-4a29-a0f8-26b26e6a08ad"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
We'll create function representations of diagrams like this and more complex \
ones automatically later.
But for now, let's try to compose these functions in the opposite order:\
\>", "Text",
 CellID->1305491599,ExpressionUUID->"e2788b4f-54b0-4459-8691-4cc7c9b4b388"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"DiagramComposition", "[", 
  RowBox[{"double", ",", " ", "increment"}], "]"}]], "Input",
 CellLabel->"In[9]:=",
 CellID->556882994,ExpressionUUID->"aa505ece-7412-41f8-a807-c1b601137181"],

Cell[BoxData[
 GraphicsBox[
  NamespaceBox["Diagram",
   DynamicModuleBox[{Typeset`d = HoldComplete[
     Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
      "DiagramOptions" -> {
        "PortArrows" -> {{Automatic, Automatic}, {Automatic, Automatic}}, 
         "PortLabels" -> {{Automatic, Automatic}, {Automatic, Automatic}}}, 
       "Expression" :> 
       Wolfram`DiagrammaticComputation`Diagram`DiagramComposition[
         Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
          "DiagramOptions" -> {
            "PortArrows" -> {{Automatic}, {Automatic}}, 
             "PortLabels" -> {{Automatic}, {Automatic}}}, "Expression" :> 
           "[2\[Times]]", "InputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Port`PortDual[
                Wolfram`DiagrammaticComputation`Diagram`Rewriting`x], 
               "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
               SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Diagram`Rewriting`y, 
               "NeutralQ" -> False, "Tags" -> {}, 
               "Type" -> \[FormalCapitalT]|>]}|>], 
         Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
          "DiagramOptions" -> {
            "PortArrows" -> {{Automatic}, {Automatic}}, 
             "PortLabels" -> {{Automatic}, {Automatic}}}, "Expression" :> 
           "[+1]", "InputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Port`PortDual[
                Wolfram`DiagrammaticComputation`Diagram`Rewriting`y], 
               "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
               SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> $CellContext`z, "NeutralQ" -> False, 
               "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>]], 
       "InputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> 
           Wolfram`DiagrammaticComputation`Port`PortDual[
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`y], "NeutralQ" -> 
           False, "Tags" -> {}, "Type" -> SuperStar[\[FormalCapitalT]]|>], 
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> 
           Wolfram`DiagrammaticComputation`Port`PortDual[
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`x], "NeutralQ" -> 
           False, "Tags" -> {}, "Type" -> SuperStar[\[FormalCapitalT]]|>]}, 
       "OutputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> $CellContext`z, "NeutralQ" -> False, "Tags" -> {}, 
           "Type" -> \[FormalCapitalT]|>], 
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> Wolfram`DiagrammaticComputation`Diagram`Rewriting`y,
            "NeutralQ" -> False, "Tags" -> {}, 
           "Type" -> \[FormalCapitalT]|>]}|>]]}, {{
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        GeometricTransformationBox[
         RectangleBox[{0.5, 0.5}], {{{1., 0.}, {0., 1.}}, {0., 0.}}]}, {{
         ArrowBox[{{1., 1.75}, {1., 1.5}}], InsetBox[
          InterpretationBox[
           TagBox["y",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`y, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {1., 1.875}]}, {
         ArrowBox[{{1., 0.5}, {1., 0.25}}], InsetBox[
          InterpretationBox[
           TagBox["z",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> $CellContext`z, "NeutralQ" -> False, "Tags" -> {},
              "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {1., 0.125}]}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox["\<\"[+1]\"\>",
          HoldForm], {1., 1.}]}}, 
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        GeometricTransformationBox[
         RectangleBox[{2.5, 0.5}], {{{1., 0.}, {0., 1.}}, {0., 0.}}]}, {{
         ArrowBox[{{3., 1.75}, {3., 1.5}}], InsetBox[
          InterpretationBox[
           TagBox["x",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`x, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {3., 1.875}]}, {
         ArrowBox[{{3., 0.5}, {3., 0.25}}], InsetBox[
          InterpretationBox[
           TagBox["y",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`y, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {3., 0.125}]}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox["\<\"[2\[Times]]\"\>",
          HoldForm], {3., 1.}]}}}, {}, {}, {}, 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Thickness[Tiny]}], FaceForm[None]}}]],
  BaseStyle->{{{}, {}}, {{}, {}}},
  FormatType->StandardForm,
  ImageSize->Small]], "Output",
 CellChangeTimes->{3.9648650188545227`*^9, 3.978086986938325*^9},
 CellLabel->"Out[9]=",
 CellID->1678596319,ExpressionUUID->"60e46f8c-ff60-4c68-90b0-49cb2a74c614"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
The result may be unexpected because port (z) is followed by port (x), which \
do not match, so the diagrams compose horizontally in parallel. To fix this, \
it is possible to reassign ports for a diagram. For example, a new double \
diagram with adjusted port names can be constructed like this:\
\>", "Text",
 CellID->612685927,ExpressionUUID->"6bce5193-652f-49fe-9b42-ee636ff7f296"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"double2", " ", "=", " ", 
  RowBox[{"Diagram", "[", 
   RowBox[{"double", ",", " ", "z", ",", " ", "x"}], "]"}]}]], "Input",
 CellLabel->"In[10]:=",
 CellID->228287724,ExpressionUUID->"d6aa4e47-c155-4443-80ef-5ce13a5c5cb7"],

Cell[BoxData[
 GraphicsBox[
  NamespaceBox["Diagram",
   DynamicModuleBox[{Typeset`d = HoldComplete[
     Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
      "DiagramOptions" -> {
        "PortArrows" -> {{Automatic}, {Automatic}}, 
         "PortLabels" -> {{Automatic}, {Automatic}}}, "Expression" :> 
       "[2\[Times]]", "InputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> 
           Wolfram`DiagrammaticComputation`Port`PortDual[$CellContext`z], 
           "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
           SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> Wolfram`DiagrammaticComputation`Diagram`Rewriting`x,
            "NeutralQ" -> False, "Tags" -> {}, 
           "Type" -> \[FormalCapitalT]|>]}|>]]}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      GeometricTransformationBox[
       RectangleBox[
        NCache[{Rational[-1, 2], Rational[-1, 2]}, {-0.5, -0.5}]], {{{1, 0}, {
        0, 1}}, {0, 0}}]}, {{ArrowBox[{{0., 0.75}, {0., 0.5}}], InsetBox[
        InterpretationBox[
         TagBox["z",
          HoldForm],
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> $CellContext`z, "NeutralQ" -> False, "Tags" -> {}, 
           "Type" -> \[FormalCapitalT]|>],
         Tooltip->"\[FormalCapitalT]"], {0., 0.875}]}, {
       ArrowBox[{{0., -0.5}, {0., -0.75}}], InsetBox[
        InterpretationBox[
         TagBox["x",
          HoldForm],
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> Wolfram`DiagrammaticComputation`Diagram`Rewriting`x,
            "NeutralQ" -> False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
         
         Tooltip->"\[FormalCapitalT]"], {0., -0.875}]}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox[
       TagBox["\<\"[2\[Times]]\"\>",
        HoldForm], {0, 0}]}}]],
  BaseStyle->{{{}, {}}, {{}, {}}},
  FormatType->StandardForm,
  ImageSize->Tiny]], "Output",
 CellChangeTimes->{3.9648650188712263`*^9, 3.966450829440529*^9, 
  3.97808698861353*^9},
 CellLabel->"Out[10]=",
 CellID->334076221,ExpressionUUID->"60e2fec6-b630-4a38-bd15-3f478d4b5e10"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
With the new input port name matching the output of the incrementing diagram, \
composition works correctly:\
\>", "Text",
 CellID->590982362,ExpressionUUID->"16dc2e1b-3f21-4306-ba9b-bbcde250a879"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"DiagramComposition", "[", 
  RowBox[{"double2", ",", " ", "increment"}], "]"}]], "Input",
 CellLabel->"In[11]:=",
 CellID->528690759,ExpressionUUID->"b1090aaa-7c8d-4652-82ca-bb91db092606"],

Cell[BoxData[
 GraphicsBox[
  NamespaceBox["Diagram",
   DynamicModuleBox[{Typeset`d = HoldComplete[
     Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
      "DiagramOptions" -> {
        "PortArrows" -> {{Automatic}, {Automatic}}, 
         "PortLabels" -> {{Automatic}, {Automatic}}}, "Expression" :> 
       Wolfram`DiagrammaticComputation`Diagram`DiagramComposition[
         Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
          "DiagramOptions" -> {
            "PortArrows" -> {{Automatic}, {Automatic}}, 
             "PortLabels" -> {{Automatic}, {Automatic}}}, "Expression" :> 
           "[2\[Times]]", "InputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Port`PortDual[$CellContext`z], 
               "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
               SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Diagram`Rewriting`x, 
               "NeutralQ" -> False, "Tags" -> {}, 
               "Type" -> \[FormalCapitalT]|>]}|>], 
         Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
          "DiagramOptions" -> {
            "PortArrows" -> {{Automatic}, {Automatic}}, 
             "PortLabels" -> {{Automatic}, {Automatic}}}, "Expression" :> 
           "[+1]", "InputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Port`PortDual[
                Wolfram`DiagrammaticComputation`Diagram`Rewriting`y], 
               "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
               SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> $CellContext`z, "NeutralQ" -> False, 
               "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>]], 
       "InputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> 
           Wolfram`DiagrammaticComputation`Port`PortDual[
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`y], "NeutralQ" -> 
           False, "Tags" -> {}, "Type" -> SuperStar[\[FormalCapitalT]]|>]}, 
       "OutputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> Wolfram`DiagrammaticComputation`Diagram`Rewriting`x,
            "NeutralQ" -> False, "Tags" -> {}, 
           "Type" -> \[FormalCapitalT]|>]}|>]]}, {{
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        GeometricTransformationBox[
         RectangleBox[{0.5, 0.5}], {{{1., 0.}, {0., 1.}}, {0., 0.}}]}, {{}, {
         ArrowBox[{{1., 0.5}, {1., 0.25}}], InsetBox[
          InterpretationBox[
           TagBox["x",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`x, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {1., 0.125}]}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox["\<\"[2\[Times]]\"\>",
          HoldForm], {1., 1.}]}}, 
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        GeometricTransformationBox[
         RectangleBox[{0.5, 2.5}], {{{1., 0.}, {0., 1.}}, {0., 0.}}]}, {{
         ArrowBox[{{1., 3.75}, {1., 3.5}}], InsetBox[
          InterpretationBox[
           TagBox["y",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`y, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {1., 3.875}]}, {}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox["\<\"[+1]\"\>",
          HoldForm], {1., 3.}]}}}, 
     {Arrowheads[{{Small, 0.5}}], {}, 
      ArrowBox[BSplineCurveBox[{{1., 2.5}, {1., 2.25}, {1., 1.75}, {1., 
        1.5}}]], InsetBox[
       TemplateBox[{"z"},
        "ClickToCopy"], {0.9, 2.}]}, {}, {}, 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Thickness[Tiny]}], FaceForm[None]}}]],
  BaseStyle->{{{}, {}}, {{}, {}}},
  FormatType->StandardForm,
  ImageSize->Small]], "Output",
 CellChangeTimes->{3.964865018909439*^9, 3.966450830975032*^9, 
  3.978086989888719*^9},
 CellLabel->"Out[11]=",
 CellID->1302242943,ExpressionUUID->"e0330a5f-ce14-4097-b08c-cea9c122a744"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
Which, after turning into a function, would produce a different result:\
\>", "Text",
 CellID->108644980,ExpressionUUID->"13578f87-cb52-4150-82fb-4a6e9e3534bd"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(", 
   RowBox[{
    RowBox[{"(", 
     RowBox[{"z", " ", "|->", " ", 
      RowBox[{"z", " ", "+", " ", "1"}]}], ")"}], "/*", 
    RowBox[{"(", 
     RowBox[{"y", " ", "|->", " ", 
      RowBox[{"2", " ", "y"}]}], ")"}]}], ")"}], "@", "3"}]], "Input",
 CellLabel->"In[548]:=",
 CellID->635078910,ExpressionUUID->"dbcfeb4e-4bbf-44f1-9266-d6fd1ca42535"],

Cell[BoxData["8"], "Output",
 CellChangeTimes->{3.964865018921857*^9},
 CellLabel->"Out[548]=",
 CellID->777514780,ExpressionUUID->"fd2c3cfa-d85a-4db3-a7c4-6cca18180255"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
The parallel composition above can also be done directly using DiagramProduct \
in any order; this ensures that ports of horizontally composed diagrams never \
wire together:\
\>", "Text",
 CellID->252915465,ExpressionUUID->"d286642f-d6f9-4c22-b24a-4806224286c8"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"DiagramProduct", "[", 
  RowBox[{"increment", ",", " ", "double"}], "]"}]], "Input",
 CellLabel->"In[12]:=",
 CellID->880082842,ExpressionUUID->"b39eddd5-a362-4720-ae4d-cdc846434bf4"],

Cell[BoxData[
 GraphicsBox[
  NamespaceBox["Diagram",
   DynamicModuleBox[{Typeset`d = HoldComplete[
     Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
      "DiagramOptions" -> {
        "PortArrows" -> {{Automatic, Automatic}, {Automatic, Automatic}}}, 
       "Expression" :> 
       Wolfram`DiagrammaticComputation`Diagram`DiagramProduct[
         Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
          "DiagramOptions" -> {
            "PortArrows" -> {{Automatic}, {Automatic}}, 
             "PortLabels" -> {{Automatic}, {Automatic}}}, "Expression" :> 
           "[+1]", "InputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Port`PortDual[
                Wolfram`DiagrammaticComputation`Diagram`Rewriting`y], 
               "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
               SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> $CellContext`z, "NeutralQ" -> False, 
               "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>], 
         Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
          "DiagramOptions" -> {
            "PortArrows" -> {{Automatic}, {Automatic}}, 
             "PortLabels" -> {{Automatic}, {Automatic}}}, "Expression" :> 
           "[2\[Times]]", "InputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Port`PortDual[
                Wolfram`DiagrammaticComputation`Diagram`Rewriting`x], 
               "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
               SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Diagram`Rewriting`y, 
               "NeutralQ" -> False, "Tags" -> {}, 
               "Type" -> \[FormalCapitalT]|>]}|>]], "InputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> 
           Wolfram`DiagrammaticComputation`Port`PortDual[
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`y], "NeutralQ" -> 
           False, "Tags" -> {}, "Type" -> SuperStar[\[FormalCapitalT]]|>], 
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> 
           Wolfram`DiagrammaticComputation`Port`PortDual[
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`x], "NeutralQ" -> 
           False, "Tags" -> {}, "Type" -> SuperStar[\[FormalCapitalT]]|>]}, 
       "OutputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> $CellContext`z, "NeutralQ" -> False, "Tags" -> {}, 
           "Type" -> \[FormalCapitalT]|>], 
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> Wolfram`DiagrammaticComputation`Diagram`Rewriting`y,
            "NeutralQ" -> False, "Tags" -> {}, 
           "Type" -> \[FormalCapitalT]|>]}|>]]}, {{
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        GeometricTransformationBox[
         RectangleBox[{0.5, 0.5}], {{{1., 0.}, {0., 1.}}, {0., 0.}}]}, {{
         ArrowBox[{{1., 1.75}, {1., 1.5}}], InsetBox[
          InterpretationBox[
           TagBox["y",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`y, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {1., 1.875}]}, {
         ArrowBox[{{1., 0.5}, {1., 0.25}}], InsetBox[
          InterpretationBox[
           TagBox["z",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> $CellContext`z, "NeutralQ" -> False, "Tags" -> {},
              "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {1., 0.125}]}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox["\<\"[+1]\"\>",
          HoldForm], {1., 1.}]}}, 
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        GeometricTransformationBox[
         RectangleBox[{2.5, 0.5}], {{{1., 0.}, {0., 1.}}, {0., 0.}}]}, {{
         ArrowBox[{{3., 1.75}, {3., 1.5}}], InsetBox[
          InterpretationBox[
           TagBox["x",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`x, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {3., 1.875}]}, {
         ArrowBox[{{3., 0.5}, {3., 0.25}}], InsetBox[
          InterpretationBox[
           TagBox["y",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`y, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {3., 0.125}]}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox["\<\"[2\[Times]]\"\>",
          HoldForm], {3., 1.}]}}}, {}, {}, {}, 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Thickness[Tiny]}], FaceForm[None]}}]],
  BaseStyle->{{{}, {}}, {{}, {}}},
  FormatType->StandardForm,
  ImageSize->Small]], "Output",
 CellChangeTimes->{3.96486501894694*^9, 3.966450833354669*^9, 
  3.978086992506391*^9},
 CellLabel->"Out[12]=",
 CellID->1120392233,ExpressionUUID->"f0ce7e05-2ea5-45ba-8b26-0172ba3d736c"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"DiagramProduct", "[", 
  RowBox[{"double", ",", " ", "increment"}], "]"}]], "Input",
 CellLabel->"In[13]:=",
 CellID->900722608,ExpressionUUID->"c4e08055-75a2-4ec2-8113-da91f71b007e"],

Cell[BoxData[
 GraphicsBox[
  NamespaceBox["Diagram",
   DynamicModuleBox[{Typeset`d = HoldComplete[
     Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
      "DiagramOptions" -> {
        "PortArrows" -> {{Automatic, Automatic}, {Automatic, Automatic}}}, 
       "Expression" :> 
       Wolfram`DiagrammaticComputation`Diagram`DiagramProduct[
         Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
          "DiagramOptions" -> {
            "PortArrows" -> {{Automatic}, {Automatic}}, 
             "PortLabels" -> {{Automatic}, {Automatic}}}, "Expression" :> 
           "[2\[Times]]", "InputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Port`PortDual[
                Wolfram`DiagrammaticComputation`Diagram`Rewriting`x], 
               "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
               SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Diagram`Rewriting`y, 
               "NeutralQ" -> False, "Tags" -> {}, 
               "Type" -> \[FormalCapitalT]|>]}|>], 
         Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
          "DiagramOptions" -> {
            "PortArrows" -> {{Automatic}, {Automatic}}, 
             "PortLabels" -> {{Automatic}, {Automatic}}}, "Expression" :> 
           "[+1]", "InputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Port`PortDual[
                Wolfram`DiagrammaticComputation`Diagram`Rewriting`y], 
               "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
               SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> $CellContext`z, "NeutralQ" -> False, 
               "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>]], 
       "InputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> 
           Wolfram`DiagrammaticComputation`Port`PortDual[
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`x], "NeutralQ" -> 
           False, "Tags" -> {}, "Type" -> SuperStar[\[FormalCapitalT]]|>], 
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> 
           Wolfram`DiagrammaticComputation`Port`PortDual[
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`y], "NeutralQ" -> 
           False, "Tags" -> {}, "Type" -> SuperStar[\[FormalCapitalT]]|>]}, 
       "OutputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> Wolfram`DiagrammaticComputation`Diagram`Rewriting`y,
            "NeutralQ" -> False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>], 
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> $CellContext`z, "NeutralQ" -> False, "Tags" -> {}, 
           "Type" -> \[FormalCapitalT]|>]}|>]]}, {{
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        GeometricTransformationBox[
         RectangleBox[{0.5, 0.5}], {{{1., 0.}, {0., 1.}}, {0., 0.}}]}, {{
         ArrowBox[{{1., 1.75}, {1., 1.5}}], InsetBox[
          InterpretationBox[
           TagBox["x",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`x, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {1., 1.875}]}, {
         ArrowBox[{{1., 0.5}, {1., 0.25}}], InsetBox[
          InterpretationBox[
           TagBox["y",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`y, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {1., 0.125}]}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox["\<\"[2\[Times]]\"\>",
          HoldForm], {1., 1.}]}}, 
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        GeometricTransformationBox[
         RectangleBox[{2.5, 0.5}], {{{1., 0.}, {0., 1.}}, {0., 0.}}]}, {{
         ArrowBox[{{3., 1.75}, {3., 1.5}}], InsetBox[
          InterpretationBox[
           TagBox["y",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`y, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {3., 1.875}]}, {
         ArrowBox[{{3., 0.5}, {3., 0.25}}], InsetBox[
          InterpretationBox[
           TagBox["z",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> $CellContext`z, "NeutralQ" -> False, "Tags" -> {},
              "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {3., 0.125}]}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox["\<\"[+1]\"\>",
          HoldForm], {3., 1.}]}}}, {}, {}, {}, 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Thickness[Tiny]}], FaceForm[None]}}]],
  BaseStyle->{{{}, {}}, {{}, {}}},
  FormatType->StandardForm,
  ImageSize->Small]], "Output",
 CellChangeTimes->{3.964865018979485*^9, 3.966450833955802*^9, 
  3.978086993202993*^9},
 CellLabel->"Out[13]=",
 CellID->1703945412,ExpressionUUID->"a6e042cb-7a6d-423a-bd59-22234967d373"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
These diagrams also show that, in principle, diagrams can have multiple \
inputs and multiple outputs:\
\>", "Text",
 CellChangeTimes->{{3.966450835116542*^9, 3.966450836089756*^9}},
 CellID->1260281219,ExpressionUUID->"e37fdfbc-3373-42d3-ade3-19a5cd3ac62c"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Diagram", "[", 
  RowBox[{"f", ",", " ", 
   RowBox[{"{", 
    RowBox[{"x", ",", " ", "y"}], "}"}], ",", " ", 
   RowBox[{"{", 
    RowBox[{"a", ",", " ", "b", ",", " ", "c"}], "}"}]}], "]"}]], "Input",
 CellLabel->"In[14]:=",
 CellID->915237372,ExpressionUUID->"72e73bb7-74c2-48e8-b18e-54e02511ae8f"],

Cell[BoxData[
 GraphicsBox[
  NamespaceBox["Diagram",
   DynamicModuleBox[{Typeset`d = HoldComplete[
     Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
      "DiagramOptions" -> {
        "PortArrows" -> {{Automatic, Automatic}, {
           Automatic, Automatic, Automatic}}, 
         "PortLabels" -> {{Automatic, Automatic}, {
           Automatic, Automatic, Automatic}}}, "Expression" :> $CellContext`f,
        "InputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> 
           Wolfram`DiagrammaticComputation`Port`PortDual[
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`x], "NeutralQ" -> 
           False, "Tags" -> {}, "Type" -> SuperStar[\[FormalCapitalT]]|>], 
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> 
           Wolfram`DiagrammaticComputation`Port`PortDual[
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`y], "NeutralQ" -> 
           False, "Tags" -> {}, "Type" -> SuperStar[\[FormalCapitalT]]|>]}, 
       "OutputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> Wolfram`DiagrammaticComputation`Diagram`Rewriting`a,
            "NeutralQ" -> False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>], 
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> Wolfram`DiagrammaticComputation`Diagram`Rewriting`b,
            "NeutralQ" -> False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>], 
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> Wolfram`DiagrammaticComputation`Diagram`Rewriting`c,
            "NeutralQ" -> False, "Tags" -> {}, 
           "Type" -> \[FormalCapitalT]|>]}|>]]}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      GeometricTransformationBox[
       RectangleBox[
        NCache[{Rational[-1, 2], Rational[-1, 2]}, {-0.5, -0.5}]], {{{1, 0}, {
        0, 1}}, {0, 0}}]}, {{{
        ArrowBox[{{-0.2666666666666667, 0.75}, {-0.2666666666666667, 0.5}}], 
        InsetBox[
         InterpretationBox[
          TagBox["x",
           HoldForm],
          
          Wolfram`DiagrammaticComputation`Port`Port[<|
           "Expression" :> 
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`x, "NeutralQ" -> 
            False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
          Tooltip->"\[FormalCapitalT]"], {-0.2666666666666667, 0.875}]}, {
        ArrowBox[{{0.2666666666666666, 0.75}, {0.2666666666666666, 0.5}}], 
        InsetBox[
         InterpretationBox[
          TagBox["y",
           HoldForm],
          
          Wolfram`DiagrammaticComputation`Port`Port[<|
           "Expression" :> 
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`y, "NeutralQ" -> 
            False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
          Tooltip->"\[FormalCapitalT]"], {0.2666666666666666, 0.875}]}}, {{
        ArrowBox[{{-0.4, -0.5}, {-0.4, -0.75}}], InsetBox[
         InterpretationBox[
          TagBox["a",
           HoldForm],
          
          Wolfram`DiagrammaticComputation`Port`Port[<|
           "Expression" :> 
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`a, "NeutralQ" -> 
            False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
          Tooltip->"\[FormalCapitalT]"], {-0.4, -0.875}]}, {
        ArrowBox[{{0., -0.5}, {0., -0.75}}], InsetBox[
         InterpretationBox[
          TagBox["b",
           HoldForm],
          
          Wolfram`DiagrammaticComputation`Port`Port[<|
           "Expression" :> 
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, "NeutralQ" -> 
            False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
          Tooltip->"\[FormalCapitalT]"], {0., -0.875}]}, {
        ArrowBox[{{0.4, -0.5}, {0.4, -0.75}}], InsetBox[
         InterpretationBox[
          TagBox["c",
           HoldForm],
          
          Wolfram`DiagrammaticComputation`Port`Port[<|
           "Expression" :> 
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`c, "NeutralQ" -> 
            False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
          Tooltip->"\[FormalCapitalT]"], {0.4, -0.875}]}}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox[
       TagBox["f",
        HoldForm], {0, 0}]}}]],
  BaseStyle->{{{}, {}}, {{}, {}}},
  FormatType->StandardForm,
  ImageSize->Tiny]], "Output",
 CellChangeTimes->{3.96486501899557*^9, 3.966450836906157*^9, 
  3.978087001160575*^9},
 CellLabel->"Out[14]=",
 CellID->1830473177,ExpressionUUID->"0b268844-fe29-4a4c-a3f4-c6b6a881d6ca"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["This also includes zero inputs and/or zero outputs:", "Text",
 CellID->1157159175,ExpressionUUID->"d3e38fee-0381-4600-9efd-778bc57a3135"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"Diagram", "[", 
    RowBox[{"x", ",", " ", "a"}], "]"}], ",", " ", 
   RowBox[{"Diagram", "[", 
    RowBox[{"x", ",", " ", "a", ",", " ", 
     RowBox[{"{", "}"}]}], "]"}], ",", " ", 
   RowBox[{"Diagram", "[", "x", "]"}]}], "}"}]], "Input",
 CellLabel->"In[15]:=",
 CellID->762346993,ExpressionUUID->"d47db99d-24a2-4ad5-af64-2cf5d72a29a8"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   GraphicsBox[
    NamespaceBox["Diagram",
     DynamicModuleBox[{Typeset`d = HoldComplete[
       Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
        "DiagramOptions" -> {
          "PortArrows" -> {Automatic, {Automatic}}, 
           "PortLabels" -> {Automatic, {Automatic}}}, "Expression" :> 
         Wolfram`DiagrammaticComputation`Diagram`Rewriting`x, 
         "InputPorts" -> {}, "OutputPorts" -> {
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`a, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>]]}, 
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        GeometricTransformationBox[
         RectangleBox[
          NCache[{Rational[-1, 2], Rational[-1, 2]}, {-0.5, -0.5}]], {{{1, 
          0}, {0, 1}}, {0, 0}}]}, {{}, {ArrowBox[{{0., -0.5}, {0., -0.75}}], 
         InsetBox[
          InterpretationBox[
           TagBox["a",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`a, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {0., -0.875}]}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox["x",
          HoldForm], {0, 0}]}}]],
    BaseStyle->{{{}, {}}, {{}, {}}},
    FormatType->StandardForm], ",", 
   GraphicsBox[
    NamespaceBox["Diagram",
     DynamicModuleBox[{Typeset`d = HoldComplete[
       Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
        "DiagramOptions" -> {
          "PortArrows" -> {{Automatic}, Automatic}, 
           "PortLabels" -> {{Automatic}, Automatic}}, "Expression" :> 
         Wolfram`DiagrammaticComputation`Diagram`Rewriting`x, "InputPorts" -> {
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Port`PortDual[
              Wolfram`DiagrammaticComputation`Diagram`Rewriting`a], 
             "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
             SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {}|>]]}, 
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        GeometricTransformationBox[
         RectangleBox[
          NCache[{Rational[-1, 2], Rational[-1, 2]}, {-0.5, -0.5}]], {{{1, 
          0}, {0, 1}}, {0, 0}}]}, {{ArrowBox[{{0., 0.75}, {0., 0.5}}], 
         InsetBox[
          InterpretationBox[
           TagBox["a",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`a, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {0., 0.875}]}, {}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox["x",
          HoldForm], {0, 0}]}}]],
    BaseStyle->{{{}, {}}, {{}, {}}},
    FormatType->StandardForm], ",", 
   GraphicsBox[
    NamespaceBox["Diagram",
     DynamicModuleBox[{Typeset`d = HoldComplete[
       Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
        "DiagramOptions" -> {
          "PortArrows" -> {Automatic, Automatic}, 
           "PortLabels" -> {Automatic, Automatic}}, "Expression" :> 
         Wolfram`DiagrammaticComputation`Diagram`Rewriting`x, 
         "InputPorts" -> {}, "OutputPorts" -> {}|>]]}, 
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        GeometricTransformationBox[
         RectangleBox[
          NCache[{Rational[-1, 2], Rational[-1, 2]}, {-0.5, -0.5}]], {{{1, 
          0}, {0, 1}}, {0, 0}}]}, {{}, {}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox["x",
          HoldForm], {0, 0}]}}]],
    BaseStyle->{{{}, {}}, {{}, {}}},
    FormatType->StandardForm]}], "}"}]], "Output",
 CellChangeTimes->{3.964865019015499*^9, 3.966450837972891*^9, 
  3.978087003091982*^9},
 CellLabel->"Out[15]=",
 CellID->1452667643,ExpressionUUID->"93cb2b5a-6019-4e9b-98ff-53967289dcfd"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
For example, the input to a computation can be represented as a diagram with \
no inputs:\
\>", "Text",
 CellID->551503518,ExpressionUUID->"b3b49428-f3f3-4e05-992c-b4c6ea058158"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"three", " ", "=", " ", 
  RowBox[{"Diagram", "[", 
   RowBox[{"3", ",", " ", "x"}], "]"}]}]], "Input",
 CellLabel->"In[16]:=",
 CellID->580206574,ExpressionUUID->"47da48af-8ab9-42c5-bebb-fad57257ab28"],

Cell[BoxData[
 GraphicsBox[
  NamespaceBox["Diagram",
   DynamicModuleBox[{Typeset`d = HoldComplete[
     Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
      "DiagramOptions" -> {
        "PortArrows" -> {Automatic, {Automatic}}, 
         "PortLabels" -> {Automatic, {Automatic}}}, "Expression" :> 3, 
       "InputPorts" -> {}, "OutputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> Wolfram`DiagrammaticComputation`Diagram`Rewriting`x,
            "NeutralQ" -> False, "Tags" -> {}, 
           "Type" -> \[FormalCapitalT]|>]}|>]]}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      GeometricTransformationBox[
       RectangleBox[
        NCache[{Rational[-1, 2], Rational[-1, 2]}, {-0.5, -0.5}]], {{{1, 0}, {
        0, 1}}, {0, 0}}]}, {{}, {ArrowBox[{{0., -0.5}, {0., -0.75}}], InsetBox[
        InterpretationBox[
         TagBox["x",
          HoldForm],
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> Wolfram`DiagrammaticComputation`Diagram`Rewriting`x,
            "NeutralQ" -> False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
         
         Tooltip->"\[FormalCapitalT]"], {0., -0.875}]}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox[
       TagBox["3",
        HoldForm], {0, 0}]}}]],
  BaseStyle->{{{}, {}}, {{}, {}}},
  FormatType->StandardForm,
  ImageSize->Tiny]], "Output",
 CellChangeTimes->{3.964865019033414*^9, 3.966450839197083*^9, 
  3.978087005336302*^9},
 CellLabel->"Out[16]=",
 CellID->84089621,ExpressionUUID->"b6c46212-0ac6-4158-833f-cacac10da030"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
And it can also be used in a composition to diagrammatically represent the \
whole computation:\
\>", "Text",
 CellID->880649343,ExpressionUUID->"5126e0e6-f055-4c1e-aae8-b1a7de926aaa"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"DiagramComposition", "[", 
  RowBox[{"increment", ",", " ", "double", ",", " ", "three"}], 
  "]"}]], "Input",
 CellLabel->"In[17]:=",
 CellID->616212677,ExpressionUUID->"b1800aad-018b-436e-a72c-49f3f6f22039"],

Cell[BoxData[
 GraphicsBox[
  NamespaceBox["Diagram",
   DynamicModuleBox[{Typeset`d = HoldComplete[
     Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
      "DiagramOptions" -> {
        "PortArrows" -> {{}, {Automatic}}, "PortLabels" -> {{}, {Automatic}}},
        "Expression" :> 
       Wolfram`DiagrammaticComputation`Diagram`DiagramComposition[
         Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
          "DiagramOptions" -> {
            "PortArrows" -> {{Automatic}, {Automatic}}, 
             "PortLabels" -> {{Automatic}, {Automatic}}}, "Expression" :> 
           "[+1]", "InputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Port`PortDual[
                Wolfram`DiagrammaticComputation`Diagram`Rewriting`y], 
               "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
               SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> $CellContext`z, "NeutralQ" -> False, 
               "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>], 
         Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
          "DiagramOptions" -> {
            "PortArrows" -> {{Automatic}, {Automatic}}, 
             "PortLabels" -> {{Automatic}, {Automatic}}}, "Expression" :> 
           "[2\[Times]]", "InputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Port`PortDual[
                Wolfram`DiagrammaticComputation`Diagram`Rewriting`x], 
               "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
               SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Diagram`Rewriting`y, 
               "NeutralQ" -> False, "Tags" -> {}, 
               "Type" -> \[FormalCapitalT]|>]}|>], 
         Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
          "DiagramOptions" -> {
            "PortArrows" -> {Automatic, {Automatic}}, 
             "PortLabels" -> {Automatic, {Automatic}}}, "Expression" :> 3, 
           "InputPorts" -> {}, "OutputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Diagram`Rewriting`x, 
               "NeutralQ" -> False, "Tags" -> {}, 
               "Type" -> \[FormalCapitalT]|>]}|>]], "InputPorts" -> {}, 
       "OutputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> $CellContext`z, "NeutralQ" -> False, "Tags" -> {}, 
           "Type" -> \[FormalCapitalT]|>]}|>]]}, {{
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        GeometricTransformationBox[
         RectangleBox[{0.5, 0.5}], {{{1., 0.}, {0., 1.}}, {0., 0.}}]}, {{}, {
         ArrowBox[{{1., 0.5}, {1., 0.25}}], InsetBox[
          InterpretationBox[
           TagBox["z",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> $CellContext`z, "NeutralQ" -> False, "Tags" -> {},
              "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {1., 0.125}]}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox["\<\"[+1]\"\>",
          HoldForm], {1., 1.}]}}, 
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        GeometricTransformationBox[
         RectangleBox[{0.5, 2.5}], {{{1., 0.}, {0., 1.}}, {0., 
          0.}}]}, {{}, {}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox["\<\"[2\[Times]]\"\>",
          HoldForm], {1., 3.}]}}, 
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        GeometricTransformationBox[
         RectangleBox[{0.5, 4.5}], {{{1., 0.}, {0., 1.}}, {0., 
          0.}}]}, {{}, {}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox["3",
          HoldForm], {1., 5.}]}}}, {
      {Arrowheads[{{Small, 0.5}}], {}, 
       ArrowBox[
        BSplineCurveBox[{{1., 4.5}, {1., 4.25}, {1., 3.75}, {1., 3.5}}]], 
       InsetBox[
        TemplateBox[{"x"},
         "ClickToCopy"], {0.9, 4.}]}, 
      {Arrowheads[{{Small, 0.5}}], {}, 
       ArrowBox[
        BSplineCurveBox[{{1., 2.5}, {1., 2.25}, {1., 1.75}, {1., 1.5}}]], 
       InsetBox[
        TemplateBox[{"y"},
         "ClickToCopy"], {0.9, 2.}]}}, {}, {}, 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Thickness[Tiny]}], FaceForm[None]}}]],
  BaseStyle->{{{}, {}}, {{}, {}}},
  FormatType->StandardForm,
  ImageSize->Small]], "Output",
 CellChangeTimes->{3.9648650190805893`*^9, 3.966450841456056*^9, 
  3.9780870071785994`*^9},
 CellLabel->"Out[17]=",
 CellID->362845778,ExpressionUUID->"b51a2a48-1f16-4403-b026-a93776dbc1dc"]
}, Open  ]]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Diagram functions", "Section",
 CellID->1199067529,ExpressionUUID->"19bf3f2b-9eb2-4e5d-a0d5-a5e5c983d7b0"],

Cell["\<\
Building on simple compositions, we can create more intricate compositions by \
combining vertical and horizontal arrangements, introducing branching and \
merging. This allows modeling workflows with parallel paths that diverge and \
reconverge, such as processing a number through multiple operations before \
combining results.\
\>", "Text",
 CellID->741416455,ExpressionUUID->"f1fd1b24-779e-4613-aa74-c3a13439685f"],

Cell[CellGroupData[{

Cell["\<\
To turn diagrams into functions, its symbolic label has to be annotated with \
functional code, for example:\
\>", "Text",
 CellID->1286239291,ExpressionUUID->"7944c30b-5dfb-4f84-9f14-c0c14e5b870c"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"add", "=", 
  RowBox[{"Diagram", "[", 
   RowBox[{
    RowBox[{"Annotation", "[", 
     RowBox[{"\"\<[+]\>\"", ",", 
      RowBox[{"\"\<Function\>\"", "->", "Plus"}]}], "]"}], ",", 
    RowBox[{"{", 
     RowBox[{"s", ",", "t"}], "}"}], ",", "result"}], "]"}]}]], "Input",
 CellLabel->"In[18]:=",
 CellID->1253373135,ExpressionUUID->"82dc9df7-ada2-49de-992b-06d47caae1fc"],

Cell[BoxData[
 GraphicsBox[
  NamespaceBox["Diagram",
   DynamicModuleBox[{Typeset`d = HoldComplete[
     Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
      "DiagramOptions" -> {
        "PortArrows" -> {{Automatic, Automatic}, {Automatic}}, 
         "PortLabels" -> {{Automatic, Automatic}, {Automatic}}}, "Expression" :> 
       Annotation["[+]", "Function" -> Plus], "InputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> 
           Wolfram`DiagrammaticComputation`Port`PortDual[$CellContext`s], 
           "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
           SuperStar[\[FormalCapitalT]]|>], 
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> 
           Wolfram`DiagrammaticComputation`Port`PortDual[$CellContext`t], 
           "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
           SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> $CellContext`result, "NeutralQ" -> False, 
           "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>]]}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      GeometricTransformationBox[
       RectangleBox[
        NCache[{Rational[-1, 2], Rational[-1, 2]}, {-0.5, -0.5}]], {{{1, 0}, {
        0, 1}}, {0, 0}}]}, {{{
        ArrowBox[{{-0.2666666666666667, 0.75}, {-0.2666666666666667, 0.5}}], 
        InsetBox[
         InterpretationBox[
          TagBox["s",
           HoldForm],
          
          Wolfram`DiagrammaticComputation`Port`Port[<|
           "Expression" :> $CellContext`s, "NeutralQ" -> False, "Tags" -> {}, 
            "Type" -> \[FormalCapitalT]|>],
          Tooltip->"\[FormalCapitalT]"], {-0.2666666666666667, 0.875}]}, {
        ArrowBox[{{0.2666666666666666, 0.75}, {0.2666666666666666, 0.5}}], 
        InsetBox[
         InterpretationBox[
          TagBox["t",
           HoldForm],
          
          Wolfram`DiagrammaticComputation`Port`Port[<|
           "Expression" :> $CellContext`t, "NeutralQ" -> False, "Tags" -> {}, 
            "Type" -> \[FormalCapitalT]|>],
          Tooltip->"\[FormalCapitalT]"], {0.2666666666666666, 0.875}]}}, {
       ArrowBox[{{0., -0.5}, {0., -0.75}}], InsetBox[
        InterpretationBox[
         TagBox["result",
          HoldForm],
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> $CellContext`result, "NeutralQ" -> False, 
           "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
         Tooltip->"\[FormalCapitalT]"], {0., -0.875}]}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox[
       TagBox[
        TagBox["\<\"[+]\"\>",
         Annotation[#, "Function" -> Plus]& ],
        HoldForm], {0, 0}]}}]],
  BaseStyle->{{{}, {}}, {{}, {}}},
  FormatType->StandardForm,
  ImageSize->Tiny]], "Output",
 CellChangeTimes->{3.9648650190959272`*^9, 3.9664508128638144`*^9, 
  3.966450842944214*^9, 3.9780870120532007`*^9},
 CellLabel->"Out[18]=",
 CellID->2034883763,ExpressionUUID->"6d73414c-5cef-4964-9519-7c8b406d40a6"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
Given this more verbose diagram, we can turn it into a function:\
\>", "Text",
 CellID->1924072552,ExpressionUUID->"1539d31f-7d41-46c4-835c-addaad8f3858"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"DiagramFunction", "[", "add", "]"}]], "Input",
 CellLabel->"In[19]:=",
 CellID->1078624938,ExpressionUUID->"d3786478-68b0-41d0-bece-ba8b2e2c9065"],

Cell[BoxData["Plus"], "Output",
 CellChangeTimes->{3.964865019106813*^9, 3.9780870139388847`*^9},
 CellLabel->"Out[19]=",
 CellID->796838052,ExpressionUUID->"6da511db-40c1-4432-8a2b-e7f149b98d1c"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
With such function annotations it is possible to build a more complex \
diagram, now using more convenient ColumnDiagram and RowDiagram constructors:\
\
\>", "Text",
 CellID->1246785676,ExpressionUUID->"cb9365ac-1e11-4d73-9b4f-d8af32f993db"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"{", "\n", 
  RowBox[{
   RowBox[{"three", " ", "=", " ", 
    RowBox[{"Diagram", "[", 
     RowBox[{
      RowBox[{"Annotation", "[", 
       RowBox[{"\"\<3\>\"", ",", 
        RowBox[{"\"\<Function\>\"", "->", 
         RowBox[{"(", 
          RowBox[{"3", "&"}], ")"}]}]}], "]"}], ",", " ", "input"}], "]"}]}], 
   ",", "\n", 
   RowBox[{"double", "=", " ", 
    RowBox[{"Diagram", "[", 
     RowBox[{
      RowBox[{"Annotation", "[", 
       RowBox[{"\"\<[2\[Times]]\>\"", ",", 
        RowBox[{"\"\<Function\>\"", "->", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"2", "#"}], "&"}], ")"}]}]}], "]"}], ",", " ", "input", ",",
       " ", "doubled"}], "]"}]}], ",", "\n", 
   RowBox[{"copy", " ", "=", " ", 
    RowBox[{"Diagram", "[", 
     RowBox[{
      RowBox[{"Annotation", "[", 
       RowBox[{"\"\<\>\"", ",", 
        RowBox[{"\"\<Function\>\"", "->", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"Sequence", "@@", 
            RowBox[{"{", 
             RowBox[{"#", ",", "#"}], "}"}]}], "&"}], ")"}]}]}], "]"}], ",", 
      " ", "doubled", ",", " ", 
      RowBox[{"{", 
       RowBox[{"a", ",", "b"}], "}"}], ",", " ", 
      RowBox[{"\"\<Shape\>\"", " ", "->", " ", "\"\<Point\>\""}]}], "]"}]}], ",",
    "\n", 
   RowBox[{"increment", " ", "=", " ", 
    RowBox[{"Diagram", "[", 
     RowBox[{
      RowBox[{"Annotation", "[", 
       RowBox[{"\"\<[+1]\>\"", ",", 
        RowBox[{"\"\<Function\>\"", "->", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"#", "+", "1"}], "&"}], ")"}]}]}], "]"}], ",", "a", ",", 
      " ", "incremented"}], "]"}]}], ",", "\n", 
   RowBox[{"square", " ", "=", " ", 
    RowBox[{"Diagram", "[", 
     RowBox[{
      RowBox[{"Annotation", "[", 
       RowBox[{"\"\<[^2]\>\"", ",", 
        RowBox[{"\"\<Function\>\"", "->", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"#", "^", "2"}], "&"}], ")"}]}]}], "]"}], ",", " ", "b", ",",
       " ", "squared"}], "]"}]}], ",", "\n", 
   RowBox[{"add", " ", "=", " ", 
    RowBox[{"Diagram", "[", 
     RowBox[{
      RowBox[{"Annotation", "[", 
       RowBox[{"\"\<[+]\>\"", ",", 
        RowBox[{"\"\<Function\>\"", "->", "Plus"}]}], "]"}], ",", " ", 
      RowBox[{"{", 
       RowBox[{"incremented", ",", " ", "squared"}], "}"}], ",", " ", 
      "result"}], "]"}]}]}], "\n", "\n", "}"}]], "Input",
 CellLabel->"In[20]:=",
 CellID->1728912753,ExpressionUUID->"609e0e05-d334-4ff9-bb15-11bb1a4f8c73"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   GraphicsBox[
    NamespaceBox["Diagram",
     DynamicModuleBox[{Typeset`d = HoldComplete[
       Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
        "DiagramOptions" -> {
          "PortArrows" -> {Automatic, {Automatic}}, 
           "PortLabels" -> {Automatic, {Automatic}}}, "Expression" :> 
         Annotation["3", "Function" -> (3& )], "InputPorts" -> {}, 
         "OutputPorts" -> {
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> $CellContext`input, "NeutralQ" -> False, 
             "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>]]}, 
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        GeometricTransformationBox[
         RectangleBox[
          NCache[{Rational[-1, 2], Rational[-1, 2]}, {-0.5, -0.5}]], {{{1, 
          0}, {0, 1}}, {0, 0}}]}, {{}, {ArrowBox[{{0., -0.5}, {0., -0.75}}], 
         InsetBox[
          InterpretationBox[
           TagBox["input",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> $CellContext`input, "NeutralQ" -> False, 
             "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {0., -0.875}]}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox[
          TagBox["\<\"3\"\>",
           Annotation[#, "Function" -> (3& )]& ],
          HoldForm], {0, 0}]}}]],
    BaseStyle->{{{}, {}}, {{}, {}}},
    FormatType->StandardForm], ",", 
   GraphicsBox[
    NamespaceBox["Diagram",
     DynamicModuleBox[{Typeset`d = HoldComplete[
       Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
        "DiagramOptions" -> {
          "PortArrows" -> {{Automatic}, {Automatic}}, 
           "PortLabels" -> {{Automatic}, {Automatic}}}, "Expression" :> 
         Annotation["[2\[Times]]", "Function" -> (2 #& )], "InputPorts" -> {
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Port`PortDual[$CellContext`input]\
, "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
             SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> $CellContext`doubled, "NeutralQ" -> False, 
             "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>]]}, 
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        GeometricTransformationBox[
         RectangleBox[
          NCache[{Rational[-1, 2], Rational[-1, 2]}, {-0.5, -0.5}]], {{{1, 
          0}, {0, 1}}, {0, 0}}]}, {{ArrowBox[{{0., 0.75}, {0., 0.5}}], 
         InsetBox[
          InterpretationBox[
           TagBox["input",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> $CellContext`input, "NeutralQ" -> False, 
             "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {0., 0.875}]}, {
         ArrowBox[{{0., -0.5}, {0., -0.75}}], InsetBox[
          InterpretationBox[
           TagBox["doubled",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> $CellContext`doubled, "NeutralQ" -> False, 
             "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {0., -0.875}]}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox[
          TagBox["\<\"[2\[Times]]\"\>",
           Annotation[#, "Function" -> (2 #& )]& ],
          HoldForm], {0, 0}]}}]],
    BaseStyle->{{{}, {}}, {{}, {}}},
    FormatType->StandardForm], ",", 
   GraphicsBox[
    NamespaceBox["Diagram",
     DynamicModuleBox[{Typeset`d = HoldComplete[
       Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
        "DiagramOptions" -> {
          "PortArrows" -> {{Automatic}, {Automatic, Automatic}}, 
           "PortLabels" -> {{Automatic}, {Automatic, Automatic}}, "Shape" -> 
           "Point"}, "Expression" :> 
         Annotation["", "Function" -> (Apply[Sequence, {#, #}]& )], 
         "InputPorts" -> {
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Port`PortDual[$CellContext`\
doubled], "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
             SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`a, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>], 
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>]]}, 
      {Arrowheads[{{Small, 0.7}}], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        {PointSize[Medium], PointBox[{0, 0}]}}, {{ArrowBox[{{0, 1}, {0, 0}}], 
         InsetBox[
          InterpretationBox[
           TagBox["doubled",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> $CellContext`doubled, "NeutralQ" -> False, 
             "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], 
          NCache[{0, Rational[3, 2]}, {0, 1.5}]]}, {{
          ArrowBox[
           NCache[{{0, 0}, {
             Rational[-1, 2], Rational[-1, 2] 3^Rational[1, 2]}}, {{0, 
             0}, {-0.5, -0.8660254037844386}}]], InsetBox[
           InterpretationBox[
            TagBox["a",
             HoldForm],
            
            Wolfram`DiagrammaticComputation`Port`Port[<|
             "Expression" :> 
              Wolfram`DiagrammaticComputation`Diagram`Rewriting`a, "NeutralQ" -> 
              False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
            Tooltip->"\[FormalCapitalT]"], 
           NCache[{Rational[-3, 4], Rational[-3, 4] 
             3^Rational[1, 2]}, {-0.75, -1.299038105676658}]]}, {
          ArrowBox[
           NCache[{{0, 0}, {
             Rational[1, 2], Rational[-1, 2] 3^Rational[1, 2]}}, {{0, 0}, {
             0.5, -0.8660254037844386}}]], InsetBox[
           InterpretationBox[
            TagBox["b",
             HoldForm],
            
            Wolfram`DiagrammaticComputation`Port`Port[<|
             "Expression" :> 
              Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, "NeutralQ" -> 
              False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
            Tooltip->"\[FormalCapitalT]"], 
           NCache[{Rational[3, 4], Rational[-3, 4] 3^Rational[1, 2]}, {
            0.75, -1.299038105676658}]]}}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox[
          TagBox["\<\"\"\>",
           Annotation[#, "Function" -> (Apply[Sequence, {#, #}]& )]& ],
          HoldForm], {0, 0}]}}]],
    BaseStyle->{{{}, {}}, {{}, {}}},
    FormatType->StandardForm], ",", 
   GraphicsBox[
    NamespaceBox["Diagram",
     DynamicModuleBox[{Typeset`d = HoldComplete[
       Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
        "DiagramOptions" -> {
          "PortArrows" -> {{Automatic}, {Automatic}}, 
           "PortLabels" -> {{Automatic}, {Automatic}}}, "Expression" :> 
         Annotation["[+1]", "Function" -> (# + 1& )], "InputPorts" -> {
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Port`PortDual[
              Wolfram`DiagrammaticComputation`Diagram`Rewriting`a], 
             "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
             SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> $CellContext`incremented, "NeutralQ" -> False, 
             "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>]]}, 
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        GeometricTransformationBox[
         RectangleBox[
          NCache[{Rational[-1, 2], Rational[-1, 2]}, {-0.5, -0.5}]], {{{1, 
          0}, {0, 1}}, {0, 0}}]}, {{ArrowBox[{{0., 0.75}, {0., 0.5}}], 
         InsetBox[
          InterpretationBox[
           TagBox["a",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`a, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {0., 0.875}]}, {
         ArrowBox[{{0., -0.5}, {0., -0.75}}], InsetBox[
          InterpretationBox[
           TagBox["incremented",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> $CellContext`incremented, "NeutralQ" -> False, 
             "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {0., -0.875}]}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox[
          TagBox["\<\"[+1]\"\>",
           Annotation[#, "Function" -> (# + 1& )]& ],
          HoldForm], {0, 0}]}}]],
    BaseStyle->{{{}, {}}, {{}, {}}},
    FormatType->StandardForm], ",", 
   GraphicsBox[
    NamespaceBox["Diagram",
     DynamicModuleBox[{Typeset`d = HoldComplete[
       Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
        "DiagramOptions" -> {
          "PortArrows" -> {{Automatic}, {Automatic}}, 
           "PortLabels" -> {{Automatic}, {Automatic}}}, "Expression" :> 
         Annotation["[^2]", "Function" -> (#^2& )], "InputPorts" -> {
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Port`PortDual[
              Wolfram`DiagrammaticComputation`Diagram`Rewriting`b], 
             "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
             SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> $CellContext`squared, "NeutralQ" -> False, 
             "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>]]}, 
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        GeometricTransformationBox[
         RectangleBox[
          NCache[{Rational[-1, 2], Rational[-1, 2]}, {-0.5, -0.5}]], {{{1, 
          0}, {0, 1}}, {0, 0}}]}, {{ArrowBox[{{0., 0.75}, {0., 0.5}}], 
         InsetBox[
          InterpretationBox[
           TagBox["b",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {0., 0.875}]}, {
         ArrowBox[{{0., -0.5}, {0., -0.75}}], InsetBox[
          InterpretationBox[
           TagBox["squared",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> $CellContext`squared, "NeutralQ" -> False, 
             "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {0., -0.875}]}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox[
          TagBox["\<\"[^2]\"\>",
           Annotation[#, "Function" -> (#^2& )]& ],
          HoldForm], {0, 0}]}}]],
    BaseStyle->{{{}, {}}, {{}, {}}},
    FormatType->StandardForm], ",", 
   GraphicsBox[
    NamespaceBox["Diagram",
     DynamicModuleBox[{Typeset`d = HoldComplete[
       Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
        "DiagramOptions" -> {
          "PortArrows" -> {{Automatic, Automatic}, {Automatic}}, 
           "PortLabels" -> {{Automatic, Automatic}, {Automatic}}}, 
         "Expression" :> Annotation["[+]", "Function" -> Plus], "InputPorts" -> {
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Port`PortDual[$CellContext`\
incremented], "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
             SuperStar[\[FormalCapitalT]]|>], 
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Port`PortDual[$CellContext`\
squared], "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
             SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> $CellContext`result, "NeutralQ" -> False, 
             "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>]]}, 
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        GeometricTransformationBox[
         RectangleBox[
          NCache[{Rational[-1, 2], Rational[-1, 2]}, {-0.5, -0.5}]], {{{1, 
          0}, {0, 1}}, {0, 0}}]}, {{{
          ArrowBox[{{-0.2666666666666667, 0.75}, {-0.2666666666666667, 0.5}}],
           InsetBox[
           InterpretationBox[
            TagBox["incremented",
             HoldForm],
            
            Wolfram`DiagrammaticComputation`Port`Port[<|
             "Expression" :> $CellContext`incremented, "NeutralQ" -> False, 
              "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
            Tooltip->"\[FormalCapitalT]"], {-0.2666666666666667, 0.875}]}, {
          ArrowBox[{{0.2666666666666666, 0.75}, {0.2666666666666666, 0.5}}], 
          InsetBox[
           InterpretationBox[
            TagBox["squared",
             HoldForm],
            
            Wolfram`DiagrammaticComputation`Port`Port[<|
             "Expression" :> $CellContext`squared, "NeutralQ" -> False, 
              "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
            Tooltip->"\[FormalCapitalT]"], {0.2666666666666666, 0.875}]}}, {
         ArrowBox[{{0., -0.5}, {0., -0.75}}], InsetBox[
          InterpretationBox[
           TagBox["result",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> $CellContext`result, "NeutralQ" -> False, 
             "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {0., -0.875}]}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox[
          TagBox["\<\"[+]\"\>",
           Annotation[#, "Function" -> Plus]& ],
          HoldForm], {0, 0}]}}]],
    BaseStyle->{{{}, {}}, {{}, {}}},
    FormatType->StandardForm]}], "}"}]], "Output",
 CellChangeTimes->{3.964865019138534*^9, 3.966450671457185*^9, 
  3.966450844519866*^9, 3.978087015999695*^9},
 CellLabel->"Out[20]=",
 CellID->40206565,ExpressionUUID->"333238f6-47e0-4356-8dd7-5ec47cb742f7"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"diagram", "=", 
  RowBox[{"ColumnDiagram", "[", 
   RowBox[{
    RowBox[{"{", "\n", 
     RowBox[{"three", ",", "\n", "double", ",", "\n", "copy", ",", "\n", 
      RowBox[{"RowDiagram", "[", 
       RowBox[{"{", 
        RowBox[{"increment", ",", " ", "square"}], "}"}], "]"}], ",", "\n", 
      "add"}], "\n", "}"}], ",", "\n", " ", 
    RowBox[{"Alignment", "->", "Center"}]}], "\n", "]"}]}]], "Input",
 CellLabel->"In[21]:=",
 CellID->906522224,ExpressionUUID->"ab1ed20b-dd3a-4360-85b1-25c39933b5c7"],

Cell[BoxData[
 GraphicsBox[
  NamespaceBox["Diagram",
   DynamicModuleBox[{Typeset`d = HoldComplete[
     Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
      "DiagramOptions" -> {
        "PortArrows" -> {{}, {Automatic}}, "PortLabels" -> {{}, {Automatic}}, 
         "ColumnPorts" -> False, Alignment -> Center}, "Expression" :> 
       Wolfram`DiagrammaticComputation`Diagram`DiagramComposition[
         Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
          "DiagramOptions" -> {
            "PortArrows" -> {{Automatic, Automatic}, {Automatic}}, 
             "PortLabels" -> {{Automatic, Automatic}, {Automatic}}}, 
           "Expression" :> Annotation["[+]", "Function" -> Plus], 
           "InputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Port`PortDual[$CellContext`\
incremented], "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
               SuperStar[\[FormalCapitalT]]|>], 
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Port`PortDual[$CellContext`\
squared], "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
               SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> $CellContext`result, "NeutralQ" -> False, 
               "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>], 
         Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
          "DiagramOptions" -> {
            "PortArrows" -> {{Automatic, Automatic}, {Automatic, Automatic}}},
            "Expression" :> 
           Wolfram`DiagrammaticComputation`Diagram`DiagramProduct[
             
             Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
              "DiagramOptions" -> {
                "PortArrows" -> {{Automatic}, {Automatic}}, 
                 "PortLabels" -> {{Automatic}, {Automatic}}}, "Expression" :> 
               Annotation["[+1]", "Function" -> (# + 1& )], "InputPorts" -> {
                 
                 Wolfram`DiagrammaticComputation`Port`Port[<|
                  "Expression" :> 
                   Wolfram`DiagrammaticComputation`Port`PortDual[
                    Wolfram`DiagrammaticComputation`Diagram`Rewriting`a], 
                   "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
                   SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
                 
                 Wolfram`DiagrammaticComputation`Port`Port[<|
                  "Expression" :> $CellContext`incremented, "NeutralQ" -> 
                   False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>], 
             
             Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
              "DiagramOptions" -> {
                "PortArrows" -> {{Automatic}, {Automatic}}, 
                 "PortLabels" -> {{Automatic}, {Automatic}}}, "Expression" :> 
               Annotation["[^2]", "Function" -> (#^2& )], "InputPorts" -> {
                 
                 Wolfram`DiagrammaticComputation`Port`Port[<|
                  "Expression" :> 
                   Wolfram`DiagrammaticComputation`Port`PortDual[
                    Wolfram`DiagrammaticComputation`Diagram`Rewriting`b], 
                   "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
                   SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
                 
                 Wolfram`DiagrammaticComputation`Port`Port[<|
                  "Expression" :> $CellContext`squared, "NeutralQ" -> False, 
                   "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>]], 
           "InputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Port`PortDual[
                Wolfram`DiagrammaticComputation`Diagram`Rewriting`a], 
               "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
               SuperStar[\[FormalCapitalT]]|>], 
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Port`PortDual[
                Wolfram`DiagrammaticComputation`Diagram`Rewriting`b], 
               "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
               SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> $CellContext`incremented, "NeutralQ" -> False, 
               "Tags" -> {}, "Type" -> \[FormalCapitalT]|>], 
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> $CellContext`squared, "NeutralQ" -> False, 
               "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>], 
         Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
          "DiagramOptions" -> {
            "PortArrows" -> {{Automatic}, {Automatic, Automatic}}, 
             "PortLabels" -> {{Automatic}, {Automatic, Automatic}}, "Shape" -> 
             "Point"}, "Expression" :> 
           Annotation["", "Function" -> (Apply[Sequence, {#, #}]& )], 
           "InputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Port`PortDual[$CellContext`\
doubled], "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
               SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Diagram`Rewriting`a, 
               "NeutralQ" -> False, "Tags" -> {}, 
               "Type" -> \[FormalCapitalT]|>], 
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, 
               "NeutralQ" -> False, "Tags" -> {}, 
               "Type" -> \[FormalCapitalT]|>]}|>], 
         Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
          "DiagramOptions" -> {
            "PortArrows" -> {{Automatic}, {Automatic}}, 
             "PortLabels" -> {{Automatic}, {Automatic}}}, "Expression" :> 
           Annotation["[2\[Times]]", "Function" -> (2 #& )], 
           "InputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Port`PortDual[$CellContext`\
input], "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
               SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> $CellContext`doubled, "NeutralQ" -> False, 
               "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>], 
         Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
          "DiagramOptions" -> {
            "PortArrows" -> {{}, {Automatic}}, 
             "PortLabels" -> {{}, {Automatic}}}, "Expression" :> 
           Annotation["3", "Function" -> (3& )], "InputPorts" -> {}, 
           "OutputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> $CellContext`input, "NeutralQ" -> False, 
               "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>]], 
       "InputPorts" -> {}, "OutputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> $CellContext`result, "NeutralQ" -> False, 
           "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>]]}, {{
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        GeometricTransformationBox[
         RectangleBox[{0.125, 0.5}, {3.875, 1.5}], {{{1., 0.}, {0., 1.}}, {0.,
           0.}}]}, {{{}, {}}, {ArrowBox[{{2., 0.5}, {2., 0.25}}], InsetBox[
          InterpretationBox[
           TagBox["result",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> $CellContext`result, "NeutralQ" -> False, 
             "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {2., 0.125}]}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox[
          TagBox["\<\"[+]\"\>",
           Annotation[#, "Function" -> Plus]& ],
          HoldForm], {2., 1.}]}}, 
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        GeometricTransformationBox[
         RectangleBox[{0.5, 2.5}], {{{1., 0.}, {0., 1.}}, {0., 
          0.}}]}, {{}, {}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox[
          TagBox["\<\"[+1]\"\>",
           Annotation[#, "Function" -> (# + 1& )]& ],
          HoldForm], {1., 3.}]}}, 
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        GeometricTransformationBox[
         RectangleBox[{2.5, 2.5}], {{{1., 0.}, {0., 1.}}, {0., 
          0.}}]}, {{}, {}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox[
          TagBox["\<\"[^2]\"\>",
           Annotation[#, "Function" -> (#^2& )]& ],
          HoldForm], {3., 3.}]}}, 
      {Arrowheads[{{Small, 0.7}}], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        {PointSize[Medium], PointBox[{2., 5.}]}}, {{}, {{}, {}}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox[
          TagBox["\<\"\"\>",
           Annotation[#, "Function" -> (Apply[Sequence, {#, #}]& )]& ],
          HoldForm], {0, 0}]}}, 
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        GeometricTransformationBox[
         RectangleBox[{1.5, 6.5}], {{{1., 0.}, {0., 1.}}, {0., 
          0.}}]}, {{}, {}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox[
          TagBox["\<\"[2\[Times]]\"\>",
           Annotation[#, "Function" -> (2 #& )]& ],
          HoldForm], {2., 7.}]}}, 
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        GeometricTransformationBox[
         RectangleBox[{1.5, 8.5}], {{{1., 0.}, {0., 1.}}, {0., 
          0.}}]}, {{}, {}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox[
          TagBox["\<\"3\"\>",
           Annotation[#, "Function" -> (3& )]& ],
          HoldForm], {2., 9.}]}}}, {
      {Arrowheads[{{Small, 0.5}}], {}, 
       ArrowBox[
        BSplineCurveBox[{{2., 8.5}, {2., 8.25}, {2., 7.75}, {2., 7.5}}]], 
       InsetBox[
        TemplateBox[{"input"},
         "ClickToCopy"], {1.9, 8.}]}, 
      {Arrowheads[{{Small, 0.5}}], {}, 
       ArrowBox[BSplineCurveBox[{{2., 6.5}, {2., 6.25}, {2., 6.}, {2., 5.}}]],
        InsetBox[
        TemplateBox[{"doubled"},
         "ClickToCopy"], {1.9, 5.75}]}, 
      {Arrowheads[{{Small, 0.5}}], {}, 
       ArrowBox[
        BSplineCurveBox[{{2., 5.}, {1.0921587009967966`, 4.580686065311233}, {
         1., 3.75}, {1., 3.5}}]], InsetBox[
        TemplateBox[{"a"},
         "ClickToCopy"], {1.4167949705662157, 4.305470019622523}]}, 
      {Arrowheads[{{Small, 0.5}}], {}, 
       ArrowBox[
        BSplineCurveBox[{{2., 5.}, {2.9078412990032034`, 4.580686065311233}, {
         3., 3.75}, {3., 3.5}}]], InsetBox[
        TemplateBox[{"b"},
         "ClickToCopy"], {2.4167949705662157, 4.194529980377477}]}, 
      {Arrowheads[{{Small, 0.5}}], {}, 
       ArrowBox[
        BSplineCurveBox[{{1., 2.5}, {1., 2.25}, {0.9999999999999998, 1.75}, {
         0.9999999999999998, 1.5}}]], InsetBox[
        TemplateBox[{"incremented"},
         "ClickToCopy"], {0.8999999999999999, 2.}]}, 
      {Arrowheads[{{Small, 0.5}}], {}, 
       ArrowBox[
        BSplineCurveBox[{{3., 2.5}, {3., 2.25}, {3., 1.75}, {3., 1.5}}]], 
       InsetBox[
        TemplateBox[{"squared"},
         "ClickToCopy"], {2.9, 2.}]}}, {}, {}, 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Thickness[Tiny]}], FaceForm[None]}}]],
  BaseStyle->{{{}, {}}, {{}, {}}},
  FormatType->StandardForm,
  ImageSize->{166.38018482840158`, 357.2693006208534}]], "Output",
 CellChangeTimes->{3.9648650192607803`*^9, 3.966450675585299*^9, 
  3.966450846338791*^9, 3.978087018078569*^9},
 CellLabel->"Out[21]=",
 CellID->1076277027,ExpressionUUID->"fa775d74-f11f-4940-a89c-535b9c0ab947"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
Input 3 doubles to 6, one copy is incremented to 7 and another squared to 36, \
which then adds to 43:\
\>", "Text",
 CellID->531682360,ExpressionUUID->"905f441a-8bd5-4f7a-9f20-b680bd47027c"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"diagramFunction", "=", 
  RowBox[{"DiagramFunction", "[", "diagram", "]"}]}]], "Input",
 CellLabel->"In[22]:=",
 CellID->305969353,ExpressionUUID->"79f4685c-d3d5-44a2-87f1-5cf442a90303"],

Cell[BoxData[
 RowBox[{"Plus", "@*", 
  RowBox[{"(", 
   RowBox[{
    RowBox[{"Sequence", "@@", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{
        RowBox[{"(", 
         RowBox[{
          RowBox[{"#1", "+", "1"}], "&"}], ")"}], "[", "#1", "]"}], ",", 
       RowBox[{
        RowBox[{"(", 
         RowBox[{
          SuperscriptBox["#1", "2"], "&"}], ")"}], "[", "#2", "]"}]}], 
      "}"}]}], "&"}], ")"}], "@*", 
  RowBox[{"(", 
   RowBox[{
    RowBox[{"Sequence", "@@", 
     RowBox[{"{", 
      RowBox[{"#1", ",", "#1"}], "}"}]}], "&"}], ")"}], "@*", 
  RowBox[{"(", 
   RowBox[{
    RowBox[{"2", " ", "#1"}], "&"}], ")"}], "@*", 
  RowBox[{"(", 
   RowBox[{"3", "&"}], ")"}]}]], "Output",
 CellChangeTimes->{3.964865019280436*^9, 3.978087025293969*^9},
 CellLabel->"Out[22]=",
 CellID->1626606068,ExpressionUUID->"15e3a327-0a92-4121-aa63-a17dcb5c08b6"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"diagramFunction", "[", "]"}]], "Input",
 CellLabel->"In[23]:=",
 CellID->2004065340,ExpressionUUID->"990c455f-161c-48fc-9cf4-e6bdb3981ea8"],

Cell[BoxData["43"], "Output",
 CellChangeTimes->{3.964865019289878*^9, 3.978087026483099*^9},
 CellLabel->"Out[23]=",
 CellID->442877853,ExpressionUUID->"59196b93-5801-432d-936a-9fc002209de2"]
}, Open  ]]
}, Open  ]],

Cell["\<\
By default it is assumed that functions take a sequence and output a \
sequence, but both input and output can also be either a List or an \
Association.\
\>", "Text",
 CellID->253365326,ExpressionUUID->"8d088510-9d31-40cf-8e34-a226300e9470"],

Cell[CellGroupData[{

Cell["\<\
The List output would be Indexed and Association would incorporate port \
expressions as keys:\
\>", "Text",
 CellID->1998445728,ExpressionUUID->"bc57ac2d-3c6e-40ed-8d9a-10cf7160defa"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"doubleIncrementList", "=", 
  RowBox[{"Diagram", "[", 
   RowBox[{
    RowBox[{"Annotation", "[", 
     RowBox[{"\"\<[2\[Times]]\>\"", ",", 
      RowBox[{"\"\<Function\>\"", "->", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{"2", "#"}], ",", 
           RowBox[{"#", "+", "1"}]}], "}"}], "&"}], ")"}]}], ",", 
      RowBox[{"\"\<Type\>\"", "->", 
       RowBox[{"\"\<Sequence\>\"", "->", "\"\<List\>\""}]}]}], "]"}], ",", 
    " ", "x", ",", " ", 
    RowBox[{"{", 
     RowBox[{"y", ",", "z"}], "}"}]}], "]"}]}]], "Input",
 CellLabel->"In[24]:=",
 CellID->1233111416,ExpressionUUID->"2b383602-4d22-4a70-9240-ef0424d38286"],

Cell[BoxData[
 GraphicsBox[
  NamespaceBox["Diagram",
   DynamicModuleBox[{Typeset`d = HoldComplete[
     Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
      "DiagramOptions" -> {
        "PortArrows" -> {{Automatic}, {Automatic, Automatic}}, 
         "PortLabels" -> {{Automatic}, {Automatic, Automatic}}}, "Expression" :> 
       Annotation[
        "[2\[Times]]", "Function" -> ({2 #, # + 1}& ), 
         "Type" -> ("Sequence" -> "List")], "InputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> 
           Wolfram`DiagrammaticComputation`Port`PortDual[
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`x], "NeutralQ" -> 
           False, "Tags" -> {}, "Type" -> SuperStar[\[FormalCapitalT]]|>]}, 
       "OutputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> Wolfram`DiagrammaticComputation`Diagram`Rewriting`y,
            "NeutralQ" -> False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>], 
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> $CellContext`z, "NeutralQ" -> False, "Tags" -> {}, 
           "Type" -> \[FormalCapitalT]|>]}|>]]}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      GeometricTransformationBox[
       RectangleBox[
        NCache[{Rational[-1, 2], Rational[-1, 2]}, {-0.5, -0.5}]], {{{1, 0}, {
        0, 1}}, {0, 0}}]}, {{ArrowBox[{{0., 0.75}, {0., 0.5}}], InsetBox[
        InterpretationBox[
         TagBox["x",
          HoldForm],
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> Wolfram`DiagrammaticComputation`Diagram`Rewriting`x,
            "NeutralQ" -> False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
         
         Tooltip->"\[FormalCapitalT]"], {0., 0.875}]}, {{
        ArrowBox[{{-0.2666666666666667, -0.5}, {-0.2666666666666667, -0.75}}],
         InsetBox[
         InterpretationBox[
          TagBox["y",
           HoldForm],
          
          Wolfram`DiagrammaticComputation`Port`Port[<|
           "Expression" :> 
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`y, "NeutralQ" -> 
            False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
          Tooltip->"\[FormalCapitalT]"], {-0.2666666666666667, -0.875}]}, {
        ArrowBox[{{0.2666666666666666, -0.5}, {0.2666666666666666, -0.75}}], 
        InsetBox[
         InterpretationBox[
          TagBox["z",
           HoldForm],
          
          Wolfram`DiagrammaticComputation`Port`Port[<|
           "Expression" :> $CellContext`z, "NeutralQ" -> False, "Tags" -> {}, 
            "Type" -> \[FormalCapitalT]|>],
          Tooltip->"\[FormalCapitalT]"], {0.2666666666666666, -0.875}]}}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox[
       TagBox[
        TagBox["\<\"[2\[Times]]\"\>",
         Annotation[#, "Function" -> ({2 #, # + 1}& ), 
          "Type" -> ("Sequence" -> "List")]& ],
        HoldForm], {0, 0}]}}]],
  BaseStyle->{{{}, {}}, {{}, {}}},
  FormatType->StandardForm,
  ImageSize->Tiny]], "Output",
 CellChangeTimes->{3.9648650192978077`*^9, 3.966450808338937*^9, 
  3.97808702831072*^9},
 CellLabel->"Out[24]=",
 CellID->1737549555,ExpressionUUID->"ee9ebf69-7042-4d81-9d53-604bdbca6207"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"listFunction", "=", 
  RowBox[{"DiagramFunction", "[", 
   RowBox[{"doubleIncrementList", ",", "\n", 
    RowBox[{"\"\<Input\>\"", "->", "\"\<List\>\""}], ",", 
    RowBox[{"\"\<Output\>\"", "->", "\"\<List\>\""}]}], "]"}]}]], "Input",
 CellLabel->"In[25]:=",
 CellID->418174628,ExpressionUUID->"8caa7ccd-feb0-4b81-bd30-f0fb92aa89d7"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"{", 
    RowBox[{
     RowBox[{"2", " ", "#1"}], ",", 
     RowBox[{"#1", "+", "1"}]}], "}"}], "&"}], "@*", 
  RowBox[{"(", 
   RowBox[{
    RowBox[{"Sequence", "@@", 
     RowBox[{"{", 
      TemplateBox[{"#1", "1"},
       "IndexedDefault"], "}"}]}], "&"}], ")"}]}]], "Output",
 CellChangeTimes->{3.9648650193144407`*^9, 3.978087030636174*^9},
 CellLabel->"Out[25]=",
 CellID->720720438,ExpressionUUID->"645fb278-a911-48e8-85cf-229cb94b8f7d"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"listFunction", "[", 
  RowBox[{"{", "3", "}"}], "]"}]], "Input",
 CellLabel->"In[26]:=",
 CellID->1341557417,ExpressionUUID->"285798ff-0106-4d3b-a7d7-551c4af24ab5"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"6", ",", "4"}], "}"}]], "Output",
 CellChangeTimes->{3.964865019318873*^9, 3.9780870306659403`*^9},
 CellLabel->"Out[26]=",
 CellID->1340632386,ExpressionUUID->"9779b357-653a-4f86-ac88-94f4c6c2f881"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"assocFunction", "=", 
  RowBox[{"DiagramFunction", "[", 
   RowBox[{"doubleIncrementList", ",", "\n", 
    RowBox[{"\"\<Input\>\"", "->", "\"\<Association\>\""}], ",", 
    RowBox[{"\"\<Output\>\"", "->", "\"\<Association\>\""}]}], "\n", 
   "]"}]}]], "Input",
 CellLabel->"In[27]:=",
 CellID->642611568,ExpressionUUID->"64edc779-e630-45b6-979e-a5f5909f5959"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"Association", "[", 
    RowBox[{
     RowBox[{"y", "\[Rule]", 
      TemplateBox[{"#1", "1"},
       "IndexedDefault"]}], ",", 
     RowBox[{"z", "\[Rule]", 
      TemplateBox[{"#1", "2"},
       "IndexedDefault"]}]}], "]"}], "&"}], "@*", 
  RowBox[{"(", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      RowBox[{"2", " ", "#1"}], ",", 
      RowBox[{"#1", "+", "1"}]}], "}"}], "&"}], ")"}], "@*", 
  RowBox[{"(", 
   RowBox[{
    RowBox[{"Sequence", "@@", 
     RowBox[{"{", 
      RowBox[{"Slot", "[", 
       RowBox[{"Key", "[", "x", "]"}], "]"}], "}"}]}], "&"}], 
   ")"}]}]], "Output",
 CellChangeTimes->{3.964865019329672*^9, 3.978087031500379*^9},
 CellLabel->"Out[27]=",
 CellID->1448488216,ExpressionUUID->"1e575cd1-31cb-40a9-a78e-eba0a05e6187"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"assocFunction", "[", 
  RowBox[{"<|", 
   RowBox[{"x", "->", "3"}], "|>"}], "]"}]], "Input",
 CellLabel->"In[28]:=",
 CellID->622623944,ExpressionUUID->"e838ab4f-5b2b-445f-ac80-d7f6880b4f1e"],

Cell[BoxData[
 RowBox[{"\[LeftAssociation]", 
  RowBox[{
   RowBox[{"y", "\[Rule]", "6"}], ",", 
   RowBox[{"z", "\[Rule]", "4"}]}], "\[RightAssociation]"}]], "Output",
 CellChangeTimes->{3.964865019333296*^9, 3.978087033322935*^9},
 CellLabel->"Out[28]=",
 CellID->563502825,ExpressionUUID->"79ff3855-7e64-46d7-8b3a-ad61d6696a51"]
}, Open  ]]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Diagram networks", "Section",
 CellID->942175384,ExpressionUUID->"5afed3f3-8381-4651-8357-0685911a6115"],

Cell["\<\
Rather than arranging diagrams in a grid-like fashion, there is a more \
flexible way to wire arbitrary ports using DiagramNetwork, which connects all \
equivalent ports independent of their position within or across all diagrams.\
\
\>", "Text",
 CellID->1744749557,ExpressionUUID->"113237d2-171a-41ac-8140-b6176560e237"],

Cell[CellGroupData[{

Cell["\<\
For example it is possible to create a loop by wiring input and output \
together:\
\>", "Text",
 CellID->116604714,ExpressionUUID->"76969c9a-b808-4bb4-8c08-68169397cc4a"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"DiagramNetwork", "[", 
  RowBox[{"Diagram", "[", 
   RowBox[{"A", ",", "a", ",", "a"}], "]"}], "]"}]], "Input",
 CellLabel->"In[29]:=",
 CellID->1270342134,ExpressionUUID->"7c463142-24e2-4333-9ea9-e4c9ccbb3b6f"],

Cell[BoxData[
 GraphicsBox[
  NamespaceBox["Diagram",
   DynamicModuleBox[{Typeset`d = HoldComplete[
     Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
      "DiagramOptions" -> {
        "PortArrows" -> {{}, {}}, "PortLabels" -> {{}, {}}}, "Expression" :> 
       Wolfram`DiagrammaticComputation`Diagram`DiagramNetwork[
         Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
          "DiagramOptions" -> {
            "PortArrows" -> {{Automatic}, {Automatic}}, 
             "PortLabels" -> {{Automatic}, {Automatic}}}, 
           "Expression" :> $CellContext`A, "InputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Port`PortDual[
                Wolfram`DiagrammaticComputation`Diagram`Rewriting`a], 
               "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
               SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Diagram`Rewriting`a, 
               "NeutralQ" -> False, "Tags" -> {}, 
               "Type" -> \[FormalCapitalT]|>]}|>]], "InputPorts" -> {}, 
       "OutputPorts" -> {}|>]]}, 
    NamespaceBox[{
      {LightDarkSwitched[
        GrayLevel[0], 
        GrayLevel[1]], Opacity[0.7], CapForm["Round"], Arrowheads[Medium], 
       StyleBox[{
         {Arrowheads[{{Small, 0.5}}], 
          ArrowBox[
           BSplineCurveBox[{{1.906152575412024, 0.06905804831100387}, {
            1.906174562662929, -0.49344195125927237`}, {3.0311379163853065`, 
            0.4441020225263313}, {1.9061012718265793`, 1.381558047308315}, {
            1.9061232590774841`, 0.8190580477380389}}]]}, InsetBox[
          StyleBox[
           TemplateBox[{
             InterpretationBox[
              FormBox[
               TagBox["a", HoldForm], TraditionalForm], 
              
              Wolfram`DiagrammaticComputation`Port`Port[<|
               "Expression" :> 
                Wolfram`DiagrammaticComputation`Diagram`Rewriting`a, 
                "NeutralQ" -> False, "Tags" -> {}, 
                "Type" -> \[FormalCapitalT]|>], Tooltip -> 
              FormBox["\[FormalCapitalT]", TraditionalForm]], "\"X\""},
            "ClickToCopy2"],
           StripOnInput->False,
           LineColor->LightDarkSwitched[
             GrayLevel[0], 
             GrayLevel[1]],
           FrontFaceColor->LightDarkSwitched[
             GrayLevel[0], 
             GrayLevel[1]],
           BackFaceColor->LightDarkSwitched[
             GrayLevel[0], 
             GrayLevel[1]],
           GraphicsColor->LightDarkSwitched[
             GrayLevel[0], 
             GrayLevel[1]],
           FontColor->LightDarkSwitched[
             GrayLevel[0], 
             GrayLevel[1]]], {2.6092629167075994, 0.4440855320881526}]},
        FormatType->StandardForm]}, 
      {RGBColor[0.500000001565661, 0.699951173440661, 0.999877931253161], 
       EdgeForm[{GrayLevel[0.0000999867918018385], Opacity[0.7]}], 
       StyleBox[
        TagBox[
         {LightDarkSwitched[
           GrayLevel[0], 
           GrayLevel[1]], GeometricTransformationBox[
           {Arrowheads[Small], 
            {EdgeForm[{LightDarkSwitched[
              GrayLevel[0], 
              GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
              RGBColor[
              0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
              GrayLevel[0.62]]], 
             GeometricTransformationBox[
              RectangleBox[
               NCache[{Rational[-1, 2], Rational[-1, 2]}, {-0.5, -0.5}]], {{{
               1, 0}, {0, 1}}, {0, 0}}]}, {{}, {}}, 
            {LightDarkSwitched[
              GrayLevel[0], 
              GrayLevel[1]], InsetBox[
              TagBox["A",
               HoldForm], {0, 0}]}}, {{{
            0.7499999994270351, -0.00002931633453990158}, {
            0.00002931633453990158, 0.7499999994270351}}, {
            1.9061379172447541`, 0.4440580480245214}}]},
         "DynamicName",
         BoxID -> "VertexID$1"],
        FormatType->StandardForm]}}]]],
  BaseStyle->{{{}, {}}, {{}, {}}},
  FormatType->TraditionalForm,
  FrameTicks->None,
  PlotRangePadding->0.01]], "Output",
 CellChangeTimes->{3.964865019366127*^9, 3.966450805463319*^9, 
  3.97808703482556*^9},
 CellLabel->"Out[29]=",
 CellID->54731535,ExpressionUUID->"2a75140a-50ab-4cce-b490-edd50fa417a9"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Or a loop that includes more that one diagram:", "Text",
 CellID->1055337248,ExpressionUUID->"50756883-0ae8-4b95-85af-7912c5254124"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"DiagramNetwork", "[", 
  RowBox[{
   RowBox[{"Diagram", "[", 
    RowBox[{"A", ",", "a", ",", "b"}], "]"}], ",", 
   RowBox[{"Diagram", "[", 
    RowBox[{"B", ",", "b", ",", "c"}], "]"}], ",", 
   RowBox[{"Diagram", "[", 
    RowBox[{"C", ",", "c", ",", "a"}], "]"}]}], "]"}]], "Input",
 CellLabel->"In[30]:=",
 CellID->985686563,ExpressionUUID->"fc775afe-2c22-4b14-a027-d9424b84e7d5"],

Cell[BoxData[
 GraphicsBox[
  NamespaceBox["Diagram",
   DynamicModuleBox[{Typeset`d = HoldComplete[
     Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
      "DiagramOptions" -> {
        "PortArrows" -> {{}, {}}, "PortLabels" -> {{}, {}}}, "Expression" :> 
       Wolfram`DiagrammaticComputation`Diagram`DiagramNetwork[
         Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
          "DiagramOptions" -> {
            "PortArrows" -> {{Automatic}, {Automatic}}, 
             "PortLabels" -> {{Automatic}, {Automatic}}}, 
           "Expression" :> $CellContext`A, "InputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Port`PortDual[
                Wolfram`DiagrammaticComputation`Diagram`Rewriting`a], 
               "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
               SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, 
               "NeutralQ" -> False, "Tags" -> {}, 
               "Type" -> \[FormalCapitalT]|>]}|>], 
         Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
          "DiagramOptions" -> {
            "PortArrows" -> {{Automatic}, {Automatic}}, 
             "PortLabels" -> {{Automatic}, {Automatic}}}, 
           "Expression" :> $CellContext`B, "InputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Port`PortDual[
                Wolfram`DiagrammaticComputation`Diagram`Rewriting`b], 
               "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
               SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Diagram`Rewriting`c, 
               "NeutralQ" -> False, "Tags" -> {}, 
               "Type" -> \[FormalCapitalT]|>]}|>], 
         Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
          "DiagramOptions" -> {
            "PortArrows" -> {{Automatic}, {Automatic}}, 
             "PortLabels" -> {{Automatic}, {Automatic}}}, "Expression" :> C, 
           "InputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Port`PortDual[
                Wolfram`DiagrammaticComputation`Diagram`Rewriting`c], 
               "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
               SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Diagram`Rewriting`a, 
               "NeutralQ" -> False, "Tags" -> {}, 
               "Type" -> \[FormalCapitalT]|>]}|>]], "InputPorts" -> {}, 
       "OutputPorts" -> {}|>]]}, 
    NamespaceBox[{
      {LightDarkSwitched[
        GrayLevel[0], 
        GrayLevel[1]], Opacity[0.7], CapForm["Round"], Arrowheads[Medium], 
       StyleBox[{{
          {Arrowheads[{{Small, 0.5}}], 
           ArrowBox[
            BSplineCurveBox[{{4.064401987997719, 0.28728856506273925`}, {
             4.432594450969529, 0.7125420896933434}, {3.467908381801095, 
             3.5015861363901744`}, {2.9156050484154834`, 
             3.6082035736654245`}}]]}, InsetBox[
           StyleBox[
            TemplateBox[{
              InterpretationBox[
               FormBox[
                TagBox["b", HoldForm], TraditionalForm], 
               
               Wolfram`DiagrammaticComputation`Port`Port[<|
                "Expression" :> 
                 Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, 
                 "NeutralQ" -> False, "Tags" -> {}, 
                 "Type" -> \[FormalCapitalT]|>], Tooltip -> 
               FormBox["\[FormalCapitalT]", TraditionalForm]], "\"X\""},
             "ClickToCopy2"],
            StripOnInput->False,
            LineColor->LightDarkSwitched[
              GrayLevel[0], 
              GrayLevel[1]],
            FrontFaceColor->LightDarkSwitched[
              GrayLevel[0], 
              GrayLevel[1]],
            BackFaceColor->LightDarkSwitched[
              GrayLevel[0], 
              GrayLevel[1]],
            GraphicsColor->LightDarkSwitched[
              GrayLevel[0], 
              GrayLevel[1]],
            FontColor->LightDarkSwitched[
              GrayLevel[0], 
              GrayLevel[1]]], {3.987070662682494, 2.1495894655048193}]}, {
          {Arrowheads[{{Small, 0.5}}], 
           ArrowBox[
            BSplineCurveBox[{{2.179200603901334, 3.750360156699091}, {
             1.6268972705157225`, 3.8569775939743414`}, {-0.3068745384899647, 
             1.6261086714255704`}, {-0.12274981539598587`, 
             1.0945973015137258`}}]]}, InsetBox[
           StyleBox[
            TemplateBox[{
              InterpretationBox[
               FormBox[
                TagBox["c", HoldForm], TraditionalForm], 
               
               Wolfram`DiagrammaticComputation`Port`Port[<|
                "Expression" :> 
                 Wolfram`DiagrammaticComputation`Diagram`Rewriting`c, 
                 "NeutralQ" -> False, "Tags" -> {}, 
                 "Type" -> \[FormalCapitalT]|>], Tooltip -> 
               FormBox["\[FormalCapitalT]", TraditionalForm]], "\"X\""},
             "ClickToCopy2"],
            StripOnInput->False,
            LineColor->LightDarkSwitched[
              GrayLevel[0], 
              GrayLevel[1]],
            FrontFaceColor->LightDarkSwitched[
              GrayLevel[0], 
              GrayLevel[1]],
            BackFaceColor->LightDarkSwitched[
              GrayLevel[0], 
              GrayLevel[1]],
            GraphicsColor->LightDarkSwitched[
              GrayLevel[0], 
              GrayLevel[1]],
            FontColor->LightDarkSwitched[
              GrayLevel[0], 
              GrayLevel[1]]], {0.6047810326743177, 2.752204876427481}]}, {
          {Arrowheads[{{Small, 0.5}}], 
           ArrowBox[
            BSplineCurveBox[{{0.12274981539598587`, 0.38591547496459966`}, {
             0.3068745384899647, -0.1455958949472449}, {
             3.205286241063494, -0.7049696590753372}, {
             3.573478704035305, -0.279716134444733}}]]}, InsetBox[
           StyleBox[
            TemplateBox[{
              InterpretationBox[
               FormBox[
                TagBox["a", HoldForm], TraditionalForm], 
               
               Wolfram`DiagrammaticComputation`Port`Port[<|
                "Expression" :> 
                 Wolfram`DiagrammaticComputation`Diagram`Rewriting`a, 
                 "NeutralQ" -> False, "Tags" -> {}, 
                 "Type" -> \[FormalCapitalT]|>], Tooltip -> 
               FormBox["\[FormalCapitalT]", TraditionalForm]], "\"X\""},
             "ClickToCopy2"],
            StripOnInput->False,
            LineColor->LightDarkSwitched[
              GrayLevel[0], 
              GrayLevel[1]],
            FrontFaceColor->LightDarkSwitched[
              GrayLevel[0], 
              GrayLevel[1]],
            BackFaceColor->LightDarkSwitched[
              GrayLevel[0], 
              GrayLevel[1]],
            GraphicsColor->LightDarkSwitched[
              GrayLevel[0], 
              GrayLevel[1]],
            FontColor->LightDarkSwitched[
              GrayLevel[0], 
              GrayLevel[1]]], {1.7744928620861273, -0.47843391400247554}]}},
        FormatType->StandardForm]}, 
      {RGBColor[0.500000001565661, 0.699951173440661, 0.999877931253161], 
       EdgeForm[{GrayLevel[0.0000999867918018385], Opacity[0.7]}], 
       StyleBox[{
         TagBox[
          {LightDarkSwitched[
            GrayLevel[0], 
            GrayLevel[1]], GeometricTransformationBox[
            {Arrowheads[Small], 
             {EdgeForm[{LightDarkSwitched[
               GrayLevel[0], 
               GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
               RGBColor[
               0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
               GrayLevel[0.62]]], 
              GeometricTransformationBox[
               RectangleBox[
                NCache[{Rational[-1, 2], Rational[-1, 2]}, {-0.5, -0.5}]], {{{
                1, 0}, {0, 1}}, {0, 0}}]}, {{}, {}}, 
             {LightDarkSwitched[
               GrayLevel[0], 
               GrayLevel[1]], InsetBox[
               TagBox["A",
                
                HoldForm], {0, 0}]}}, {{{-0.5670046995074722, \
-0.49092328396241414`}, {0.49092328396241414`, -0.5670046995074722}}, {
             3.818940346016512, 0.003786215309003138}}]},
          "DynamicName",
          BoxID -> "VertexID$1"], 
         TagBox[
          {LightDarkSwitched[
            GrayLevel[0], 
            GrayLevel[1]], GeometricTransformationBox[
            {Arrowheads[Small], 
             {EdgeForm[{LightDarkSwitched[
               GrayLevel[0], 
               GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
               RGBColor[
               0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
               GrayLevel[0.62]]], 
              GeometricTransformationBox[
               RectangleBox[
                NCache[{Rational[-1, 2], Rational[-1, 2]}, {-0.5, -0.5}]], {{{
                1, 0}, {0, 1}}, {0, 0}}]}, {{}, {}}, 
             {LightDarkSwitched[
               GrayLevel[0], 
               GrayLevel[1]], InsetBox[
               TagBox["B",
                HoldForm], {0, 0}]}}, {{{-0.1421565830336668, 
             0.736404444514149}, {-0.736404444514149, -0.1421565830336668}}, {
             2.5474028261584087`, 3.679281865182258}}]},
          "DynamicName",
          BoxID -> "VertexID$2"], 
         TagBox[
          {LightDarkSwitched[
            GrayLevel[0], 
            GrayLevel[1]], GeometricTransformationBox[
            {Arrowheads[Small], 
             {EdgeForm[{LightDarkSwitched[
               GrayLevel[0], 
               GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
               RGBColor[
               0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
               GrayLevel[0.62]]], 
              GeometricTransformationBox[
               RectangleBox[
                NCache[{Rational[-1, 2], Rational[-1, 2]}, {-0.5, -0.5}]], {{{
                1, 0}, {0, 1}}, {0, 0}}]}, {{}, {}}, 
             {LightDarkSwitched[
               GrayLevel[0], 
               GrayLevel[1]], InsetBox[
               TagBox["C",
                HoldForm], {0, 0}]}}, {{{
             0.7086818265491261, -0.24549963079197173`}, {
             0.24549963079197173`, 0.7086818265491261}}, {0., 
             0.7402563882391627}}]},
          "DynamicName",
          BoxID -> "VertexID$3"]},
        FormatType->StandardForm]}}]]],
  BaseStyle->{{{}, {}}, {{}, {}}},
  FormatType->TraditionalForm,
  FrameTicks->None]], "Output",
 CellChangeTimes->{3.9648650194249487`*^9, 3.966450803553404*^9, 
  3.978087036908907*^9},
 CellLabel->"Out[30]=",
 CellID->24525860,ExpressionUUID->"67a7ac3b-4361-4eb4-99f5-7a7e71ee185a"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
It is always possible to arrange such networks into a grid by introducing \
special \"u-turn\" diagrams, conventionally named caps and cups:\
\>", "Text",
 CellID->643084777,ExpressionUUID->"68515c82-2873-4781-9429-d1715d6a9965"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"DiagramArrange", "[", 
   RowBox[{"DiagramNetwork", "[", 
    RowBox[{
     RowBox[{"Diagram", "[", 
      RowBox[{"A", ",", "a", ",", "b"}], "]"}], ",", 
     RowBox[{"Diagram", "[", 
      RowBox[{"B", ",", "b", ",", "c"}], "]"}], ",", 
     RowBox[{"Diagram", "[", 
      RowBox[{"C", ",", "c", ",", "a"}], "]"}]}], "]"}], "]"}], "[", 
  RowBox[{"\"\<Grid\>\"", ",", 
   RowBox[{"\"\<Outline\>\"", "->", "True"}]}], "]"}]], "Input",
 CellChangeTimes->{{3.9664506892177143`*^9, 3.966450714170434*^9}},
 CellLabel->"In[31]:=",
 CellID->40651688,ExpressionUUID->"90e5b2a9-cea4-4ea3-8116-dd7d22a71ff4"],

Cell[BoxData[
 GraphicsBox[{{
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      {Haloing[], 
       BSplineCurveBox[{{0.9999999999999998, 1.5}, {0.9999999999999998, 
        1.25}, {3., 1.25}, {3., 1.5}}]}, 
      {EdgeForm[{LightDarkSwitched[
        GrayLevel[0], 
        GrayLevel[1]], Dashing[{Small, Small}]}], FaceForm[None], 
       GeometricTransformationBox[
        RectangleBox[{0.125, 0.5}, {3.875, 1.5}], {{{1., 0.}, {0., 1.}}, {0., 
         0.}}]}}, {{{}, {}}, {}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox["\<\"\\t\\t\\t\"\>", {2., 1.}]}}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      GeometricTransformationBox[
       RectangleBox[{0.5, 2.5}], {{{1., 0.}, {0., 1.}}, {0., 0.}}], 
      {EdgeForm[{LightDarkSwitched[
        GrayLevel[0], 
        GrayLevel[1]], Dashing[{Small, Small}]}], FaceForm[None], 
       GeometricTransformationBox[
        RectangleBox[{0.5, 2.5}], {{{1., 0.}, {0., 1.}}, {0., 
         0.}}]}}, {{}, {}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox[
       TagBox["A",
        HoldForm], {1., 3.}]}}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      {Haloing[], 
       BSplineCurveBox[{{3., 2.5}, {3., 2.75}, {3., 3.25}, {3., 3.5}}]}, 
      {EdgeForm[{LightDarkSwitched[
        GrayLevel[0], 
        GrayLevel[1]], Dashing[{Small, Small}]}], FaceForm[None], 
       GeometricTransformationBox[
        RectangleBox[{2.5, 2.5}], {{{1., 0.}, {0., 1.}}, {0., 
         0.}}]}}, {{}, {}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox["\<\"\\t\\t\\t\"\>", {3., 3.}]}}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      GeometricTransformationBox[
       RectangleBox[{0.5, 4.5}], {{{1., 0.}, {0., 1.}}, {0., 0.}}], 
      {EdgeForm[{LightDarkSwitched[
        GrayLevel[0], 
        GrayLevel[1]], Dashing[{Small, Small}]}], FaceForm[None], 
       GeometricTransformationBox[
        RectangleBox[{0.5, 4.5}], {{{1., 0.}, {0., 1.}}, {0., 
         0.}}]}}, {{}, {}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox[
       TagBox["C",
        HoldForm], {1., 5.}]}}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      {Haloing[], 
       BSplineCurveBox[{{3., 4.5}, {3., 4.75}, {3., 5.25}, {3., 5.5}}]}, 
      {EdgeForm[{LightDarkSwitched[
        GrayLevel[0], 
        GrayLevel[1]], Dashing[{Small, Small}]}], FaceForm[None], 
       GeometricTransformationBox[
        RectangleBox[{2.5, 4.5}], {{{1., 0.}, {0., 1.}}, {0., 
         0.}}]}}, {{}, {}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox["\<\"\\t\\t\\t\"\>", {3., 5.}]}}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      GeometricTransformationBox[
       RectangleBox[{0.5, 6.5}], {{{1., 0.}, {0., 1.}}, {0., 0.}}], 
      {EdgeForm[{LightDarkSwitched[
        GrayLevel[0], 
        GrayLevel[1]], Dashing[{Small, Small}]}], FaceForm[None], 
       GeometricTransformationBox[
        RectangleBox[{0.5, 6.5}], {{{1., 0.}, {0., 1.}}, {0., 
         0.}}]}}, {{}, {}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox[
       TagBox["B",
        HoldForm], {1., 7.}]}}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      {Haloing[], 
       BSplineCurveBox[{{3., 6.5}, {3., 6.75}, {3., 7.25}, {3., 7.5}}]}, 
      {EdgeForm[{LightDarkSwitched[
        GrayLevel[0], 
        GrayLevel[1]], Dashing[{Small, Small}]}], FaceForm[None], 
       GeometricTransformationBox[
        RectangleBox[{2.5, 6.5}], {{{1., 0.}, {0., 1.}}, {0., 
         0.}}]}}, {{}, {}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox["\<\"\\t\\t\\t\"\>", {3., 7.}]}}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      {Haloing[], 
       BSplineCurveBox[{{3., 8.5}, {3., 8.75}, {0.9999999999999998, 8.75}, {
        0.9999999999999998, 8.5}}]}, 
      {EdgeForm[{LightDarkSwitched[
        GrayLevel[0], 
        GrayLevel[1]], Dashing[{Small, Small}]}], FaceForm[None], 
       GeometricTransformationBox[
        RectangleBox[{0.125, 8.5}, {3.875, 9.5}], {{{1., 0.}, {0., 1.}}, {0., 
         0.}}]}}, {{}, {{}, {}}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox["\<\"\\t\\t\\t\"\>", {2., 9.}]}}}, {
    {Arrowheads[{{Small, 0.5}}], {}, 
     ArrowBox[BSplineCurveBox[{{0.9999999999999998, 8.5}, {0.9999999999999998,
        8.25}, {1., 7.75}, {1., 7.5}}]], InsetBox[
      TemplateBox[{"b"},
       "ClickToCopy"], {0.8999999999999999, 8.}]}, 
    {Arrowheads[{{Small, 0.5}}], {}, 
     ArrowBox[BSplineCurveBox[{{3., 7.5}, {3., 7.75}, {3., 8.25}, {3., 
       8.5}}]], InsetBox[
      TemplateBox[{"b"},
       "ClickToCopy"], {2.9, 8.}]}, 
    {Arrowheads[{{Small, 0.5}}], {}, 
     ArrowBox[BSplineCurveBox[{{1., 6.5}, {1., 6.25}, {1., 5.75}, {1., 
       5.5}}]], InsetBox[
      TemplateBox[{"c"},
       "ClickToCopy"], {0.9, 6.}]}, 
    {Arrowheads[{{Small, 0.5}}], {}, 
     ArrowBox[BSplineCurveBox[{{3., 5.5}, {3., 5.75}, {3., 6.25}, {3., 
       6.5}}]], InsetBox[
      TemplateBox[{"b"},
       "ClickToCopy"], {2.9, 6.}]}, 
    {Arrowheads[{{Small, 0.5}}], {}, 
     ArrowBox[BSplineCurveBox[{{1., 4.5}, {1., 4.25}, {1., 3.75}, {1., 
       3.5}}]], InsetBox[
      TemplateBox[{"a"},
       "ClickToCopy"], {0.9, 4.}]}, 
    {Arrowheads[{{Small, 0.5}}], {}, 
     ArrowBox[BSplineCurveBox[{{3., 3.5}, {3., 3.75}, {3., 4.25}, {3., 
       4.5}}]], InsetBox[
      TemplateBox[{"b"},
       "ClickToCopy"], {2.9, 4.}]}, 
    {Arrowheads[{{Small, 0.5}}], {}, 
     ArrowBox[BSplineCurveBox[{{1., 2.5}, {1., 2.25}, {0.9999999999999998, 
       1.75}, {0.9999999999999998, 1.5}}]], InsetBox[
      TemplateBox[{"b"},
       "ClickToCopy"], {0.8999999999999999, 2.}]}, 
    {Arrowheads[{{Small, 0.5}}], {}, 
     ArrowBox[BSplineCurveBox[{{3., 1.5}, {3., 1.75}, {3., 2.25}, {3., 
       2.5}}]], InsetBox[
      TemplateBox[{"b"},
       "ClickToCopy"], {2.9, 2.}]}}, {}, {}, 
   {EdgeForm[{LightDarkSwitched[
     GrayLevel[0], 
     GrayLevel[1]], Thickness[Tiny]}], FaceForm[None]}},
  FormatType->StandardForm,
  ImageSize->Small]], "Output",
 CellChangeTimes->{
  3.96486501964788*^9, {3.9664506805946283`*^9, 3.9664507146809263`*^9}, 
   3.9780870389997797`*^9},
 CellLabel->"Out[31]=",
 CellID->746057890,ImageCache->GraphicsData["CompressedBitmap", "\<\
eJztXQ1sFVUWHmfeey11BbfgLj+1QIFWgej+VFlqmn1pBLRmd4HSRdnFALoU
Ykg3IPV3k2qC0USEBFEgBDEhBo3oilETNqYmGzEWQ6X+pcEYcIsEUJFUrATx
7D3n3jtz5747897rz3v9mUlm3sydc8/57jn3nvsz5838afm9q/6xZvm9q+9a
Pmne2uX/XLX6rnWT5jauZUnOZZZlfWZZl/17khVj58AulcNnlpXupwgPhc0A
UNg/Z5cuXfLSpnGhDh5sTIjnV3x7fyS84p6Vpb31ek4S/Cbv5+IH6YNZIkgf
3q3Xc5IQpI+5/Lpp3LhxW8VuTaQjpVlya9Az3kTXCTUj7v8dO3ZsF/uNd7PD
FJBnltMlbhJv2yDh77qE39N1fAEj2qhxt2xkehOypzMrrrJHasxl/VVneZ2f
pWRHLG5FblYMzzuFOMS3UOcxg19LHkhrjaGCwvjx4y0Hli5dCg0NDbhbNuzY
sSMGH3zwwSiWFawYfPjhh3gpdwcJbKSl7MTIUxYp6M86gms9BEhEWUaSLmDC
hAlMxooVK2D79u3Q2toKFy9e/A2JdmD37t2wa9cuWLNmjcVJHZSJOYnHL7jw
U6JkJOU2XXgFv65lgl3hRVx1UFJSAitXroSdO3diOUcIuefPn4evv/4azpw5
w+QeP36cke7fvx82bdoETz75JO425otBMpkcJXhVVVXhpdwdJLA5KcvLCBgf
OH36NHJFCVxYHNrb2+H555+HiRMnEh4sZpFXsNvRRrhNc0uU0kTL+TXqoEvq
poCzgNLSUrjvvvvgyJEjVoJEFkBXVxd8/vnn8NJLL8GGDRvg0UcfJdjV1dXW
9ZQvDrNnz4Y777wTli1bRvdfeOEFpouTJ08ynj///DOIjZWL62zPnj2yCFYh
l71PbS1TdPjTOeh9ArDQIgfNdABlZWVw6NAhISBOoDs6OuC5556DBx98EPVt
/VGAvfHGG2HJkiWwbds2OHbsGJw7d84F9vLLL8O0adNQEUwBqcDKdGBKbXWB
OeKIBlq3bh1WUqYNXn4mDD7++GNYv349zJo1qxRJr8BWWSrKVFlZCfX19XD4
8GE4e/asI4C9+uqrpDGl4AtUYJMDgMlaTFlsOiagoqICQUmzQFtbGyxcuLBY
cWjSSZArKzA4tMs5/yYDnc/xOHgsFhqpra2F999/H+uE0IgDM2fO1AASg+CS
XWNQuS1su2XLFrdU6B+YinnDtzP009z/BTp+YnOFsMIDDzzg1u7NmzebzDIp
APzGVPAO/Pjjj8Rr/vz51gheoG7RSiVmwlpNPOIqxk6p7hGCV01NDbD+UdQ6
StuYATCyIKj7gQMHCNRbb70l3YTagVjzKF+sSQMiGg8cPXqUsjc2Nsp2sTUU
hxhAesM8eeY0kz9qRT8k/Cq8+OKLxB2bO6tbsqTSx+89ePCgVRA0eDSdFXjm
OYd1iQmxyC8z1lLYTz/9BHv37jWVxjawnJ5RuRL/eeONN1LK9e6775qMFzge
DjzjpwfRvekyvvzyS7wWxWnKsDjcvcRPyWpSV1cnERv90wI6JtRGq+ZxPMO5
Web4JGHX1qVLsr0Bhdv1LeL0+0zITPR8jCh6mALs+duxK2PbJVZ9ZOPDdGsx
p0FbnFm8eLGR5hbOToyjksIXtaCN/2ZIu21okt/BzY1pWGnUe3hODT5EUzw7
tQy5yS4a6dwqMjcti2QKi1uD8yyhmsPlNKty5qXJYzktqhy7RyySKSxq0+WJ
q3nceyLbVDrGpP7lTrq3YnhP5bgojJqclyqnOUWOIxlx+HimqMHFtiiI2KT2
W4wCqAY4HK6qdq8UaUlxuy2FuStb5FCVqzFPRxrCnDQvVNOilnZhNsS3phHg
1Uhd7aF0ecDdko2A9MSqAH4/7qtTbCP6QEHZZvKVKC614Kv0SjbNIi59Szr6
sOqKZzav6z4l1WVDnNqa9Zric8chNcrUSQSzjalsMasJdU84i6mTz5ALesS7
BVJavNnz1hnoQ9hPN+iVbL8kbZ6WlDxa17g4DQvhb1syzHOtAarTexbUI9+R
Lk8hJskeySVhm+ytbg/mMOCHSpw8vg2XKdh2oqOjw51chYxVuNJoWHwqYJh7
yjDMDWFlHMuHDMxNrLghaPpsGubHDJOMm9Nx889JJbdDhw7hSo1xUpmWZUxn
KZw+rR8ot4ir0NwYUhJNhpATTYZo5GI5bULCWZDtodClI/f2O6rF3gSTy1dm
YlI+Lo7IZCk/4Wb+g4JEuACc+ba1tTGTs2MhLrkV4plcfPvmm2+IhP2yK3mX
6CgHT3R91Uw80JDP0RAX6Ijhiy++oEIzyGKK7LiQSVVhsJlQXKy1ZtLRQSgG
EMUG++P+8MMPk2hmrTD7D2+B7Lql7wSOdDlURqLzKZq6T1ywDRKdjAQOSoGq
g+ipwJsjMX3qS68UYt58800SzX6thCHtylw7eRUYbi4wGkj8MtdwpEA1LaZB
xNFG3oDhNW4qMDSe1F3egKnaiYkRWUABctC5+CAWa7oD8B7ginboq4sDACJe
2Zp5Nbp8QVRbqs1bKiMZnb+xw2gXhK20XnnXpLFkv8NhMyDFlNKE1ph8gVGM
RvdwUpVzMGOE10LNyErNfvOEw+8PrspNdz9GaURCDbkSPbQGNMNn+jv0BQ75
qe7wFD0wZqORwD4X2M89yFV8PMcus+kZ33777WwFYrPAgVCBu54cV1abcbtw
4YLlLTTHDQvNFKrsBS/xKANzbBdGxa1fv16gi/nQWWKF+SYFpe1foo+Tkf1L
9N7qPAWHXW8CkwgKluLPMGIbQ3CEPBkJCoAyxUyFPMYQj2yMQU7CjL641ZBH
NvxZY0pQk4wUp3JGQU2u0kX4jHoDz6OIJgOLZAqL3kU08b/7kO4xuVnsth8w
5eh1OFOzys2moxus4cPWk4imKf7yE4mIK2hW+ATJSHr0QWFNmgTKEfPUp3Lv
cViTFK3Az4h5utidaX4LcI3yZqdrJsu4pgoPpKw8eLuvopp4bEZMryKa9TJi
xeOXkJMSb6KXnteL3gUsqWBdvhkELDWnoxcq5383KVRVLh2e2vxNhuTF55Xd
pzy/F/HVkyzDkmakWgzJsgxBmuFS9y7caLpn6hSTRKFFUWhRFFqUs9Ci8vLy
sPlQFFoUhRYNX4FDfg1ueIqm7jPvy2SRwMG28hiJ6YEvVR9pykfL1G+OzrVX
VwSC2CwRFwA0FEeIMthjVK7RFYun3xIdpjNAjvIwWlou51FYMkhCTft1viKJ
lNAAa2z+uixTxFW+4VBFHpd3EOwytyB8fi1TwyRzCQKjofIGQkb3oOvNOYhi
Q7NVQyZ3hUTX9Suw0ZrDFffktE9YLdDh9hRbBtE/opvEW+7bZUyqGrQDhHyM
Q4bPrHXoCxzyM9ThKXpgTCIjgX0usJ96kNQAnQSfznV1dfU6LAd3uT7rYcpZ
WI45Rqi7uxvftJYJmJBHC+pLuQyPFjYa1B5F+gxJciXSJ6HeSIIXeRIF+/Rv
sE+5l61Z3uIm8bNa5Ck7CTI2huhCw3yMQSbI0PToWXsDjUec/q1FUgCRaC9S
UfHLa46f0kJfWUQajhtUm304jykaKVPO6eJYes3bHFUyxcCiryBr0U0qlCDe
Ldnx9kUPIi7bS1ZL25vwHl6/R6j1GzT2WkmyDu2p8JQis1mZvoYoiu1RSKLY
nii2J4rtyUlsD76YvKKiIu1UKo/ROGzC07NoHNzwrxe9isbpO8RBTzpxzd/0
F5XwBRQ0YHZ/VvGBGD6LgNGq4xASTb1e3tepIoGDX+CgfVqVIzGZ+lLW1/VX
JIlckVWfaRbnGon+cBwA5KDf+NaXvAHjuvKeVSshBSFv88kdNv39RzhOGxDA
4oaopZB3+PQCWFYBQ2G6a1PeHTUAILqhB5YXyYJpIa8Z6geIPsdoarbyZU2q
PzFpMZlLYHwOw67ktES02YGDjiofzaty/hKksLagxm0NCD05hlaRd43xGn/S
C15N12f1FF3IIEXFJJ/FOoZ4JVPf3g9w8j9mgqE14Y0ERmsIg0j0wJh/RgIH
v8CBGq8E4gNlAyJeKQyMGq+0du3aTMBE8UpRvFJm8Ur8eSdWHfVeEqKQpSAW
yRQWffHFNVMoEj3NV9n1MGpJ+24WB45nwW9sib615qnGLW30rbX0AtIT98e3
1qS/ysISvIV55Jolso5rmurPJlHRuSlkqS5L+uhLa4G8WyClvUchU1HIVE/J
3brzv6NHj+J4kUaxXAuxfz311FPyHqbXqmaPqaNOHLzahrFrPR0L9mnjXDAM
UMVXjDMeFtdlSS+G0fwr3lmN5dN8mTlk+C+EpZmG+D7mPp9rDLntC8hm/Fy5
kFiEB+2D1AluL3ci6gtbKoTXXnvNNxcc531QHePJYgaO4WfcLTUJHgJtzC0B
bu+9957DX1uEsz/XPxVwHr4vdvMwXc6TZozxbIsYgx9++EEtokCkfzY+00Ly
3jiG3yNH9PgZdO+D7v5yPv300z0uJ4/gLkypPFiICxcuEP8NGzYUkdhEt2K2
raJpYSWa7VVeTNoqSJAUs/DcDjz++OMSsxUSTKijc9RGIcIj4zBx4kS4ePEi
cTt27BjU19dbI/Ge3U2cVZyWvTVVWrnHXIIWdDEVPO4jhcxVq1ZBR0eHq/mp
U6dKN9BlcANeQUS/iny1ghRAaWkprUTIrbOzE5599lmoqqqyRiNNwlAgfnRU
oFYMj2OErisrK2HTpk3w7bffyu4SPv30U5g8ebKgSHULQbBrhRRR93h2ZCRg
W7IJfPXVV7B7925YtmwZVFdXzxMZZs2aBffffz8cOXIEvvvuO9GNwieffAJl
ZWUqV5RSKyHN1eGIP4u436DnRuFwSkpKYPPmzQhJDELj8P3339OqFq79PPbY
YwjLqha5GDx45JFHYM+ePcB6Hlzkcp/UfvTRR/DQQw+hZayEB8yNxp2nAys3
ACsQ5ZowYQJcffXVsHPnTnQRCeEQ0VucOXMGX2VNT6PQVqtXr4aVK1dCMpmc
QbkL8RTuvvtueOKJJ6hN7t+/H44fPw6nT5+G8+fPJwTi9vZ2aGpqwkZhjeCI
ffHDt+iIKzzLykppXS5UwzIR6u3bt9NDMtbKrCISlCDYrErRjtY+ceIEvPPO
OzYGhTroiRJwzz33MERz5syBmpoa3Fn1wKND5WN3BQU7Ug52euDAAYoqZTsj
ZjxtFGCjtCJRtQ4fPgyNjY2kSgbucq+Qbg9V7paujBf3Oq+Fy4ZijcKMDpaR
MV26dCk888wzsGPHDgxJnoGybDxjmDCtoaGBKG08jjKIvEYX+Vs6xqRT6RRt
s4RLXbFiRQLbNmPPOidobW3FnbHHIxeJLZ9TsCPlYKdoDVmvxnsVUvaefJil
wriBl7xJ+LVO8jcIZA63se7Iicv1OpcqOsZVD+lyc5DFDVQscj7xToXCHeNV
6ixr/MBU5yx11e0ipEIXdLt39Rw+d16li/qLZ33Xv/+KZ3TxuW1Dzfi6nvCZ
3nra85PwCj9jPbofaa4TBpg+QizXLwlibOgNrHxDrJSz8LtpzxL5Fc/nYdLk
/h/rsv8D2tqefg==\
\>", "ImageResolution" -> 144., "LightDark" -> \
"Dark"],ExpressionUUID->"bea5e723-1cca-44c6-8ce0-15278724fb71"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"DiagramGrid", "[", 
  RowBox[{
   RowBox[{"DiagramArrange", "[", 
    RowBox[{"DiagramNetwork", "[", 
     RowBox[{
      RowBox[{"Diagram", "[", 
       RowBox[{"A", ",", " ", 
        RowBox[{"{", 
         RowBox[{"a", ",", "x"}], "}"}], ",", " ", "b"}], "]"}], ",", " ", 
      RowBox[{"Diagram", "[", 
       RowBox[{"B", ",", " ", "b", ",", " ", "c"}], "]"}], ",", " ", 
      RowBox[{"Diagram", "[", 
       RowBox[{"C", ",", " ", "c", ",", " ", 
        RowBox[{"{", 
         RowBox[{"a", ",", "y"}], "}"}]}], "]"}]}], "]"}], "]"}], ",", " ", 
   RowBox[{"\"\<Outline\>\"", " ", "->", " ", "True"}]}], "]"}]], "Input",
 CellChangeTimes->{{3.9664533241254387`*^9, 3.96645333168979*^9}},
 CellLabel->"In[32]:=",
 CellID->1073076333,ExpressionUUID->"0c9ffa5f-e40a-4a6e-9787-f94ec4fc77d3"],

Cell[BoxData[
 GraphicsBox[{{
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      {Haloing[], 
       BSplineCurveBox[{{0.9999999999999998, 1.5}, {0.9999999999999998, 
        1.25}, {3., 1.25}, {3., 1.5}}]}, 
      {EdgeForm[{LightDarkSwitched[
        GrayLevel[0], 
        GrayLevel[1]], Dashing[{Small, Small}]}], FaceForm[None], 
       GeometricTransformationBox[
        RectangleBox[{0.125, 0.5}, {3.875, 1.5}], {{{1., 0.}, {0., 1.}}, {0., 
         0.}}]}}, {{{}, {}}, {}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox["\<\"\\t\\t\\t\"\>", {2., 1.}]}}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      {Haloing[], 
       BSplineCurveBox[{{5., 1.5}, {5., 1.25}, {5., 0.75}, {5., 0.5}}]}, 
      {EdgeForm[{LightDarkSwitched[
        GrayLevel[0], 
        GrayLevel[1]], Dashing[{Small, Small}]}], FaceForm[None], 
       GeometricTransformationBox[
        RectangleBox[{4.5, 0.5}], {{{1., 0.}, {0., 1.}}, {0., 0.}}]}}, {{}, {
       ArrowBox[{{5., 0.5}, {5., 0.25}}], InsetBox[
        InterpretationBox[
         TagBox["y",
          HoldForm],
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> Wolfram`DiagrammaticComputation`Diagram`Rewriting`y,
            "NeutralQ" -> False, "Tags" -> {{3, 2, 2}}, 
           "Type" -> \[FormalCapitalT]|>],
         Tooltip->"\[FormalCapitalT]"], {5., 0.125}]}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox["\<\"\\t\\t\\t\"\>", {5., 1.}]}}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      GeometricTransformationBox[
       RectangleBox[{0.125, 2.5}, {3.875, 3.5}], {{{1., 0.}, {0., 1.}}, {0., 
        0.}}], 
      {EdgeForm[{LightDarkSwitched[
        GrayLevel[0], 
        GrayLevel[1]], Dashing[{Small, Small}]}], FaceForm[None], 
       GeometricTransformationBox[
        RectangleBox[{0.125, 2.5}, {3.875, 3.5}], {{{1., 0.}, {0., 1.}}, {0., 
         0.}}]}}, {{{}, {}}, {}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox[
       TagBox["A",
        HoldForm], {2., 3.}]}}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      {Haloing[], 
       BSplineCurveBox[{{5., 2.5}, {5., 2.75}, {5., 3.25}, {5., 3.5}}]}, 
      {EdgeForm[{LightDarkSwitched[
        GrayLevel[0], 
        GrayLevel[1]], Dashing[{Small, Small}]}], FaceForm[None], 
       GeometricTransformationBox[
        RectangleBox[{4.5, 2.5}], {{{1., 0.}, {0., 1.}}, {0., 
         0.}}]}}, {{}, {}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox["\<\"\\t\\t\\t\"\>", {5., 3.}]}}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      {Haloing[], 
       BSplineCurveBox[{{7., 3.5}, {7., 3.25}, {7., 2.75}, {7., 2.5}}]}, 
      {EdgeForm[{LightDarkSwitched[
        GrayLevel[0], 
        GrayLevel[1]], Dashing[{Small, Small}]}], FaceForm[None], 
       GeometricTransformationBox[
        RectangleBox[{6.5, 2.5}], {{{1., 0.}, {0., 1.}}, {0., 
         0.}}]}}, {{}, {}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox["\<\"\\t\\t\\t\"\>", {7., 3.}]}}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      {Haloing[], 
       BSplineCurveBox[{{0.9999999999999998, 5.5}, {0.9999999999999998, 
        5.25}, {3., 4.75}, {3., 4.5}}], 
       BSplineCurveBox[{{3., 5.5}, {3., 5.25}, {0.9999999999999998, 4.75}, {
        0.9999999999999998, 4.5}}]}, 
      {EdgeForm[{LightDarkSwitched[
        GrayLevel[0], 
        GrayLevel[1]], Dashing[{Small, Small}]}], FaceForm[None], 
       GeometricTransformationBox[
        RectangleBox[{0.125, 4.5}, {3.875, 5.5}], {{{1., 0.}, {0., 1.}}, {0., 
         0.}}]}}, {{{}, {}}, {{}, {}}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox["\<\"\\t\\t\\t\"\>", {2., 5.}]}}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      {Haloing[], 
       BSplineCurveBox[{{5., 4.5}, {5., 4.75}, {5., 5.25}, {5., 5.5}}]}, 
      {EdgeForm[{LightDarkSwitched[
        GrayLevel[0], 
        GrayLevel[1]], Dashing[{Small, Small}]}], FaceForm[None], 
       GeometricTransformationBox[
        RectangleBox[{4.5, 4.5}], {{{1., 0.}, {0., 1.}}, {0., 
         0.}}]}}, {{}, {}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox["\<\"\\t\\t\\t\"\>", {5., 5.}]}}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      {Haloing[], 
       BSplineCurveBox[{{7., 5.5}, {7., 5.25}, {7., 4.75}, {7., 4.5}}]}, 
      {EdgeForm[{LightDarkSwitched[
        GrayLevel[0], 
        GrayLevel[1]], Dashing[{Small, Small}]}], FaceForm[None], 
       GeometricTransformationBox[
        RectangleBox[{6.5, 4.5}], {{{1., 0.}, {0., 1.}}, {0., 
         0.}}]}}, {{}, {}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox["\<\"\\t\\t\\t\"\>", {7., 5.}]}}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      {Haloing[], 
       BSplineCurveBox[{{1., 7.5}, {1., 7.25}, {1., 6.75}, {1., 6.5}}]}, 
      {EdgeForm[{LightDarkSwitched[
        GrayLevel[0], 
        GrayLevel[1]], Dashing[{Small, Small}]}], FaceForm[None], 
       GeometricTransformationBox[
        RectangleBox[{0.5, 6.5}], {{{1., 0.}, {0., 1.}}, {0., 
         0.}}]}}, {{}, {}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox["\<\"\\t\\t\\t\"\>", {1., 7.}]}}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      {Haloing[], 
       BSplineCurveBox[{{3., 7.5}, {3., 7.25}, {3., 6.75}, {3., 6.5}}]}, 
      {EdgeForm[{LightDarkSwitched[
        GrayLevel[0], 
        GrayLevel[1]], Dashing[{Small, Small}]}], FaceForm[None], 
       GeometricTransformationBox[
        RectangleBox[{2.5, 6.5}], {{{1., 0.}, {0., 1.}}, {0., 
         0.}}]}}, {{}, {}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox["\<\"\\t\\t\\t\"\>", {3., 7.}]}}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      {Haloing[], 
       BSplineCurveBox[{{5., 7.5}, {5., 7.25}, {7., 6.75}, {7., 6.5}}], 
       BSplineCurveBox[{{5., 6.5}, {5., 6.75}, {7., 7.25}, {7., 7.5}}]}, 
      {EdgeForm[{LightDarkSwitched[
        GrayLevel[0], 
        GrayLevel[1]], Dashing[{Small, Small}]}], FaceForm[None], 
       GeometricTransformationBox[
        RectangleBox[{4.125, 6.5}, {7.875, 7.5}], {{{1., 0.}, {0., 1.}}, {0., 
         0.}}]}}, {{{}, {}}, {{}, {}}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox["\<\"\\t\\t\\t\"\>", {6., 7.}]}}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      {Haloing[], 
       BSplineCurveBox[{{1., 9.5}, {1., 9.25}, {1., 8.75}, {1., 8.5}}]}, 
      {EdgeForm[{LightDarkSwitched[
        GrayLevel[0], 
        GrayLevel[1]], Dashing[{Small, Small}]}], FaceForm[None], 
       GeometricTransformationBox[
        RectangleBox[{0.5, 8.5}], {{{1., 0.}, {0., 1.}}, {0., 
         0.}}]}}, {{}, {}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox["\<\"\\t\\t\\t\"\>", {1., 9.}]}}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      {Haloing[], 
       BSplineCurveBox[{{1., 11.5}, {1., 11.25}, {1., 10.75}, {1., 10.5}}]}, 
      {EdgeForm[{LightDarkSwitched[
        GrayLevel[0], 
        GrayLevel[1]], Dashing[{Small, Small}]}], FaceForm[None], 
       GeometricTransformationBox[
        RectangleBox[{0.5, 10.5}], {{{1., 0.}, {0., 1.}}, {0., 
         0.}}]}}, {{}, {}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox["\<\"\\t\\t\\t\"\>", {1., 11.}]}}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      {Haloing[], 
       BSplineCurveBox[{{1., 13.5}, {1., 13.25}, {1., 12.75}, {1., 12.5}}]}, 
      {EdgeForm[{LightDarkSwitched[
        GrayLevel[0], 
        GrayLevel[1]], Dashing[{Small, Small}]}], FaceForm[None], 
       GeometricTransformationBox[
        RectangleBox[{0.5, 12.5}], {{{1., 0.}, {0., 1.}}, {0., 0.}}]}}, {{
       ArrowBox[{{1., 13.75}, {1., 13.5}}], InsetBox[
        InterpretationBox[
         TagBox["x",
          HoldForm],
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> Wolfram`DiagrammaticComputation`Diagram`Rewriting`x,
            "NeutralQ" -> False, "Tags" -> {{1, 1, 2}}, 
           "Type" -> \[FormalCapitalT]|>],
         Tooltip->"\[FormalCapitalT]"], {1., 13.875}]}, {}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox["\<\"\\t\\t\\t\"\>", {1., 13.}]}}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      GeometricTransformationBox[
       RectangleBox[{2.125, 8.5}, {5.875, 9.5}], {{{1., 0.}, {0., 1.}}, {0., 
        0.}}], 
      {EdgeForm[{LightDarkSwitched[
        GrayLevel[0], 
        GrayLevel[1]], Dashing[{Small, Small}]}], FaceForm[None], 
       GeometricTransformationBox[
        RectangleBox[{2.125, 8.5}, {5.875, 9.5}], {{{1., 0.}, {0., 1.}}, {0., 
         0.}}]}}, {{}, {{}, {}}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox[
       TagBox["C",
        HoldForm], {4., 9.}]}}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      {Haloing[], 
       BSplineCurveBox[{{7., 8.5}, {7., 8.75}, {7., 9.25}, {7., 9.5}}]}, 
      {EdgeForm[{LightDarkSwitched[
        GrayLevel[0], 
        GrayLevel[1]], Dashing[{Small, Small}]}], FaceForm[None], 
       GeometricTransformationBox[
        RectangleBox[{6.5, 8.5}], {{{1., 0.}, {0., 1.}}, {0., 
         0.}}]}}, {{}, {}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox["\<\"\\t\\t\\t\"\>", {7., 9.}]}}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      GeometricTransformationBox[
       RectangleBox[{2.5, 10.5}], {{{1., 0.}, {0., 1.}}, {0., 0.}}], 
      {EdgeForm[{LightDarkSwitched[
        GrayLevel[0], 
        GrayLevel[1]], Dashing[{Small, Small}]}], FaceForm[None], 
       GeometricTransformationBox[
        RectangleBox[{2.5, 10.5}], {{{1., 0.}, {0., 1.}}, {0., 
         0.}}]}}, {{}, {}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox[
       TagBox["B",
        HoldForm], {3., 11.}]}}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      {Haloing[], 
       BSplineCurveBox[{{5., 10.5}, {5., 10.75}, {5., 11.25}, {5., 11.5}}]}, 
      {EdgeForm[{LightDarkSwitched[
        GrayLevel[0], 
        GrayLevel[1]], Dashing[{Small, Small}]}], FaceForm[None], 
       GeometricTransformationBox[
        RectangleBox[{4.5, 10.5}], {{{1., 0.}, {0., 1.}}, {0., 
         0.}}]}}, {{}, {}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox["\<\"\\t\\t\\t\"\>", {5., 11.}]}}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      {Haloing[], 
       BSplineCurveBox[{{5., 12.5}, {5., 12.75}, {3., 12.75}, {3., 12.5}}]}, 
      {EdgeForm[{LightDarkSwitched[
        GrayLevel[0], 
        GrayLevel[1]], Dashing[{Small, Small}]}], FaceForm[None], 
       GeometricTransformationBox[
        RectangleBox[{2.125, 12.5}, {5.875, 13.5}], {{{1., 0.}, {0., 1.}}, {
         0., 0.}}]}}, {{}, {{}, {}}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox["\<\"\\t\\t\\t\"\>", {4., 13.}]}}}, {
    {Arrowheads[{{Small, 0.5}}], {}, 
     ArrowBox[BSplineCurveBox[{{1., 12.5}, {1., 12.25}, {1., 11.75}, {1., 
       11.5}}]], InsetBox[
      TemplateBox[{"x"},
       "ClickToCopy"], {0.9, 12.}]}, 
    {Arrowheads[{{Small, 0.5}}], {}, 
     ArrowBox[BSplineCurveBox[{{1., 10.5}, {1., 10.25}, {1., 9.75}, {1., 
       9.5}}]], InsetBox[
      TemplateBox[{"x"},
       "ClickToCopy"], {0.9, 10.}]}, 
    {Arrowheads[{{Small, 0.5}}], {}, 
     ArrowBox[BSplineCurveBox[{{3., 12.5}, {3., 12.25}, {3., 11.75}, {3., 
       11.5}}]], InsetBox[
      TemplateBox[{"b"},
       "ClickToCopy"], {2.9, 12.}]}, 
    {Arrowheads[{{Small, 0.5}}], {}, 
     ArrowBox[BSplineCurveBox[{{5., 11.5}, {5., 11.75}, {5., 12.25}, {5., 
       12.5}}]], InsetBox[
      TemplateBox[{"b"},
       "ClickToCopy"], {4.9, 12.}]}, 
    {Arrowheads[{{Small, 0.5}}], {}, 
     ArrowBox[BSplineCurveBox[{{3., 10.5}, {3., 10.25}, {4., 9.75}, {4., 
       9.5}}]], InsetBox[
      TemplateBox[{"c"},
       "ClickToCopy"], {3.4292893218813454, 9.929289321881345}]}, 
    {Arrowheads[{{Small, 0.5}}], {}, 
     ArrowBox[BSplineCurveBox[{{7., 9.5}, {7., 9.75}, {5., 10.25}, {5., 
       10.5}}]], InsetBox[
      TemplateBox[{"b"},
       "ClickToCopy"], {5.955278640450004, 9.910557280900008}]}, 
    {Arrowheads[{{Small, 0.5}}], {}, 
     ArrowBox[BSplineCurveBox[{{1., 8.5}, {1., 8.25}, {1., 7.75}, {1., 
       7.5}}]], InsetBox[
      TemplateBox[{"x"},
       "ClickToCopy"], {0.9, 8.}]}, 
    {Arrowheads[{{Small, 0.5}}], {}, 
     ArrowBox[BSplineCurveBox[{{3., 8.5}, {3., 8.25}, {3., 7.75}, {3., 
       7.5}}]], InsetBox[
      TemplateBox[{"a"},
       "ClickToCopy"], {2.9, 8.}]}, 
    {Arrowheads[{{Small, 0.5}}], {}, 
     ArrowBox[BSplineCurveBox[{{5., 8.5}, {5., 8.25}, {5., 7.75}, {5., 
       7.5}}]], InsetBox[
      TemplateBox[{"y"},
       "ClickToCopy"], {4.9, 8.}]}, 
    {Arrowheads[{{Small, 0.5}}], {}, 
     ArrowBox[BSplineCurveBox[{{7., 7.5}, {7., 7.75}, {7., 8.25}, {7., 
       8.5}}]], InsetBox[
      TemplateBox[{"b"},
       "ClickToCopy"], {6.9, 8.}]}, 
    {Arrowheads[{{Small, 0.5}}], {}, 
     ArrowBox[BSplineCurveBox[{{1., 6.5}, {1., 6.25}, {0.9999999999999998, 
       5.75}, {0.9999999999999998, 5.5}}]], InsetBox[
      TemplateBox[{"x"},
       "ClickToCopy"], {0.8999999999999999, 6.}]}, 
    {Arrowheads[{{Small, 0.5}}], {}, 
     ArrowBox[BSplineCurveBox[{{3., 6.5}, {3., 6.25}, {3., 5.75}, {3., 
       5.5}}]], InsetBox[
      TemplateBox[{"a"},
       "ClickToCopy"], {2.9, 6.}]}, 
    {Arrowheads[{{Small, 0.5}}], {}, 
     ArrowBox[BSplineCurveBox[{{5., 5.5}, {5., 5.75}, {5., 6.25}, {5., 
       6.5}}]], InsetBox[
      TemplateBox[{"b"},
       "ClickToCopy"], {4.9, 6.}]}, 
    {Arrowheads[{{Small, 0.5}}], {}, 
     ArrowBox[BSplineCurveBox[{{7., 6.5}, {7., 6.25}, {7., 5.75}, {7., 
       5.5}}]], InsetBox[
      TemplateBox[{"y"},
       "ClickToCopy"], {6.9, 6.}]}, 
    {Arrowheads[{{Small, 0.5}}], {}, 
     ArrowBox[BSplineCurveBox[{{0.9999999999999998, 4.5}, {0.9999999999999998,
        4.25}, {0.9999999999999998, 3.75}, {0.9999999999999998, 3.5}}]], 
     InsetBox[
      TemplateBox[{"a"},
       "ClickToCopy"], {0.8999999999999998, 4.}]}, 
    {Arrowheads[{{Small, 0.5}}], {}, 
     ArrowBox[BSplineCurveBox[{{3., 4.5}, {3., 4.25}, {3., 3.75}, {3., 
       3.5}}]], InsetBox[
      TemplateBox[{"x"},
       "ClickToCopy"], {2.9, 4.}]}, 
    {Arrowheads[{{Small, 0.5}}], {}, 
     ArrowBox[BSplineCurveBox[{{5., 3.5}, {5., 3.75}, {5., 4.25}, {5., 
       4.5}}]], InsetBox[
      TemplateBox[{"b"},
       "ClickToCopy"], {4.9, 4.}]}, 
    {Arrowheads[{{Small, 0.5}}], {}, 
     ArrowBox[BSplineCurveBox[{{7., 4.5}, {7., 4.25}, {7., 3.75}, {7., 
       3.5}}]], InsetBox[
      TemplateBox[{"y"},
       "ClickToCopy"], {6.9, 4.}]}, 
    {Arrowheads[{{Small, 0.5}}], {}, 
     ArrowBox[BSplineCurveBox[{{2., 2.5}, {2., 2.25}, {0.9999999999999998, 
       1.75}, {0.9999999999999998, 1.5}}]], InsetBox[
      TemplateBox[{"b"},
       "ClickToCopy"], {1.4292893218813452, 2.0707106781186546}]}, 
    {Arrowheads[{{Small, 0.5}}], {}, 
     ArrowBox[BSplineCurveBox[{{3., 1.5}, {3., 1.75}, {5., 2.25}, {5., 
       2.5}}]], InsetBox[
      TemplateBox[{"b"},
       "ClickToCopy"], {3.955278640450004, 2.0894427190999916}]}, 
    {Arrowheads[{{Small, 0.5}}], {}, 
     ArrowBox[BSplineCurveBox[{{7., 2.5}, {7., 2.25}, {5., 1.75}, {5., 
       1.5}}]], InsetBox[
      TemplateBox[{"y"},
       "ClickToCopy"], {5.955278640450004, 2.0894427190999916}]}}, {}, {}, 
   {EdgeForm[{LightDarkSwitched[
     GrayLevel[0], 
     GrayLevel[1]], Thickness[Tiny]}], FaceForm[None]}},
  FormatType->StandardForm,
  ImageSize->{242.6885485432365, 321.9292207203984}]], "Output",
 CellChangeTimes->{{3.9664533261990833`*^9, 3.9664533324439983`*^9}, 
   3.978087042830315*^9},
 CellLabel->"Out[32]=",
 CellID->750753106,ExpressionUUID->"a1255ffc-f92d-458d-9820-eefd5a6c7250"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Wire diagrams", "Subsection",
 CellID->137677110,ExpressionUUID->"cd07c0d1-412c-4959-bcf3-63235f8a44b5"],

Cell[CellGroupData[{

Cell["\<\
String diagrams include special diagrams which have some string properties \
and act as a generalization of identity diagram weaving single wires:\
\>", "Text",
 CellID->1099299951,ExpressionUUID->"5495673e-2059-49cc-b9f2-2f6e0e88f6ca"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"IdentityDiagram", "[", "a", "]"}]], "Input",
 CellLabel->"In[33]:=",
 CellID->1132461316,ExpressionUUID->"375e3655-7613-4fc0-96ae-4227edc32f6f"],

Cell[BoxData[
 GraphicsBox[
  NamespaceBox["Diagram",
   DynamicModuleBox[{Typeset`d = HoldComplete[
     Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
      "DiagramOptions" -> {
        "PortArrows" -> {{Automatic}, {Automatic}}, 
         "PortLabels" -> {{Automatic}, {Automatic}}, "Shape" -> 
         "Wires"[{{1, 2}}], "ShowLabel" -> False}, "Expression" :> 
       Interpretation["1", Identity], "InputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> 
           Wolfram`DiagrammaticComputation`Port`PortDual[
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`a], "NeutralQ" -> 
           False, "Tags" -> {}, "Type" -> SuperStar[\[FormalCapitalT]]|>]}, 
       "OutputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> Wolfram`DiagrammaticComputation`Diagram`Rewriting`a,
            "NeutralQ" -> False, "Tags" -> {}, 
           "Type" -> \[FormalCapitalT]|>]}|>]]}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      {Haloing[], 
       BSplineCurveBox[{{0., 0.5}, {0., 0.25}, {0., -0.25}, {0., -0.5}}]}}, {{
       ArrowBox[{{0., 0.75}, {0., 0.5}}], InsetBox[
        InterpretationBox[
         TagBox["a",
          HoldForm],
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> Wolfram`DiagrammaticComputation`Diagram`Rewriting`a,
            "NeutralQ" -> False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
         
         Tooltip->"\[FormalCapitalT]"], {0., 0.875}]}, {
       ArrowBox[{{0., -0.5}, {0., -0.75}}], InsetBox[
        InterpretationBox[
         TagBox["a",
          HoldForm],
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> Wolfram`DiagrammaticComputation`Diagram`Rewriting`a,
            "NeutralQ" -> False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
         
         Tooltip->"\[FormalCapitalT]"], {0., -0.875}]}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox["\<\"\\t\\t\\t\"\>", {0, 0}]}}]],
  BaseStyle->{{{}, {}}, {{}, {}}},
  FormatType->StandardForm,
  ImageSize->Tiny]], "Output",
 CellChangeTimes->{3.9648650200931*^9, 3.9780870622858047`*^9},
 CellLabel->"Out[33]=",
 CellID->1176932564,ExpressionUUID->"754725e3-1e2d-4f01-9820-e622910932db"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"IdentityDiagram", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"a", ",", "b"}], "}"}], "->", 
   RowBox[{"{", 
    RowBox[{"x", ",", "y"}], "}"}]}], "]"}]], "Input",
 CellLabel->"In[34]:=",
 CellID->1426657652,ExpressionUUID->"25d70158-3296-4fe0-accc-d8849ee8af8c"],

Cell[BoxData[
 GraphicsBox[
  NamespaceBox["Diagram",
   DynamicModuleBox[{Typeset`d = HoldComplete[
     Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
      "DiagramOptions" -> {
        "PortArrows" -> {{Automatic, Automatic}, {Automatic, Automatic}}, 
         "PortLabels" -> {{Automatic, Automatic}, {Automatic, Automatic}}, 
         "Shape" -> "Wires"[{{1, 3}, {2, 4}}], "ShowLabel" -> False}, 
       "Expression" :> Interpretation["1", Identity], "InputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> 
           Wolfram`DiagrammaticComputation`Port`PortDual[
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`a], "NeutralQ" -> 
           False, "Tags" -> {}, "Type" -> SuperStar[\[FormalCapitalT]]|>], 
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> 
           Wolfram`DiagrammaticComputation`Port`PortDual[
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`b], "NeutralQ" -> 
           False, "Tags" -> {}, "Type" -> SuperStar[\[FormalCapitalT]]|>]}, 
       "OutputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> Wolfram`DiagrammaticComputation`Diagram`Rewriting`x,
            "NeutralQ" -> False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>], 
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> Wolfram`DiagrammaticComputation`Diagram`Rewriting`y,
            "NeutralQ" -> False, "Tags" -> {}, 
           "Type" -> \[FormalCapitalT]|>]}|>]]}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      {Haloing[], 
       BSplineCurveBox[{{-0.2666666666666667, 0.5}, {-0.2666666666666667, 
        0.25}, {-0.2666666666666667, -0.25}, {-0.2666666666666667, -0.5}}], 
       BSplineCurveBox[{{0.2666666666666666, 0.5}, {0.2666666666666666, 
        0.25}, {0.2666666666666666, -0.25}, {
        0.2666666666666666, -0.5}}]}}, {{{
        ArrowBox[{{-0.2666666666666667, 0.75}, {-0.2666666666666667, 0.5}}], 
        InsetBox[
         InterpretationBox[
          TagBox["a",
           HoldForm],
          
          Wolfram`DiagrammaticComputation`Port`Port[<|
           "Expression" :> 
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`a, "NeutralQ" -> 
            False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
          Tooltip->"\[FormalCapitalT]"], {-0.2666666666666667, 0.875}]}, {
        ArrowBox[{{0.2666666666666666, 0.75}, {0.2666666666666666, 0.5}}], 
        InsetBox[
         InterpretationBox[
          TagBox["b",
           HoldForm],
          
          Wolfram`DiagrammaticComputation`Port`Port[<|
           "Expression" :> 
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, "NeutralQ" -> 
            False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
          Tooltip->"\[FormalCapitalT]"], {0.2666666666666666, 0.875}]}}, {{
        ArrowBox[{{-0.2666666666666667, -0.5}, {-0.2666666666666667, -0.75}}],
         InsetBox[
         InterpretationBox[
          TagBox["x",
           HoldForm],
          
          Wolfram`DiagrammaticComputation`Port`Port[<|
           "Expression" :> 
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`x, "NeutralQ" -> 
            False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
          Tooltip->"\[FormalCapitalT]"], {-0.2666666666666667, -0.875}]}, {
        ArrowBox[{{0.2666666666666666, -0.5}, {0.2666666666666666, -0.75}}], 
        InsetBox[
         InterpretationBox[
          TagBox["y",
           HoldForm],
          
          Wolfram`DiagrammaticComputation`Port`Port[<|
           "Expression" :> 
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`y, "NeutralQ" -> 
            False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
          Tooltip->"\[FormalCapitalT]"], {0.2666666666666666, -0.875}]}}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox["\<\"\\t\\t\\t\"\>", {0, 0}]}}]],
  BaseStyle->{{{}, {}}, {{}, {}}},
  FormatType->StandardForm,
  ImageSize->Tiny]], "Output",
 CellChangeTimes->{3.964865020107605*^9, 3.97808706233006*^9},
 CellLabel->"Out[34]=",
 CellID->233730631,ExpressionUUID->"1359b78d-0f86-4aac-8414-cf4f00ef4146"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"PermutationDiagram", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"a", ",", "b"}], "}"}], "->", 
   RowBox[{"{", 
    RowBox[{"b", ",", "a"}], "}"}]}], "]"}]], "Input",
 CellLabel->"In[35]:=",
 CellID->2107976371,ExpressionUUID->"74d52de1-1ffe-48dc-91dd-ef8bb00d6ddc"],

Cell[BoxData[
 GraphicsBox[
  NamespaceBox["Diagram",
   DynamicModuleBox[{Typeset`d = HoldComplete[
     Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
      "DiagramOptions" -> {
        "PortArrows" -> {{Automatic, Automatic}, {Automatic, Automatic}}, 
         "PortLabels" -> {{Automatic, Automatic}, {Automatic, Automatic}}, 
         "Shape" -> "Wires"[{{1, 4}, {2, 3}}], "ShowLabel" -> False}, 
       "Expression" :> Interpretation["\[Pi]", 
         Cycles[{{1, 2}}]], "InputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> 
           Wolfram`DiagrammaticComputation`Port`PortDual[
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`a], "NeutralQ" -> 
           False, "Tags" -> {}, "Type" -> SuperStar[\[FormalCapitalT]]|>], 
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> 
           Wolfram`DiagrammaticComputation`Port`PortDual[
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`b], "NeutralQ" -> 
           False, "Tags" -> {}, "Type" -> SuperStar[\[FormalCapitalT]]|>]}, 
       "OutputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> Wolfram`DiagrammaticComputation`Diagram`Rewriting`b,
            "NeutralQ" -> False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>], 
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> Wolfram`DiagrammaticComputation`Diagram`Rewriting`a,
            "NeutralQ" -> False, "Tags" -> {}, 
           "Type" -> \[FormalCapitalT]|>]}|>]]}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      {Haloing[], 
       BSplineCurveBox[{{-0.2666666666666667, 0.5}, {-0.2666666666666667, 
        0.25}, {0.2666666666666666, -0.25}, {0.2666666666666666, -0.5}}], 
       BSplineCurveBox[{{0.2666666666666666, 0.5}, {0.2666666666666666, 
        0.25}, {-0.2666666666666667, -0.25}, {-0.2666666666666667, -0.5}}]}}, \
{{{ArrowBox[{{-0.2666666666666667, 0.75}, {-0.2666666666666667, 0.5}}], 
        InsetBox[
         InterpretationBox[
          TagBox["a",
           HoldForm],
          
          Wolfram`DiagrammaticComputation`Port`Port[<|
           "Expression" :> 
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`a, "NeutralQ" -> 
            False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
          Tooltip->"\[FormalCapitalT]"], {-0.2666666666666667, 0.875}]}, {
        ArrowBox[{{0.2666666666666666, 0.75}, {0.2666666666666666, 0.5}}], 
        InsetBox[
         InterpretationBox[
          TagBox["b",
           HoldForm],
          
          Wolfram`DiagrammaticComputation`Port`Port[<|
           "Expression" :> 
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, "NeutralQ" -> 
            False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
          Tooltip->"\[FormalCapitalT]"], {0.2666666666666666, 0.875}]}}, {{
        ArrowBox[{{-0.2666666666666667, -0.5}, {-0.2666666666666667, -0.75}}],
         InsetBox[
         InterpretationBox[
          TagBox["b",
           HoldForm],
          
          Wolfram`DiagrammaticComputation`Port`Port[<|
           "Expression" :> 
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, "NeutralQ" -> 
            False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
          Tooltip->"\[FormalCapitalT]"], {-0.2666666666666667, -0.875}]}, {
        ArrowBox[{{0.2666666666666666, -0.5}, {0.2666666666666666, -0.75}}], 
        InsetBox[
         InterpretationBox[
          TagBox["a",
           HoldForm],
          
          Wolfram`DiagrammaticComputation`Port`Port[<|
           "Expression" :> 
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`a, "NeutralQ" -> 
            False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
          Tooltip->"\[FormalCapitalT]"], {0.2666666666666666, -0.875}]}}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox["\<\"\\t\\t\\t\"\>", {0, 0}]}}]],
  BaseStyle->{{{}, {}}, {{}, {}}},
  FormatType->StandardForm,
  ImageSize->Tiny]], "Output",
 CellChangeTimes->{3.964865020124485*^9, 3.978087062362007*^9},
 CellLabel->"Out[35]=",
 CellID->563124854,ExpressionUUID->"89167e55-6d23-4118-8c43-1fbf49ef7f2b"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"CupDiagram", "[", "a", "]"}]], "Input",
 CellLabel->"In[36]:=",
 CellID->642953176,ExpressionUUID->"1754a21e-363b-4b94-bb39-5faf61af6650"],

Cell[BoxData[
 GraphicsBox[
  NamespaceBox["Diagram",
   DynamicModuleBox[{Typeset`d = HoldComplete[
     Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
      "DiagramOptions" -> {
        "PortArrows" -> {Automatic, {Automatic, Automatic}}, 
         "PortLabels" -> {Automatic, {Automatic, Automatic}}, "Shape" -> 
         "Wires"[{{1, 2}}], "ShowLabel" -> False, "FloatingPorts" -> True}, 
       "Expression" :> "\[DoubleStruckCapitalI]", "InputPorts" -> {}, 
       "OutputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> Wolfram`DiagrammaticComputation`Diagram`Rewriting`a,
            "NeutralQ" -> False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>], 
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> 
           Wolfram`DiagrammaticComputation`Port`PortDual[
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`a], "NeutralQ" -> 
           False, "Tags" -> {}, "Type" -> 
           SuperStar[\[FormalCapitalT]]|>]}|>]]}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      {Haloing[], 
       BSplineCurveBox[{{0.2666666666666666, -0.5}, {
        0.2666666666666666, -0.25}, {-0.2666666666666667, -0.25}, \
{-0.2666666666666667, -0.5}}]}}, {{}, {{
        ArrowBox[{{-0.2666666666666667, -0.5}, {-0.2666666666666667, -0.75}}],
         InsetBox[
         InterpretationBox[
          TagBox["a",
           HoldForm],
          
          Wolfram`DiagrammaticComputation`Port`Port[<|
           "Expression" :> 
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`a, "NeutralQ" -> 
            False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
          Tooltip->"\[FormalCapitalT]"], {-0.2666666666666667, -0.875}]}, {
        ArrowBox[{{0.2666666666666666, -0.75}, {0.2666666666666666, -0.5}}], 
        InsetBox[
         InterpretationBox[
          TagBox["a",
           HoldForm],
          
          Wolfram`DiagrammaticComputation`Port`Port[<|
           "Expression" :> 
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`a, "NeutralQ" -> 
            False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
          Tooltip->"\[FormalCapitalT]"], {0.2666666666666666, -0.875}]}}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox["\<\"\\t\\t\\t\"\>", {0, 0}]}}]],
  BaseStyle->{{{}, {}}, {{}, {}}},
  FormatType->StandardForm,
  ImageSize->Tiny]], "Output",
 CellChangeTimes->{3.96486502013981*^9, 3.978087062416493*^9},
 CellLabel->"Out[36]=",
 CellID->478988849,ExpressionUUID->"1653de3a-4615-4156-a877-5a18cfc3bd88"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"CapDiagram", "[", "a", "]"}]], "Input",
 CellLabel->"In[37]:=",
 CellID->1397290038,ExpressionUUID->"82f3ae5e-4db9-4586-8b55-71f38c1c7b99"],

Cell[BoxData[
 GraphicsBox[
  NamespaceBox["Diagram",
   DynamicModuleBox[{Typeset`d = HoldComplete[
     Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
      "DiagramOptions" -> {
        "PortArrows" -> {{Automatic, Automatic}, Automatic}, 
         "PortLabels" -> {{Automatic, Automatic}, Automatic}, "Shape" -> 
         "Wires"[{{1, 2}}], "ShowLabel" -> False, "FloatingPorts" -> True}, 
       "Expression" :> "\[DoubleStruckCapitalI]", "InputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> 
           Wolfram`DiagrammaticComputation`Port`PortDual[
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`a], "NeutralQ" -> 
           False, "Tags" -> {}, "Type" -> SuperStar[\[FormalCapitalT]]|>], 
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> Wolfram`DiagrammaticComputation`Diagram`Rewriting`a,
            "NeutralQ" -> False, "Tags" -> {}, 
           "Type" -> \[FormalCapitalT]|>]}, "OutputPorts" -> {}|>]]}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      {Haloing[], 
       BSplineCurveBox[{{-0.2666666666666667, 0.5}, {-0.2666666666666667, 
        0.25}, {0.2666666666666666, 0.25}, {0.2666666666666666, 0.5}}]}}, {{{
        ArrowBox[{{-0.2666666666666667, 0.75}, {-0.2666666666666667, 0.5}}], 
        InsetBox[
         InterpretationBox[
          TagBox["a",
           HoldForm],
          
          Wolfram`DiagrammaticComputation`Port`Port[<|
           "Expression" :> 
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`a, "NeutralQ" -> 
            False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
          Tooltip->"\[FormalCapitalT]"], {-0.2666666666666667, 0.875}]}, {
        ArrowBox[{{0.2666666666666666, 0.5}, {0.2666666666666666, 0.75}}], 
        InsetBox[
         InterpretationBox[
          TagBox["a",
           HoldForm],
          
          Wolfram`DiagrammaticComputation`Port`Port[<|
           "Expression" :> 
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`a, "NeutralQ" -> 
            False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
          
          Tooltip->
           "\[FormalCapitalT]"], {0.2666666666666666, 0.875}]}}, {}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox["\<\"\\t\\t\\t\"\>", {0, 0}]}}]],
  BaseStyle->{{{}, {}}, {{}, {}}},
  FormatType->StandardForm,
  ImageSize->Tiny]], "Output",
 CellChangeTimes->{3.964865020151464*^9, 3.9780870624408693`*^9},
 CellLabel->"Out[37]=",
 CellID->1596876187,ExpressionUUID->"2e848b3c-06b2-4b27-8a7d-cfc54d60a743"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
In addition there are some diagrams that have a special role in process \
theories and behave like arbitrary input/output generalization of identity:\
\>", "Text",
 CellID->2132452782,ExpressionUUID->"f6eed918-d67a-4663-8714-a883c71b5903"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"CopyDiagram", "[", "x", "]"}]], "Input",
 CellLabel->"In[38]:=",
 CellID->779322291,ExpressionUUID->"b94cf83c-6241-48d7-83eb-07bcc98bbcbe"],

Cell[BoxData[
 GraphicsBox[
  NamespaceBox["Diagram",
   DynamicModuleBox[{Typeset`d = HoldComplete[
     Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
      "DiagramOptions" -> {
        "PortArrows" -> {{Automatic}, {Automatic, Automatic}}, 
         "PortLabels" -> {{Automatic}, {Automatic, Automatic}}, "Shape" -> 
         "Wires"[{{1, 2}, {1, 3}}], "ShowLabel" -> False, 
         "FloatingPorts" -> {False, True}}, "Expression" :> "Copy", 
       "InputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> 
           Wolfram`DiagrammaticComputation`Port`PortDual[
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`x], "NeutralQ" -> 
           False, "Tags" -> {}, "Type" -> SuperStar[\[FormalCapitalT]]|>]}, 
       "OutputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> Wolfram`DiagrammaticComputation`Diagram`Rewriting`x,
            "NeutralQ" -> False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>], 
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> Wolfram`DiagrammaticComputation`Diagram`Rewriting`x,
            "NeutralQ" -> False, "Tags" -> {}, 
           "Type" -> \[FormalCapitalT]|>]}|>]]}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      {Haloing[], 
       BSplineCurveBox[{{0., 0.5}, {0., 
        0.25}, {-0.2666666666666667, -0.25}, {-0.2666666666666667, -0.5}}], 
       BSplineCurveBox[{{0., 0.5}, {0., 0.25}, {0.2666666666666666, -0.25}, {
        0.2666666666666666, -0.5}}]}}, {{ArrowBox[{{0., 0.75}, {0., 0.5}}], 
       InsetBox[
        InterpretationBox[
         TagBox["x",
          HoldForm],
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> Wolfram`DiagrammaticComputation`Diagram`Rewriting`x,
            "NeutralQ" -> False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
         
         Tooltip->"\[FormalCapitalT]"], {0., 0.875}]}, {{
        ArrowBox[{{-0.2666666666666667, -0.5}, {-0.2666666666666667, -0.75}}],
         InsetBox[
         InterpretationBox[
          TagBox["x",
           HoldForm],
          
          Wolfram`DiagrammaticComputation`Port`Port[<|
           "Expression" :> 
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`x, "NeutralQ" -> 
            False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
          Tooltip->"\[FormalCapitalT]"], {-0.2666666666666667, -0.875}]}, {
        ArrowBox[{{0.2666666666666666, -0.5}, {0.2666666666666666, -0.75}}], 
        InsetBox[
         InterpretationBox[
          TagBox["x",
           HoldForm],
          
          Wolfram`DiagrammaticComputation`Port`Port[<|
           "Expression" :> 
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`x, "NeutralQ" -> 
            False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
          Tooltip->"\[FormalCapitalT]"], {0.2666666666666666, -0.875}]}}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox["\<\"\\t\\t\\t\"\>", {0, 0}]}}]],
  BaseStyle->{{{}, {}}, {{}, {}}},
  FormatType->StandardForm,
  ImageSize->Tiny]], "Output",
 CellChangeTimes->{3.964865020163171*^9, 3.978087065823002*^9},
 CellLabel->"Out[38]=",
 CellID->1683006836,ExpressionUUID->"3705436d-55d7-494c-851e-cca3936edbdb"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"SpiderDiagram", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"a", ",", "b", ",", "c", ",", "d"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"x", ",", "y", ",", "z"}], "}"}]}], "]"}]], "Input",
 CellLabel->"In[39]:=",
 CellID->877901949,ExpressionUUID->"51494b56-b1a1-4ee6-ba95-4e5d1a2f5f72"],

Cell[BoxData[
 GraphicsBox[
  NamespaceBox["Diagram",
   DynamicModuleBox[{Typeset`d = HoldComplete[
     Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
      "DiagramOptions" -> {
        "PortArrows" -> {{Automatic, Automatic, Automatic, Automatic}, {
           Automatic, Automatic, Automatic}}, 
         "PortLabels" -> {{Automatic, Automatic, Automatic, Automatic}, {
           Automatic, Automatic, Automatic}}, "ShowLabel" -> False, "Shape" -> 
         "Disk", "Width" -> Rational[1, 2], "Height" -> Rational[1, 2], 
         "FloatingPorts" -> True}, "Expression" :> "", "InputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> 
           Wolfram`DiagrammaticComputation`Port`PortDual[
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`a], "NeutralQ" -> 
           False, "Tags" -> {}, "Type" -> SuperStar[\[FormalCapitalT]]|>], 
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> 
           Wolfram`DiagrammaticComputation`Port`PortDual[
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`b], "NeutralQ" -> 
           False, "Tags" -> {}, "Type" -> SuperStar[\[FormalCapitalT]]|>], 
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> 
           Wolfram`DiagrammaticComputation`Port`PortDual[
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`c], "NeutralQ" -> 
           False, "Tags" -> {}, "Type" -> SuperStar[\[FormalCapitalT]]|>], 
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> 
           Wolfram`DiagrammaticComputation`Port`PortDual[$CellContext`d], 
           "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
           SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> Wolfram`DiagrammaticComputation`Diagram`Rewriting`x,
            "NeutralQ" -> False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>], 
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> Wolfram`DiagrammaticComputation`Diagram`Rewriting`y,
            "NeutralQ" -> False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>], 
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> $CellContext`z, "NeutralQ" -> False, "Tags" -> {}, 
           "Type" -> \[FormalCapitalT]|>]}|>]]}, 
    {Arrowheads[Small], 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
       RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
       GrayLevel[0.62]]], 
      GeometricTransformationBox[
       DiskBox[{0, 0}, 
        NCache[{Rational[1, 4], Rational[1, 4]}, {0.25, 0.25}]], {{{1, 0}, {0,
         1}}, {0, 0}}]}, {{{
        ArrowBox[
         NCache[{{
           Rational[1, 16] (-1 - 5^Rational[1, 2]) + 
            Rational[1, 32] (-1 - 5^
              Rational[1, 2]) (
               Rational[1, 4] (Rational[5, 8] + 
                 Rational[-1, 8] 5^Rational[1, 2]) + 
               Rational[1, 64] (1 + 5^Rational[1, 2])^2)^Rational[-1, 2], 
            Rational[
              1, 4] (Rational[5, 8] + Rational[-1, 8] 5^Rational[1, 2])^
              Rational[1, 2] + 
            Rational[
              1, 8] ((Rational[5, 8] + Rational[-1, 8] 5^Rational[1, 2])/(
               Rational[1, 4] (Rational[5, 8] + 
                 Rational[-1, 8] 5^Rational[1, 2]) + 
               Rational[1, 64] (1 + 5^Rational[1, 2])^2))^Rational[1, 2]}, {
           Rational[1, 16] (-1 - 5^Rational[1, 2]), 
            Rational[
             1, 4] (Rational[5, 8] + Rational[-1, 8] 5^Rational[1, 2])^
             Rational[1, 2]}}, {{-0.4045084971874737, 
          0.29389262614623657`}, {-0.20225424859373686`, 
          0.14694631307311828`}}]], InsetBox[
         InterpretationBox[
          TagBox["a",
           HoldForm],
          
          Wolfram`DiagrammaticComputation`Port`Port[<|
           "Expression" :> 
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`a, "NeutralQ" -> 
            False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
          Tooltip->"\[FormalCapitalT]"], 
         NCache[{Rational[1, 16] (-1 - 5^Rational[1, 2]) + 
           Rational[3, 2] (Rational[1, 16] (-1 - 5^Rational[1, 2]) + 
             Rational[1, 16] (1 + 5^Rational[1, 2]) + 
             Rational[1, 32] (-1 - 5^
               Rational[1, 2]) (
                Rational[1, 4] (Rational[5, 8] + 
                  Rational[-1, 8] 5^Rational[1, 2]) + 
                Rational[1, 64] (1 + 5^Rational[1, 2])^2)^Rational[-1, 2]), 
           Rational[1, 4] (Rational[5, 8] + Rational[-1, 8] 5^Rational[1, 2])^
             Rational[1, 2] + 
           Rational[
             3, 16] ((Rational[5, 8] + Rational[-1, 8] 5^Rational[1, 2])/(
              Rational[1, 4] (Rational[5, 8] + 
                Rational[-1, 8] 5^Rational[1, 2]) + 
              Rational[1, 64] (1 + 5^Rational[1, 2])^2))^
             Rational[1, 2]}, {-0.5056356214843422, 
          0.36736578268279574`}]]}, {
        ArrowBox[
         NCache[{{
           Rational[1, 16] (1 - 5^Rational[1, 2]) + 
            Rational[1, 32] (1 - 5^
              Rational[1, 2]) (
               Rational[1, 4] (Rational[5, 8] + 
                 Rational[1, 8] 5^Rational[1, 2]) + 
               Rational[1, 64] (-1 + 5^Rational[1, 2])^2)^Rational[-1, 2], 
            Rational[1, 4] (Rational[5, 8] + Rational[1, 8] 5^Rational[1, 2])^
              Rational[1, 2] + 
            Rational[
              1, 8] ((Rational[5, 8] + Rational[1, 8] 5^Rational[1, 2])/(
               Rational[1, 4] (Rational[5, 8] + 
                 Rational[1, 8] 5^Rational[1, 2]) + 
               Rational[1, 64] (-1 + 5^Rational[1, 2])^2))^Rational[1, 2]}, {
           Rational[1, 16] (1 - 5^Rational[1, 2]), 
            Rational[1, 4] (Rational[5, 8] + Rational[1, 8] 5^Rational[1, 2])^
             Rational[1, 2]}}, {{-0.15450849718747373`, 
          0.47552825814757677`}, {-0.07725424859373686, 
          0.23776412907378838`}}]], InsetBox[
         InterpretationBox[
          TagBox["b",
           HoldForm],
          
          Wolfram`DiagrammaticComputation`Port`Port[<|
           "Expression" :> 
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, "NeutralQ" -> 
            False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
          Tooltip->"\[FormalCapitalT]"], 
         NCache[{Rational[1, 16] (1 - 5^Rational[1, 2]) + 
           Rational[3, 2] (Rational[1, 16] (1 - 5^Rational[1, 2]) + 
             Rational[1, 16] (-1 + 5^Rational[1, 2]) + 
             Rational[1, 32] (1 - 5^
               Rational[1, 2]) (
                Rational[1, 4] (Rational[5, 8] + 
                  Rational[1, 8] 5^Rational[1, 2]) + 
                Rational[1, 64] (-1 + 5^Rational[1, 2])^2)^Rational[-1, 2]), 
           Rational[1, 4] (Rational[5, 8] + Rational[1, 8] 5^Rational[1, 2])^
             Rational[1, 2] + 
           Rational[
             3, 16] ((Rational[5, 8] + Rational[1, 8] 5^Rational[1, 2])/(
              Rational[1, 4] (Rational[5, 8] + 
                Rational[1, 8] 5^Rational[1, 2]) + 
              Rational[1, 64] (-1 + 5^Rational[1, 2])^2))^
             Rational[1, 2]}, {-0.19313562148434216`, 
          0.5944103226844709}]]}, {
        ArrowBox[
         NCache[{{
           Rational[1, 16] (-1 + 5^Rational[1, 2]) + 
            Rational[1, 32] (-1 + 
              5^Rational[1, 2]) (
               Rational[1, 4] (Rational[5, 8] + 
                 Rational[1, 8] 5^Rational[1, 2]) + 
               Rational[1, 64] (-1 + 5^Rational[1, 2])^2)^Rational[-1, 2], 
            Rational[1, 4] (Rational[5, 8] + Rational[1, 8] 5^Rational[1, 2])^
              Rational[1, 2] + 
            Rational[
              1, 8] ((Rational[5, 8] + Rational[1, 8] 5^Rational[1, 2])/(
               Rational[1, 4] (Rational[5, 8] + 
                 Rational[1, 8] 5^Rational[1, 2]) + 
               Rational[1, 64] (-1 + 5^Rational[1, 2])^2))^Rational[1, 2]}, {
           Rational[1, 16] (-1 + 5^Rational[1, 2]), 
            Rational[1, 4] (Rational[5, 8] + Rational[1, 8] 5^Rational[1, 2])^
             Rational[1, 2]}}, {{0.15450849718747373`, 
          0.47552825814757677`}, {0.07725424859373686, 
          0.23776412907378838`}}]], InsetBox[
         InterpretationBox[
          TagBox["c",
           HoldForm],
          
          Wolfram`DiagrammaticComputation`Port`Port[<|
           "Expression" :> 
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`c, "NeutralQ" -> 
            False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
          Tooltip->"\[FormalCapitalT]"], 
         NCache[{Rational[1, 16] (-1 + 5^Rational[1, 2]) + 
           Rational[3, 2] (Rational[1, 16] (1 - 5^Rational[1, 2]) + 
             Rational[1, 16] (-1 + 5^Rational[1, 2]) + 
             Rational[1, 32] (-1 + 
               5^Rational[1, 2]) (
                Rational[1, 4] (Rational[5, 8] + 
                  Rational[1, 8] 5^Rational[1, 2]) + 
                Rational[1, 64] (-1 + 5^Rational[1, 2])^2)^Rational[-1, 2]), 
           Rational[1, 4] (Rational[5, 8] + Rational[1, 8] 5^Rational[1, 2])^
             Rational[1, 2] + 
           Rational[
             3, 16] ((Rational[5, 8] + Rational[1, 8] 5^Rational[1, 2])/(
              Rational[1, 4] (Rational[5, 8] + 
                Rational[1, 8] 5^Rational[1, 2]) + 
              Rational[1, 64] (-1 + 5^Rational[1, 2])^2))^Rational[1, 2]}, {
          0.19313562148434216`, 0.5944103226844709}]]}, {
        ArrowBox[
         NCache[{{
           Rational[1, 16] (1 + 5^Rational[1, 2]) + 
            Rational[1, 32] (1 + 
              5^Rational[1, 2]) (
               Rational[1, 4] (Rational[5, 8] + 
                 Rational[-1, 8] 5^Rational[1, 2]) + 
               Rational[1, 64] (1 + 5^Rational[1, 2])^2)^Rational[-1, 2], 
            Rational[
              1, 4] (Rational[5, 8] + Rational[-1, 8] 5^Rational[1, 2])^
              Rational[1, 2] + 
            Rational[
              1, 8] ((Rational[5, 8] + Rational[-1, 8] 5^Rational[1, 2])/(
               Rational[1, 4] (Rational[5, 8] + 
                 Rational[-1, 8] 5^Rational[1, 2]) + 
               Rational[1, 64] (1 + 5^Rational[1, 2])^2))^Rational[1, 2]}, {
           Rational[1, 16] (1 + 5^Rational[1, 2]), 
            Rational[
             1, 4] (Rational[5, 8] + Rational[-1, 8] 5^Rational[1, 2])^
             Rational[1, 2]}}, {{0.4045084971874737, 0.29389262614623657`}, {
          0.20225424859373686`, 0.14694631307311828`}}]], InsetBox[
         InterpretationBox[
          TagBox["d",
           HoldForm],
          
          Wolfram`DiagrammaticComputation`Port`Port[<|
           "Expression" :> $CellContext`d, "NeutralQ" -> False, "Tags" -> {}, 
            "Type" -> \[FormalCapitalT]|>],
          Tooltip->"\[FormalCapitalT]"], 
         NCache[{Rational[1, 16] (1 + 5^Rational[1, 2]) + 
           Rational[3, 2] (Rational[1, 16] (-1 - 5^Rational[1, 2]) + 
             Rational[1, 16] (1 + 5^Rational[1, 2]) + 
             Rational[1, 32] (1 + 
               5^Rational[1, 2]) (
                Rational[1, 4] (Rational[5, 8] + 
                  Rational[-1, 8] 5^Rational[1, 2]) + 
                Rational[1, 64] (1 + 5^Rational[1, 2])^2)^Rational[-1, 2]), 
           Rational[1, 4] (Rational[5, 8] + Rational[-1, 8] 5^Rational[1, 2])^
             Rational[1, 2] + 
           Rational[
             3, 16] ((Rational[5, 8] + Rational[-1, 8] 5^Rational[1, 2])/(
              Rational[1, 4] (Rational[5, 8] + 
                Rational[-1, 8] 5^Rational[1, 2]) + 
              Rational[1, 64] (1 + 5^Rational[1, 2])^2))^Rational[1, 2]}, {
          0.5056356214843422, 0.36736578268279574`}]]}}, {{
        ArrowBox[
         NCache[{{
           Rational[-1, 4] 2^Rational[-1, 2], Rational[-1, 4] 
            2^Rational[-1, 2]}, {
           Rational[-1, 2] 2^Rational[-1, 2], Rational[-1, 2] 
            2^Rational[-1, 
               2]}}, {{-0.17677669529663687`, -0.17677669529663687`}, \
{-0.35355339059327373`, -0.35355339059327373`}}]], InsetBox[
         InterpretationBox[
          TagBox["x",
           HoldForm],
          
          Wolfram`DiagrammaticComputation`Port`Port[<|
           "Expression" :> 
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`x, "NeutralQ" -> 
            False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
          Tooltip->"\[FormalCapitalT]"], 
         NCache[{Rational[-5, 8] 2^Rational[-1, 2], Rational[-5, 8] 
           2^Rational[-1, 
              2]}, {-0.44194173824159216`, -0.44194173824159216`}]]}, {
        ArrowBox[
         NCache[{{0, Rational[-1, 4]}, {0, Rational[-1, 2]}}, {{0, -0.25}, {
           0, -0.5}}]], InsetBox[
         InterpretationBox[
          TagBox["y",
           HoldForm],
          
          Wolfram`DiagrammaticComputation`Port`Port[<|
           "Expression" :> 
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`y, "NeutralQ" -> 
            False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
          Tooltip->"\[FormalCapitalT]"], 
         NCache[{0, Rational[-5, 8]}, {0, -0.625}]]}, {
        ArrowBox[
         NCache[{{
           Rational[1, 4] 2^Rational[-1, 2], Rational[-1, 4] 
            2^Rational[-1, 2]}, {
           Rational[1, 2] 2^Rational[-1, 2], Rational[-1, 2] 
            2^Rational[-1, 2]}}, {{
          0.17677669529663687`, -0.17677669529663687`}, {
          0.35355339059327373`, -0.35355339059327373`}}]], InsetBox[
         InterpretationBox[
          TagBox["z",
           HoldForm],
          
          Wolfram`DiagrammaticComputation`Port`Port[<|
           "Expression" :> $CellContext`z, "NeutralQ" -> False, "Tags" -> {}, 
            "Type" -> \[FormalCapitalT]|>],
          Tooltip->"\[FormalCapitalT]"], 
         NCache[{Rational[5, 8] 2^Rational[-1, 2], Rational[-5, 8] 
           2^Rational[-1, 2]}, {
          0.44194173824159216`, -0.44194173824159216`}]]}}}, 
     {LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], InsetBox["\<\"\\t\\t\\t\"\>", {0, 0}]}}]],
  BaseStyle->{{{}, {}}, {{}, {}}},
  FormatType->StandardForm,
  ImageSize->Tiny]], "Output",
 CellChangeTimes->{3.9648650201806173`*^9, 3.966450799040154*^9, 
  3.9780870658789997`*^9},
 CellLabel->"Out[39]=",
 CellID->1788778015,ExpressionUUID->"033f9032-c5a0-4f1e-8e02-f53bb067a601"]
}, Open  ]],

Cell[BoxData[""], "Input",
 CellLabel->"In[577]:=",
 CellID->1241320141,ExpressionUUID->"196c0dac-800d-42ad-864b-d899b471ee16"]
}, Open  ]]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Diagram surgery", "Section",
 CellID->63979182,ExpressionUUID->"078dd2ca-9192-4547-a238-dc0219abeff2"],

Cell[CellGroupData[{

Cell["\<\
Diagrams have hierarchical structure and can be decomposed into their \
constituents in multiple ways.\
\>", "Text",
 CellID->1556288374,ExpressionUUID->"2a12ac42-46ed-495a-9046-d32c44ef3471"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"diag", "=", 
  RowBox[{"Diagram", "[", 
   RowBox[{
    RowBox[{"(", 
     RowBox[{
      RowBox[{"Diagram", "[", 
       RowBox[{"A", ",", "a", ",", "c"}], "]"}], "\[CircleTimes]", 
      RowBox[{"Diagram", "[", 
       RowBox[{"B", ",", "b"}], "]"}]}], ")"}], "/*", 
    RowBox[{"Diagram", "[", 
     RowBox[{"C", ",", 
      RowBox[{"{", 
       RowBox[{"c", ",", "b"}], "}"}], ",", "e"}], "]"}]}], "]"}]}]], "Input",\

 CellLabel->"In[40]:=",
 CellID->187881358,ExpressionUUID->"fa849627-3223-4155-9feb-b3100e332d57"],

Cell[BoxData[
 GraphicsBox[
  NamespaceBox["Diagram",
   DynamicModuleBox[{Typeset`d = HoldComplete[
     Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
      "DiagramOptions" -> {
        "PortArrows" -> {{Automatic}, {Automatic}}, 
         "PortLabels" -> {{Automatic}, {Automatic}}}, "Expression" :> 
       Wolfram`DiagrammaticComputation`Diagram`DiagramComposition[
         Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
          "DiagramOptions" -> {
            "PortArrows" -> {{Automatic, Automatic}, {Automatic}}, 
             "PortLabels" -> {{Automatic, Automatic}, {Automatic}}}, 
           "Expression" :> C, "InputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Port`PortDual[
                Wolfram`DiagrammaticComputation`Diagram`Rewriting`c], 
               "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
               SuperStar[\[FormalCapitalT]]|>], 
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Port`PortDual[
                Wolfram`DiagrammaticComputation`Diagram`Rewriting`b], 
               "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
               SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> $CellContext`e, "NeutralQ" -> False, 
               "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>], 
         Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
          "DiagramOptions" -> {
            "PortArrows" -> {{Automatic}, {Automatic, Automatic}}}, 
           "Expression" :> 
           Wolfram`DiagrammaticComputation`Diagram`DiagramProduct[
             
             Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
              "DiagramOptions" -> {
                "PortArrows" -> {{Automatic}, {Automatic}}, 
                 "PortLabels" -> {{Automatic}, {Automatic}}}, 
               "Expression" :> $CellContext`A, "InputPorts" -> {
                 
                 Wolfram`DiagrammaticComputation`Port`Port[<|
                  "Expression" :> 
                   Wolfram`DiagrammaticComputation`Port`PortDual[
                    Wolfram`DiagrammaticComputation`Diagram`Rewriting`a], 
                   "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
                   SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
                 
                 Wolfram`DiagrammaticComputation`Port`Port[<|
                  "Expression" :> 
                   Wolfram`DiagrammaticComputation`Diagram`Rewriting`c, 
                   "NeutralQ" -> False, "Tags" -> {}, 
                   "Type" -> \[FormalCapitalT]|>]}|>], 
             
             Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
              "DiagramOptions" -> {
                "PortArrows" -> {{}, {Automatic}}, 
                 "PortLabels" -> {{}, {Automatic}}}, 
               "Expression" :> $CellContext`B, "InputPorts" -> {}, 
               "OutputPorts" -> {
                 
                 Wolfram`DiagrammaticComputation`Port`Port[<|
                  "Expression" :> 
                   Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, 
                   "NeutralQ" -> False, "Tags" -> {}, 
                   "Type" -> \[FormalCapitalT]|>]}|>]], "InputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Port`PortDual[
                Wolfram`DiagrammaticComputation`Diagram`Rewriting`a], 
               "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
               SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Diagram`Rewriting`c, 
               "NeutralQ" -> False, "Tags" -> {}, 
               "Type" -> \[FormalCapitalT]|>], 
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, 
               "NeutralQ" -> False, "Tags" -> {}, 
               "Type" -> \[FormalCapitalT]|>]}|>]], "InputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> 
           Wolfram`DiagrammaticComputation`Port`PortDual[
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`a], "NeutralQ" -> 
           False, "Tags" -> {}, "Type" -> SuperStar[\[FormalCapitalT]]|>]}, 
       "OutputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> $CellContext`e, "NeutralQ" -> False, "Tags" -> {}, 
           "Type" -> \[FormalCapitalT]|>]}|>]]}, {{
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        GeometricTransformationBox[
         RectangleBox[{0.125, 0.5}, {3.875, 1.5}], {{{1., 0.}, {0., 1.}}, {0.,
           0.}}]}, {{{}, {}}, {ArrowBox[{{2., 0.5}, {2., 0.25}}], InsetBox[
          InterpretationBox[
           TagBox["e",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> $CellContext`e, "NeutralQ" -> False, "Tags" -> {},
              "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {2., 0.125}]}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox["C",
          HoldForm], {2., 1.}]}}, 
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        GeometricTransformationBox[
         RectangleBox[{0.5, 2.5}], {{{1., 0.}, {0., 1.}}, {0., 0.}}]}, {{
         ArrowBox[{{1., 3.75}, {1., 3.5}}], InsetBox[
          InterpretationBox[
           TagBox["a",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`a, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {1., 3.875}]}, {}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox["A",
          HoldForm], {1., 3.}]}}, 
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        GeometricTransformationBox[
         RectangleBox[{2.5, 2.5}], {{{1., 0.}, {0., 1.}}, {0., 
          0.}}]}, {{}, {}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox["B",
          HoldForm], {3., 3.}]}}}, {
      {Arrowheads[{{Small, 0.5}}], {}, 
       ArrowBox[
        BSplineCurveBox[{{1., 2.5}, {1., 2.25}, {0.9999999999999998, 1.75}, {
         0.9999999999999998, 1.5}}]], InsetBox[
        TemplateBox[{"c"},
         "ClickToCopy"], {0.8999999999999999, 2.}]}, 
      {Arrowheads[{{Small, 0.5}}], {}, 
       ArrowBox[
        BSplineCurveBox[{{3., 2.5}, {3., 2.25}, {3., 1.75}, {3., 1.5}}]], 
       InsetBox[
        TemplateBox[{"b"},
         "ClickToCopy"], {2.9, 2.}]}}, {}, {}, 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Thickness[Tiny]}], FaceForm[None]}}]],
  BaseStyle->{{{}, {}}, {{}, {}}},
  FormatType->StandardForm,
  ImageSize->Small]], "Output",
 CellChangeTimes->{3.964865020253974*^9, 3.9664507874823723`*^9, 
  3.9780870698747663`*^9},
 CellLabel->"Out[40]=",
 CellID->1977160252,ExpressionUUID->"78ae22a2-61ab-4d7a-8e0e-3c34f474cba4"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
Decompose into tree-like expression consisting of diagram nodes only:\
\>", "Text",
 CellID->568340936,ExpressionUUID->"34a6121e-11f2-41e6-b462-ceb077d87e8f"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"DiagramDecompose", "[", "diag", "]"}]], "Input",
 CellLabel->"In[41]:=",
 CellID->98849496,ExpressionUUID->"1919b8ab-e52d-4f20-a963-69ef651a8205"],

Cell[BoxData[
 RowBox[{
  GraphicsBox[
   NamespaceBox["Diagram",
    DynamicModuleBox[{Typeset`d = HoldComplete[
      Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
       "DiagramOptions" -> {
         "PortArrows" -> {{Automatic, Automatic}, {Automatic}}, 
          "PortLabels" -> {{Automatic, Automatic}, {Automatic}}}, 
        "Expression" :> C, "InputPorts" -> {
          
          Wolfram`DiagrammaticComputation`Port`Port[<|
           "Expression" :> 
            Wolfram`DiagrammaticComputation`Port`PortDual[
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`c], "NeutralQ" -> 
            False, "Tags" -> {}, "Type" -> SuperStar[\[FormalCapitalT]]|>], 
          
          Wolfram`DiagrammaticComputation`Port`Port[<|
           "Expression" :> 
            Wolfram`DiagrammaticComputation`Port`PortDual[
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`b], "NeutralQ" -> 
            False, "Tags" -> {}, "Type" -> SuperStar[\[FormalCapitalT]]|>]}, 
        "OutputPorts" -> {
          
          Wolfram`DiagrammaticComputation`Port`Port[<|
           "Expression" :> $CellContext`e, "NeutralQ" -> False, "Tags" -> {}, 
            "Type" -> \[FormalCapitalT]|>]}|>]]}, 
     {Arrowheads[Small], 
      {EdgeForm[{LightDarkSwitched[
        GrayLevel[0], 
        GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
        RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
        GrayLevel[0.62]]], 
       GeometricTransformationBox[
        RectangleBox[
         NCache[{Rational[-1, 2], Rational[-1, 2]}, {-0.5, -0.5}]], {{{1, 
         0}, {0, 1}}, {0, 0}}]}, {{{
         ArrowBox[{{-0.2666666666666667, 0.75}, {-0.2666666666666667, 0.5}}], 
         InsetBox[
          InterpretationBox[
           TagBox["c",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`c, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {-0.2666666666666667, 0.875}]}, {
         ArrowBox[{{0.2666666666666666, 0.75}, {0.2666666666666666, 0.5}}], 
         InsetBox[
          InterpretationBox[
           TagBox["b",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {0.2666666666666666, 0.875}]}}, {
        ArrowBox[{{0., -0.5}, {0., -0.75}}], InsetBox[
         InterpretationBox[
          TagBox["e",
           HoldForm],
          
          Wolfram`DiagrammaticComputation`Port`Port[<|
           "Expression" :> $CellContext`e, "NeutralQ" -> False, "Tags" -> {}, 
            "Type" -> \[FormalCapitalT]|>],
          Tooltip->"\[FormalCapitalT]"], {0., -0.875}]}}, 
      {LightDarkSwitched[
        GrayLevel[0], 
        GrayLevel[1]], InsetBox[
        TagBox["C",
         HoldForm], {0, 0}]}}]],
   BaseStyle->{{{}, {}}, {{}, {}}},
   FormatType->StandardForm], "\[CircleDot]", 
  RowBox[{"(", 
   RowBox[{
    GraphicsBox[
     NamespaceBox["Diagram",
      DynamicModuleBox[{Typeset`d = HoldComplete[
        Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
         "DiagramOptions" -> {
           "PortArrows" -> {{Automatic}, {Automatic}}, 
            "PortLabels" -> {{Automatic}, {Automatic}}}, 
          "Expression" :> $CellContext`A, "InputPorts" -> {
            
            Wolfram`DiagrammaticComputation`Port`Port[<|
             "Expression" :> 
              Wolfram`DiagrammaticComputation`Port`PortDual[
               Wolfram`DiagrammaticComputation`Diagram`Rewriting`a], 
              "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
              SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
            
            Wolfram`DiagrammaticComputation`Port`Port[<|
             "Expression" :> 
              Wolfram`DiagrammaticComputation`Diagram`Rewriting`c, "NeutralQ" -> 
              False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>]]}, 
       {Arrowheads[Small], 
        {EdgeForm[{LightDarkSwitched[
          GrayLevel[0], 
          GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
          RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
          GrayLevel[0.62]]], 
         GeometricTransformationBox[
          RectangleBox[
           NCache[{Rational[-1, 2], Rational[-1, 2]}, {-0.5, -0.5}]], {{{1, 
           0}, {0, 1}}, {0, 0}}]}, {{ArrowBox[{{0., 0.75}, {0., 0.5}}], 
          InsetBox[
           InterpretationBox[
            TagBox["a",
             HoldForm],
            
            Wolfram`DiagrammaticComputation`Port`Port[<|
             "Expression" :> 
              Wolfram`DiagrammaticComputation`Diagram`Rewriting`a, "NeutralQ" -> 
              False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
            Tooltip->"\[FormalCapitalT]"], {0., 0.875}]}, {
          ArrowBox[{{0., -0.5}, {0., -0.75}}], InsetBox[
           InterpretationBox[
            TagBox["c",
             HoldForm],
            
            Wolfram`DiagrammaticComputation`Port`Port[<|
             "Expression" :> 
              Wolfram`DiagrammaticComputation`Diagram`Rewriting`c, "NeutralQ" -> 
              False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
            Tooltip->"\[FormalCapitalT]"], {0., -0.875}]}}, 
        {LightDarkSwitched[
          GrayLevel[0], 
          GrayLevel[1]], InsetBox[
          TagBox["A",
           HoldForm], {0, 0}]}}]],
     BaseStyle->{{{}, {}}, {{}, {}}},
     FormatType->StandardForm], "\[CircleTimes]", 
    GraphicsBox[
     NamespaceBox["Diagram",
      DynamicModuleBox[{Typeset`d = HoldComplete[
        Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
         "DiagramOptions" -> {
           "PortArrows" -> {{}, {Automatic}}, 
            "PortLabels" -> {{}, {Automatic}}}, 
          "Expression" :> $CellContext`B, "InputPorts" -> {}, "OutputPorts" -> {
            
            Wolfram`DiagrammaticComputation`Port`Port[<|
             "Expression" :> 
              Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, "NeutralQ" -> 
              False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>]]}, 
       {Arrowheads[Small], 
        {EdgeForm[{LightDarkSwitched[
          GrayLevel[0], 
          GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
          RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
          GrayLevel[0.62]]], 
         GeometricTransformationBox[
          RectangleBox[
           NCache[{Rational[-1, 2], Rational[-1, 2]}, {-0.5, -0.5}]], {{{1, 
           0}, {0, 1}}, {0, 0}}]}, {{}, {ArrowBox[{{0., -0.5}, {0., -0.75}}], 
          InsetBox[
           InterpretationBox[
            TagBox["b",
             HoldForm],
            
            Wolfram`DiagrammaticComputation`Port`Port[<|
             "Expression" :> 
              Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, "NeutralQ" -> 
              False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
            Tooltip->"\[FormalCapitalT]"], {0., -0.875}]}}, 
        {LightDarkSwitched[
          GrayLevel[0], 
          GrayLevel[1]], InsetBox[
          TagBox["B",
           HoldForm], {0, 0}]}}]],
     BaseStyle->{{{}, {}}, {{}, {}}},
     FormatType->StandardForm]}], ")"}]}]], "Output",
 CellChangeTimes->{3.964865020290133*^9, 3.9664507890764093`*^9, 
  3.9780870728360443`*^9},
 CellLabel->"Out[41]=",
 CellID->523283973,ExpressionUUID->"a19a7b4f-3067-476c-94de-89879495f3cc"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"DiagramPositions", "[", "diag", "]"}]], "Input",
 CellLabel->"In[42]:=",
 CellID->135091236,ExpressionUUID->"48b7154c-df3d-406c-b097-4af64bfd55c5"],

Cell[BoxData[
 RowBox[{"\[LeftAssociation]", 
  RowBox[{
   RowBox[{
    RowBox[{"{", "}"}], "\[Rule]", 
    GraphicsBox[
     NamespaceBox["Diagram",
      DynamicModuleBox[{Typeset`d = HoldComplete[
        Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
         "DiagramOptions" -> {
           "PortArrows" -> {{Automatic}, {Automatic}}, 
            "PortLabels" -> {{Automatic}, {Automatic}}}, "Expression" :> 
          Wolfram`DiagrammaticComputation`Diagram`DiagramComposition[
            
            Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
             "DiagramOptions" -> {
               "PortArrows" -> {{Automatic, Automatic}, {Automatic}}, 
                "PortLabels" -> {{Automatic, Automatic}, {Automatic}}}, 
              "Expression" :> C, "InputPorts" -> {
                
                Wolfram`DiagrammaticComputation`Port`Port[<|
                 "Expression" :> 
                  Wolfram`DiagrammaticComputation`Port`PortDual[
                   Wolfram`DiagrammaticComputation`Diagram`Rewriting`c], 
                  "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
                  SuperStar[\[FormalCapitalT]]|>], 
                
                Wolfram`DiagrammaticComputation`Port`Port[<|
                 "Expression" :> 
                  Wolfram`DiagrammaticComputation`Port`PortDual[
                   Wolfram`DiagrammaticComputation`Diagram`Rewriting`b], 
                  "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
                  SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
                
                Wolfram`DiagrammaticComputation`Port`Port[<|
                 "Expression" :> $CellContext`e, "NeutralQ" -> False, 
                  "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>], 
            
            Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
             "DiagramOptions" -> {
               "PortArrows" -> {{Automatic}, {Automatic, Automatic}}}, 
              "Expression" :> 
              Wolfram`DiagrammaticComputation`Diagram`DiagramProduct[
                
                Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
                 "DiagramOptions" -> {
                   "PortArrows" -> {{Automatic}, {Automatic}}, 
                    "PortLabels" -> {{Automatic}, {Automatic}}}, 
                  "Expression" :> $CellContext`A, "InputPorts" -> {
                    
                    Wolfram`DiagrammaticComputation`Port`Port[<|
                    "Expression" :> 
                    Wolfram`DiagrammaticComputation`Port`PortDual[
                    Wolfram`DiagrammaticComputation`Diagram`Rewriting`a], 
                    "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
                    SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
                    
                    Wolfram`DiagrammaticComputation`Port`Port[<|
                    "Expression" :> 
                    Wolfram`DiagrammaticComputation`Diagram`Rewriting`c, 
                    "NeutralQ" -> False, "Tags" -> {}, 
                    "Type" -> \[FormalCapitalT]|>]}|>], 
                
                Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
                 "DiagramOptions" -> {
                   "PortArrows" -> {{}, {Automatic}}, 
                    "PortLabels" -> {{}, {Automatic}}}, 
                  "Expression" :> $CellContext`B, "InputPorts" -> {}, 
                  "OutputPorts" -> {
                    
                    Wolfram`DiagrammaticComputation`Port`Port[<|
                    "Expression" :> 
                    Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, 
                    "NeutralQ" -> False, "Tags" -> {}, 
                    "Type" -> \[FormalCapitalT]|>]}|>]], "InputPorts" -> {
                
                Wolfram`DiagrammaticComputation`Port`Port[<|
                 "Expression" :> 
                  Wolfram`DiagrammaticComputation`Port`PortDual[
                   Wolfram`DiagrammaticComputation`Diagram`Rewriting`a], 
                  "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
                  SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
                
                Wolfram`DiagrammaticComputation`Port`Port[<|
                 "Expression" :> 
                  Wolfram`DiagrammaticComputation`Diagram`Rewriting`c, 
                  "NeutralQ" -> False, "Tags" -> {}, 
                  "Type" -> \[FormalCapitalT]|>], 
                
                Wolfram`DiagrammaticComputation`Port`Port[<|
                 "Expression" :> 
                  Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, 
                  "NeutralQ" -> False, "Tags" -> {}, 
                  "Type" -> \[FormalCapitalT]|>]}|>]], "InputPorts" -> {
            
            Wolfram`DiagrammaticComputation`Port`Port[<|
             "Expression" :> 
              Wolfram`DiagrammaticComputation`Port`PortDual[
               Wolfram`DiagrammaticComputation`Diagram`Rewriting`a], 
              "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
              SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
            
            Wolfram`DiagrammaticComputation`Port`Port[<|
             "Expression" :> $CellContext`e, "NeutralQ" -> False, 
              "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>]]}, {{
         {Arrowheads[Small], 
          {EdgeForm[{LightDarkSwitched[
            GrayLevel[0], 
            GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
            RGBColor[
            0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
            GrayLevel[0.62]]], 
           GeometricTransformationBox[
            RectangleBox[{0.125, 0.5}, {3.875, 1.5}], {{{1., 0.}, {0., 1.}}, {
             0., 0.}}]}, {{{}, {}}, {ArrowBox[{{2., 0.5}, {2., 0.25}}], 
            InsetBox[
             InterpretationBox[
              TagBox["e",
               HoldForm],
              
              Wolfram`DiagrammaticComputation`Port`Port[<|
               "Expression" :> $CellContext`e, "NeutralQ" -> False, 
                "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
              Tooltip->"\[FormalCapitalT]"], {2., 0.125}]}}, 
          {LightDarkSwitched[
            GrayLevel[0], 
            GrayLevel[1]], InsetBox[
            TagBox["C",
             HoldForm], {2., 1.}]}}, 
         {Arrowheads[Small], 
          {EdgeForm[{LightDarkSwitched[
            GrayLevel[0], 
            GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
            RGBColor[
            0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
            GrayLevel[0.62]]], 
           GeometricTransformationBox[
            RectangleBox[{0.5, 2.5}], {{{1., 0.}, {0., 1.}}, {0., 0.}}]}, {{
            ArrowBox[{{1., 3.75}, {1., 3.5}}], InsetBox[
             InterpretationBox[
              TagBox["a",
               HoldForm],
              
              Wolfram`DiagrammaticComputation`Port`Port[<|
               "Expression" :> 
                Wolfram`DiagrammaticComputation`Diagram`Rewriting`a, 
                "NeutralQ" -> False, "Tags" -> {}, 
                "Type" -> \[FormalCapitalT]|>],
              Tooltip->"\[FormalCapitalT]"], {1., 3.875}]}, {}}, 
          {LightDarkSwitched[
            GrayLevel[0], 
            GrayLevel[1]], InsetBox[
            TagBox["A",
             HoldForm], {1., 3.}]}}, 
         {Arrowheads[Small], 
          {EdgeForm[{LightDarkSwitched[
            GrayLevel[0], 
            GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
            RGBColor[
            0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
            GrayLevel[0.62]]], 
           GeometricTransformationBox[
            RectangleBox[{2.5, 2.5}], {{{1., 0.}, {0., 1.}}, {0., 
             0.}}]}, {{}, {}}, 
          {LightDarkSwitched[
            GrayLevel[0], 
            GrayLevel[1]], InsetBox[
            TagBox["B",
             HoldForm], {3., 3.}]}}}, {
         {Arrowheads[{{Small, 0.5}}], {}, 
          ArrowBox[
           BSplineCurveBox[{{1., 2.5}, {1., 2.25}, {0.9999999999999998, 
            1.75}, {0.9999999999999998, 1.5}}]], InsetBox[
           TemplateBox[{"c"},
            "ClickToCopy"], {0.8999999999999999, 2.}]}, 
         {Arrowheads[{{Small, 0.5}}], {}, 
          ArrowBox[
           BSplineCurveBox[{{3., 2.5}, {3., 2.25}, {3., 1.75}, {3., 1.5}}]], 
          InsetBox[
           TemplateBox[{"b"},
            "ClickToCopy"], {2.9, 2.}]}}, {}, {}, 
        {EdgeForm[{LightDarkSwitched[
          GrayLevel[0], 
          GrayLevel[1]], Thickness[Tiny]}], FaceForm[None]}}]],
     BaseStyle->{{{}, {}}, {{}, {}}},
     FormatType->StandardForm]}], ",", 
   RowBox[{
    RowBox[{"{", "1", "}"}], "\[Rule]", 
    GraphicsBox[
     NamespaceBox["Diagram",
      DynamicModuleBox[{Typeset`d = HoldComplete[
        Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
         "DiagramOptions" -> {
           "PortArrows" -> {{Automatic, Automatic}, {Automatic}}, 
            "PortLabels" -> {{Automatic, Automatic}, {Automatic}}}, 
          "Expression" :> C, "InputPorts" -> {
            
            Wolfram`DiagrammaticComputation`Port`Port[<|
             "Expression" :> 
              Wolfram`DiagrammaticComputation`Port`PortDual[
               Wolfram`DiagrammaticComputation`Diagram`Rewriting`c], 
              "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
              SuperStar[\[FormalCapitalT]]|>], 
            
            Wolfram`DiagrammaticComputation`Port`Port[<|
             "Expression" :> 
              Wolfram`DiagrammaticComputation`Port`PortDual[
               Wolfram`DiagrammaticComputation`Diagram`Rewriting`b], 
              "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
              SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
            
            Wolfram`DiagrammaticComputation`Port`Port[<|
             "Expression" :> $CellContext`e, "NeutralQ" -> False, 
              "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>]]}, 
       {Arrowheads[Small], 
        {EdgeForm[{LightDarkSwitched[
          GrayLevel[0], 
          GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
          RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
          GrayLevel[0.62]]], 
         GeometricTransformationBox[
          RectangleBox[
           NCache[{Rational[-1, 2], Rational[-1, 2]}, {-0.5, -0.5}]], {{{1, 
           0}, {0, 1}}, {0, 0}}]}, {{{
           ArrowBox[{{-0.2666666666666667, 0.75}, {-0.2666666666666667, 
            0.5}}], InsetBox[
            InterpretationBox[
             TagBox["c",
              HoldForm],
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Diagram`Rewriting`c, 
               "NeutralQ" -> False, "Tags" -> {}, 
               "Type" -> \[FormalCapitalT]|>],
             Tooltip->"\[FormalCapitalT]"], {-0.2666666666666667, 0.875}]}, {
           ArrowBox[{{0.2666666666666666, 0.75}, {0.2666666666666666, 0.5}}], 
           InsetBox[
            InterpretationBox[
             TagBox["b",
              HoldForm],
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, 
               "NeutralQ" -> False, "Tags" -> {}, 
               "Type" -> \[FormalCapitalT]|>],
             Tooltip->"\[FormalCapitalT]"], {0.2666666666666666, 0.875}]}}, {
          ArrowBox[{{0., -0.5}, {0., -0.75}}], InsetBox[
           InterpretationBox[
            TagBox["e",
             HoldForm],
            
            Wolfram`DiagrammaticComputation`Port`Port[<|
             "Expression" :> $CellContext`e, "NeutralQ" -> False, 
              "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
            Tooltip->"\[FormalCapitalT]"], {0., -0.875}]}}, 
        {LightDarkSwitched[
          GrayLevel[0], 
          GrayLevel[1]], InsetBox[
          TagBox["C",
           HoldForm], {0, 0}]}}]],
     BaseStyle->{{{}, {}}, {{}, {}}},
     FormatType->StandardForm]}], ",", 
   RowBox[{
    RowBox[{"{", "2", "}"}], "\[Rule]", 
    GraphicsBox[
     NamespaceBox["Diagram",
      DynamicModuleBox[{Typeset`d = HoldComplete[
        Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
         "DiagramOptions" -> {
           "PortArrows" -> {{Automatic}, {Automatic, Automatic}}}, 
          "Expression" :> 
          Wolfram`DiagrammaticComputation`Diagram`DiagramProduct[
            
            Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
             "DiagramOptions" -> {
               "PortArrows" -> {{Automatic}, {Automatic}}, 
                "PortLabels" -> {{Automatic}, {Automatic}}}, 
              "Expression" :> $CellContext`A, "InputPorts" -> {
                
                Wolfram`DiagrammaticComputation`Port`Port[<|
                 "Expression" :> 
                  Wolfram`DiagrammaticComputation`Port`PortDual[
                   Wolfram`DiagrammaticComputation`Diagram`Rewriting`a], 
                  "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
                  SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
                
                Wolfram`DiagrammaticComputation`Port`Port[<|
                 "Expression" :> 
                  Wolfram`DiagrammaticComputation`Diagram`Rewriting`c, 
                  "NeutralQ" -> False, "Tags" -> {}, 
                  "Type" -> \[FormalCapitalT]|>]}|>], 
            
            Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
             "DiagramOptions" -> {
               "PortArrows" -> {{}, {Automatic}}, 
                "PortLabels" -> {{}, {Automatic}}}, 
              "Expression" :> $CellContext`B, "InputPorts" -> {}, 
              "OutputPorts" -> {
                
                Wolfram`DiagrammaticComputation`Port`Port[<|
                 "Expression" :> 
                  Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, 
                  "NeutralQ" -> False, "Tags" -> {}, 
                  "Type" -> \[FormalCapitalT]|>]}|>]], "InputPorts" -> {
            
            Wolfram`DiagrammaticComputation`Port`Port[<|
             "Expression" :> 
              Wolfram`DiagrammaticComputation`Port`PortDual[
               Wolfram`DiagrammaticComputation`Diagram`Rewriting`a], 
              "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
              SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
            
            Wolfram`DiagrammaticComputation`Port`Port[<|
             "Expression" :> 
              Wolfram`DiagrammaticComputation`Diagram`Rewriting`c, "NeutralQ" -> 
              False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>], 
            
            Wolfram`DiagrammaticComputation`Port`Port[<|
             "Expression" :> 
              Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, "NeutralQ" -> 
              False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>]]}, {{
         {Arrowheads[Small], 
          {EdgeForm[{LightDarkSwitched[
            GrayLevel[0], 
            GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
            RGBColor[
            0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
            GrayLevel[0.62]]], 
           GeometricTransformationBox[
            RectangleBox[{0.5, 0.5}], {{{1., 0.}, {0., 1.}}, {0., 0.}}]}, {{
            ArrowBox[{{1., 1.75}, {1., 1.5}}], InsetBox[
             InterpretationBox[
              TagBox["a",
               HoldForm],
              
              Wolfram`DiagrammaticComputation`Port`Port[<|
               "Expression" :> 
                Wolfram`DiagrammaticComputation`Diagram`Rewriting`a, 
                "NeutralQ" -> False, "Tags" -> {}, 
                "Type" -> \[FormalCapitalT]|>],
              Tooltip->"\[FormalCapitalT]"], {1., 1.875}]}, {
            ArrowBox[{{1., 0.5}, {1., 0.25}}], InsetBox[
             InterpretationBox[
              TagBox["c",
               HoldForm],
              
              Wolfram`DiagrammaticComputation`Port`Port[<|
               "Expression" :> 
                Wolfram`DiagrammaticComputation`Diagram`Rewriting`c, 
                "NeutralQ" -> False, "Tags" -> {}, 
                "Type" -> \[FormalCapitalT]|>],
              Tooltip->"\[FormalCapitalT]"], {1., 0.125}]}}, 
          {LightDarkSwitched[
            GrayLevel[0], 
            GrayLevel[1]], InsetBox[
            TagBox["A",
             HoldForm], {1., 1.}]}}, 
         {Arrowheads[Small], 
          {EdgeForm[{LightDarkSwitched[
            GrayLevel[0], 
            GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
            RGBColor[
            0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
            GrayLevel[0.62]]], 
           GeometricTransformationBox[
            RectangleBox[{2.5, 0.5}], {{{1., 0.}, {0., 1.}}, {0., 
             0.}}]}, {{}, {ArrowBox[{{3., 0.5}, {3., 0.25}}], InsetBox[
             InterpretationBox[
              TagBox["b",
               HoldForm],
              
              Wolfram`DiagrammaticComputation`Port`Port[<|
               "Expression" :> 
                Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, 
                "NeutralQ" -> False, "Tags" -> {}, 
                "Type" -> \[FormalCapitalT]|>],
              Tooltip->"\[FormalCapitalT]"], {3., 0.125}]}}, 
          {LightDarkSwitched[
            GrayLevel[0], 
            GrayLevel[1]], InsetBox[
            TagBox["B",
             HoldForm], {3., 1.}]}}}, {}, {}, {}, 
        {EdgeForm[{LightDarkSwitched[
          GrayLevel[0], 
          GrayLevel[1]], Thickness[Tiny]}], FaceForm[None]}}]],
     BaseStyle->{{{}, {}}, {{}, {}}},
     FormatType->StandardForm]}], ",", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"2", ",", "1"}], "}"}], "\[Rule]", 
    GraphicsBox[
     NamespaceBox["Diagram",
      DynamicModuleBox[{Typeset`d = HoldComplete[
        Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
         "DiagramOptions" -> {
           "PortArrows" -> {{Automatic}, {Automatic}}, 
            "PortLabels" -> {{Automatic}, {Automatic}}}, 
          "Expression" :> $CellContext`A, "InputPorts" -> {
            
            Wolfram`DiagrammaticComputation`Port`Port[<|
             "Expression" :> 
              Wolfram`DiagrammaticComputation`Port`PortDual[
               Wolfram`DiagrammaticComputation`Diagram`Rewriting`a], 
              "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
              SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
            
            Wolfram`DiagrammaticComputation`Port`Port[<|
             "Expression" :> 
              Wolfram`DiagrammaticComputation`Diagram`Rewriting`c, "NeutralQ" -> 
              False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>]]}, 
       {Arrowheads[Small], 
        {EdgeForm[{LightDarkSwitched[
          GrayLevel[0], 
          GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
          RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
          GrayLevel[0.62]]], 
         GeometricTransformationBox[
          RectangleBox[
           NCache[{Rational[-1, 2], Rational[-1, 2]}, {-0.5, -0.5}]], {{{1, 
           0}, {0, 1}}, {0, 0}}]}, {{ArrowBox[{{0., 0.75}, {0., 0.5}}], 
          InsetBox[
           InterpretationBox[
            TagBox["a",
             HoldForm],
            
            Wolfram`DiagrammaticComputation`Port`Port[<|
             "Expression" :> 
              Wolfram`DiagrammaticComputation`Diagram`Rewriting`a, "NeutralQ" -> 
              False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
            Tooltip->"\[FormalCapitalT]"], {0., 0.875}]}, {
          ArrowBox[{{0., -0.5}, {0., -0.75}}], InsetBox[
           InterpretationBox[
            TagBox["c",
             HoldForm],
            
            Wolfram`DiagrammaticComputation`Port`Port[<|
             "Expression" :> 
              Wolfram`DiagrammaticComputation`Diagram`Rewriting`c, "NeutralQ" -> 
              False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
            Tooltip->"\[FormalCapitalT]"], {0., -0.875}]}}, 
        {LightDarkSwitched[
          GrayLevel[0], 
          GrayLevel[1]], InsetBox[
          TagBox["A",
           HoldForm], {0, 0}]}}]],
     BaseStyle->{{{}, {}}, {{}, {}}},
     FormatType->StandardForm]}], ",", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"2", ",", "2"}], "}"}], "\[Rule]", 
    GraphicsBox[
     NamespaceBox["Diagram",
      DynamicModuleBox[{Typeset`d = HoldComplete[
        Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
         "DiagramOptions" -> {
           "PortArrows" -> {{}, {Automatic}}, 
            "PortLabels" -> {{}, {Automatic}}}, 
          "Expression" :> $CellContext`B, "InputPorts" -> {}, "OutputPorts" -> {
            
            Wolfram`DiagrammaticComputation`Port`Port[<|
             "Expression" :> 
              Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, "NeutralQ" -> 
              False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>]]}, 
       {Arrowheads[Small], 
        {EdgeForm[{LightDarkSwitched[
          GrayLevel[0], 
          GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
          RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
          GrayLevel[0.62]]], 
         GeometricTransformationBox[
          RectangleBox[
           NCache[{Rational[-1, 2], Rational[-1, 2]}, {-0.5, -0.5}]], {{{1, 
           0}, {0, 1}}, {0, 0}}]}, {{}, {ArrowBox[{{0., -0.5}, {0., -0.75}}], 
          InsetBox[
           InterpretationBox[
            TagBox["b",
             HoldForm],
            
            Wolfram`DiagrammaticComputation`Port`Port[<|
             "Expression" :> 
              Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, "NeutralQ" -> 
              False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
            Tooltip->"\[FormalCapitalT]"], {0., -0.875}]}}, 
        {LightDarkSwitched[
          GrayLevel[0], 
          GrayLevel[1]], InsetBox[
          TagBox["B",
           HoldForm], {0, 0}]}}]],
     BaseStyle->{{{}, {}}, {{}, {}}},
     FormatType->StandardForm]}]}], "\[RightAssociation]"}]], "Output",
 CellChangeTimes->{3.964865020386441*^9, 3.966450790541236*^9, 
  3.978087073843235*^9},
 CellLabel->"Out[42]=",
 CellID->1454435158,ExpressionUUID->"ef2d9813-e623-4a46-aaff-9abd18294db4"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"DiagramMap", "[", 
  RowBox[{
   RowBox[{
    RowBox[{"Diagram", "[", 
     RowBox[{"#", ",", 
      RowBox[{"\"\<Expression\>\"", "->", 
       RowBox[{"RandomColor", "[", "]"}]}]}], "]"}], "&"}], ",", "diag"}], 
  "]"}]], "Input",
 CellLabel->"In[43]:=",
 CellID->818119270,ExpressionUUID->"5c806d35-e15e-4964-b1a0-56b9139bf2e5"],

Cell[BoxData[
 GraphicsBox[
  NamespaceBox["Diagram",
   DynamicModuleBox[{Typeset`d = HoldComplete[
     Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
      "DiagramOptions" -> {
        "PortArrows" -> {{Automatic}, {Automatic}}, 
         "PortLabels" -> {{Automatic}, {Automatic}}}, "Expression" :> 
       Wolfram`DiagrammaticComputation`Diagram`DiagramComposition[
         Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
          "DiagramOptions" -> {
            "PortArrows" -> {{Automatic, Automatic}, {Automatic}}, 
             "PortLabels" -> {{Automatic, Automatic}, {Automatic}}}, 
           "Expression" :> 
           RGBColor[
            0.24739637049622676`, 0.7648445226874443, 0.957599796325391], 
           "InputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Port`PortDual[
                Wolfram`DiagrammaticComputation`Diagram`Rewriting`c], 
               "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
               SuperStar[\[FormalCapitalT]]|>], 
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Port`PortDual[
                Wolfram`DiagrammaticComputation`Diagram`Rewriting`b], 
               "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
               SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> $CellContext`e, "NeutralQ" -> False, 
               "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>], 
         Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
          "DiagramOptions" -> {
            "PortArrows" -> {{Automatic}, {Automatic, Automatic}}}, 
           "Expression" :> 
           Wolfram`DiagrammaticComputation`Diagram`DiagramProduct[
             
             Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
              "DiagramOptions" -> {
                "PortArrows" -> {{Automatic}, {Automatic}}, 
                 "PortLabels" -> {{Automatic}, {Automatic}}}, "Expression" :> 
               RGBColor[
                0.18893055281111604`, 0.6189216143820149, 0.5521798365441268],
                "InputPorts" -> {
                 
                 Wolfram`DiagrammaticComputation`Port`Port[<|
                  "Expression" :> 
                   Wolfram`DiagrammaticComputation`Port`PortDual[
                    Wolfram`DiagrammaticComputation`Diagram`Rewriting`a], 
                   "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
                   SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
                 
                 Wolfram`DiagrammaticComputation`Port`Port[<|
                  "Expression" :> 
                   Wolfram`DiagrammaticComputation`Diagram`Rewriting`c, 
                   "NeutralQ" -> False, "Tags" -> {}, 
                   "Type" -> \[FormalCapitalT]|>]}|>], 
             
             Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
              "DiagramOptions" -> {
                "PortArrows" -> {{}, {Automatic}}, 
                 "PortLabels" -> {{}, {Automatic}}}, "Expression" :> 
               RGBColor[
                0.1405713116843319, 0.22855065055166102`, 
                 0.09987512004501808], "InputPorts" -> {}, "OutputPorts" -> {
                 
                 Wolfram`DiagrammaticComputation`Port`Port[<|
                  "Expression" :> 
                   Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, 
                   "NeutralQ" -> False, "Tags" -> {}, 
                   "Type" -> \[FormalCapitalT]|>]}|>]], "InputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Port`PortDual[
                Wolfram`DiagrammaticComputation`Diagram`Rewriting`a], 
               "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
               SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Diagram`Rewriting`c, 
               "NeutralQ" -> False, "Tags" -> {}, 
               "Type" -> \[FormalCapitalT]|>], 
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, 
               "NeutralQ" -> False, "Tags" -> {}, 
               "Type" -> \[FormalCapitalT]|>]}|>]], "InputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> 
           Wolfram`DiagrammaticComputation`Port`PortDual[
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`a], "NeutralQ" -> 
           False, "Tags" -> {}, "Type" -> SuperStar[\[FormalCapitalT]]|>]}, 
       "OutputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> $CellContext`e, "NeutralQ" -> False, "Tags" -> {}, 
           "Type" -> \[FormalCapitalT]|>]}|>]]}, {{
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        GeometricTransformationBox[
         RectangleBox[{0.125, 0.5}, {3.875, 1.5}], {{{1., 0.}, {0., 1.}}, {0.,
           0.}}]}, {{{}, {}}, {ArrowBox[{{2., 0.5}, {2., 0.25}}], InsetBox[
          InterpretationBox[
           TagBox["e",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> $CellContext`e, "NeutralQ" -> False, "Tags" -> {},
              "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {2., 0.125}]}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox[
          
          TemplateBox[<|
           "color" -> RGBColor[
             0.24739637049622676`, 0.7648445226874443, 0.957599796325391]|>,
           "RGBColorSwatchTemplate"],
          HoldForm], {2., 1.}]}}, 
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        GeometricTransformationBox[
         RectangleBox[{0.5, 2.5}], {{{1., 0.}, {0., 1.}}, {0., 0.}}]}, {{
         ArrowBox[{{1., 3.75}, {1., 3.5}}], InsetBox[
          InterpretationBox[
           TagBox["a",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`a, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {1., 3.875}]}, {}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox[
          
          TemplateBox[<|
           "color" -> RGBColor[
             0.18893055281111604`, 0.6189216143820149, 0.5521798365441268]|>,
           "RGBColorSwatchTemplate"],
          HoldForm], {1., 3.}]}}, 
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        GeometricTransformationBox[
         RectangleBox[{2.5, 2.5}], {{{1., 0.}, {0., 1.}}, {0., 
          0.}}]}, {{}, {}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox[
          
          TemplateBox[<|
           "color" -> RGBColor[
             0.1405713116843319, 0.22855065055166102`, 0.09987512004501808]|>,
           
           "RGBColorSwatchTemplate"],
          HoldForm], {3., 3.}]}}}, {
      {Arrowheads[{{Small, 0.5}}], {}, 
       ArrowBox[
        BSplineCurveBox[{{1., 2.5}, {1., 2.25}, {0.9999999999999998, 1.75}, {
         0.9999999999999998, 1.5}}]], InsetBox[
        TemplateBox[{"c"},
         "ClickToCopy"], {0.8999999999999999, 2.}]}, 
      {Arrowheads[{{Small, 0.5}}], {}, 
       ArrowBox[
        BSplineCurveBox[{{3., 2.5}, {3., 2.25}, {3., 1.75}, {3., 1.5}}]], 
       InsetBox[
        TemplateBox[{"b"},
         "ClickToCopy"], {2.9, 2.}]}}, {}, {}, 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Thickness[Tiny]}], FaceForm[None]}}]],
  BaseStyle->{{{}, {}}, {{}, {}}},
  FormatType->StandardForm,
  ImageSize->Small]], "Output",
 CellChangeTimes->{3.964865020469453*^9, 3.966450792439166*^9, 
  3.978087075963809*^9},
 CellLabel->"Out[43]=",
 CellID->263693493,ExpressionUUID->"c9ba8304-4b6b-4540-97a1-4775392922bb"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"DiagramMapAt", "[", 
  RowBox[{
   RowBox[{
    RowBox[{"Diagram", "[", 
     RowBox[{"#", ",", 
      RowBox[{"\"\<Expression\>\"", "->", 
       RowBox[{"RandomColor", "[", "]"}]}]}], "]"}], "&"}], ",", "diag", ",", 
   
   RowBox[{"{", "2", "}"}]}], "]"}]], "Input",
 CellLabel->"In[44]:=",
 CellID->457632677,ExpressionUUID->"c862d6b3-10b2-4f03-98ae-c5d0f2ce38e1"],

Cell[BoxData[
 GraphicsBox[
  NamespaceBox["Diagram",
   DynamicModuleBox[{Typeset`d = HoldComplete[
     Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
      "DiagramOptions" -> {
        "PortArrows" -> {{Automatic}, {Automatic}}, 
         "PortLabels" -> {{Automatic}, {Automatic}}}, "Expression" :> 
       Wolfram`DiagrammaticComputation`Diagram`DiagramComposition[
         Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
          "DiagramOptions" -> {
            "PortArrows" -> {{Automatic, Automatic}, {Automatic}}, 
             "PortLabels" -> {{Automatic, Automatic}, {Automatic}}}, 
           "Expression" :> C, "InputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Port`PortDual[
                Wolfram`DiagrammaticComputation`Diagram`Rewriting`c], 
               "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
               SuperStar[\[FormalCapitalT]]|>], 
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Port`PortDual[
                Wolfram`DiagrammaticComputation`Diagram`Rewriting`b], 
               "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
               SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> $CellContext`e, "NeutralQ" -> False, 
               "Tags" -> {}, "Type" -> \[FormalCapitalT]|>]}|>], 
         Wolfram`DiagrammaticComputation`Diagram`Diagram[<|
          "DiagramOptions" -> {
            "PortArrows" -> {{Automatic}, {Automatic, Automatic}}}, 
           "Expression" :> 
           RGBColor[
            0.29959091944347915`, 0.357215434943305, 0.4192077921929487], 
           "InputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Port`PortDual[
                Wolfram`DiagrammaticComputation`Diagram`Rewriting`a], 
               "NeutralQ" -> False, "Tags" -> {}, "Type" -> 
               SuperStar[\[FormalCapitalT]]|>]}, "OutputPorts" -> {
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Diagram`Rewriting`c, 
               "NeutralQ" -> False, "Tags" -> {}, 
               "Type" -> \[FormalCapitalT]|>], 
             
             Wolfram`DiagrammaticComputation`Port`Port[<|
              "Expression" :> 
               Wolfram`DiagrammaticComputation`Diagram`Rewriting`b, 
               "NeutralQ" -> False, "Tags" -> {}, 
               "Type" -> \[FormalCapitalT]|>]}|>]], "InputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> 
           Wolfram`DiagrammaticComputation`Port`PortDual[
            Wolfram`DiagrammaticComputation`Diagram`Rewriting`a], "NeutralQ" -> 
           False, "Tags" -> {}, "Type" -> SuperStar[\[FormalCapitalT]]|>]}, 
       "OutputPorts" -> {
         Wolfram`DiagrammaticComputation`Port`Port[<|
          "Expression" :> $CellContext`e, "NeutralQ" -> False, "Tags" -> {}, 
           "Type" -> \[FormalCapitalT]|>]}|>]]}, {{
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        GeometricTransformationBox[
         RectangleBox[{0.125, 0.5}, {3.875, 1.5}], {{{1., 0.}, {0., 1.}}, {0.,
           0.}}]}, {{{}, {}}, {ArrowBox[{{2., 0.5}, {2., 0.25}}], InsetBox[
          InterpretationBox[
           TagBox["e",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> $CellContext`e, "NeutralQ" -> False, "Tags" -> {},
              "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {2., 0.125}]}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox["C",
          HoldForm], {2., 1.}]}}, 
      {Arrowheads[Small], 
       {EdgeForm[{LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], Opacity[0.5]}], FaceForm[LightDarkSwitched[
         RGBColor[0.952941188969422, 0.9529411889694224, 0.9529411889694221], 
         
         GrayLevel[0.62]]], 
        GeometricTransformationBox[
         RectangleBox[{0.125, 2.5}, {3.875, 3.5}], {{{1., 0.}, {0., 1.}}, {0.,
           0.}}]}, {{ArrowBox[{{2., 3.75}, {2., 3.5}}], InsetBox[
          InterpretationBox[
           TagBox["a",
            HoldForm],
           
           Wolfram`DiagrammaticComputation`Port`Port[<|
            "Expression" :> 
             Wolfram`DiagrammaticComputation`Diagram`Rewriting`a, "NeutralQ" -> 
             False, "Tags" -> {}, "Type" -> \[FormalCapitalT]|>],
           Tooltip->"\[FormalCapitalT]"], {2., 3.875}]}, {{}, {}}}, 
       {LightDarkSwitched[
         GrayLevel[0], 
         GrayLevel[1]], InsetBox[
         TagBox[
          
          TemplateBox[<|
           "color" -> RGBColor[
             0.29959091944347915`, 0.357215434943305, 0.4192077921929487]|>,
           "RGBColorSwatchTemplate"],
          HoldForm], {2., 3.}]}}}, {
      {Arrowheads[{{Small, 0.5}}], {}, 
       ArrowBox[
        BSplineCurveBox[{{0.9999999999999998, 2.5}, {0.9999999999999998, 
         2.25}, {0.9999999999999998, 1.75}, {0.9999999999999998, 1.5}}]], 
       InsetBox[
        TemplateBox[{"c"},
         "ClickToCopy"], {0.8999999999999998, 2.}]}, 
      {Arrowheads[{{Small, 0.5}}], {}, 
       ArrowBox[
        BSplineCurveBox[{{3., 2.5}, {3., 2.25}, {3., 1.75}, {3., 1.5}}]], 
       InsetBox[
        TemplateBox[{"b"},
         "ClickToCopy"], {2.9, 2.}]}}, {}, {}, 
     {EdgeForm[{LightDarkSwitched[
       GrayLevel[0], 
       GrayLevel[1]], Thickness[Tiny]}], FaceForm[None]}}]],
  BaseStyle->{{{}, {}}, {{}, {}}},
  FormatType->StandardForm,
  ImageSize->Small]], "Output",
 CellChangeTimes->{3.9648650205296392`*^9, 3.966450794116048*^9, 
  3.97808707718365*^9},
 CellLabel->"Out[44]=",
 CellID->1694740799,ExpressionUUID->"b834335a-e251-4243-95a2-f90f8146d615"]
}, Open  ]]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Diagram tensors", "Section",
 CellID->246136043,ExpressionUUID->"359549fc-1628-4299-9863-573ba753294e"],

Cell[CellGroupData[{

Cell["Wire diagrams have special representations as tensors:", "Text",
 CellID->754970579,ExpressionUUID->"a9d0fb42-5ab7-408f-84a3-cb8da20eb59a"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"DiagramTensor", "[", 
  RowBox[{"IdentityDiagram", "[", "a", "]"}], "]"}]], "Input",
 CellLabel->"In[45]:=",
 CellID->1457134777,ExpressionUUID->"5ad52880-c488-4716-9e80-e363573ad295"],

Cell[BoxData[
 TemplateBox[{
   TemplateBox[{"a"}, "ImplicitList"]},
  "SymbolicIdentityArray"]], "Output",
 CellChangeTimes->{3.9648650205513678`*^9, 3.9780870806301403`*^9},
 CellLabel->"Out[45]=",
 CellID->999574278,ExpressionUUID->"38187e75-20a6-45a6-bcc6-d6993a56d8e5"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"DiagramTensor", "[", 
  RowBox[{"PermutationDiagram", "[", 
   RowBox[{"{", 
    RowBox[{"b", ",", "a"}], "}"}], "]"}], "]"}]], "Input",
 CellLabel->"In[46]:=",
 CellID->1273599078,ExpressionUUID->"cbced3e2-4fd1-4384-b679-068959cb7627"],

Cell[BoxData[
 TemplateBox[{
   TemplateBox[{
     TemplateBox[{
       RowBox[{"b", ",", "a"}]}, "ImplicitList"]}, "SymbolicIdentityArray"], 
   RowBox[{"Cycles", "[", 
     RowBox[{"{", 
       RowBox[{"{", 
         RowBox[{"1", ",", "2"}], "}"}], "}"}], "]"}]},
  "Transpose2"]], "Output",
 CellChangeTimes->{3.9648650205590057`*^9, 3.978087080679573*^9},
 CellLabel->"Out[46]=",
 CellID->80319865,ExpressionUUID->"4e55dcc0-e8c9-4e99-949c-864d746d7dec"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"DiagramTensor", "[", 
  RowBox[{"CapDiagram", "[", "a", "]"}], "]"}]], "Input",
 CellLabel->"In[47]:=",
 CellID->1506021387,ExpressionUUID->"29179057-e251-4f59-98f8-c287bab3fb99"],

Cell[BoxData[
 TemplateBox[{
   TemplateBox[{"a"}, "ImplicitList"]},
  "SymbolicIdentityArray"]], "Output",
 CellChangeTimes->{3.964865020570263*^9, 3.978087080687241*^9},
 CellLabel->"Out[47]=",
 CellID->1316240739,ExpressionUUID->"49a15cac-fedc-466a-97cc-1a8a33bb9ffb"]
}, Open  ]]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Related Guides", "TutorialMoreAboutSection",
 CellChangeTimes->{{3.843042384656711*^9, 3.843042386024461*^9}},
 CellID->1800866590,ExpressionUUID->"957f9ddd-705a-4bb6-8890-b44097d6e501"],

Cell["XXXX", "TutorialMoreAbout",
 CellID->530257312,ExpressionUUID->"5e6fb7b5-7b4f-46ec-b1b4-26f14bc05630"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Related Tech Notes", "RelatedTutorialsSection",
 CellID->2124991381,ExpressionUUID->"4ca84b4c-24fc-43c8-bd8e-313c3571ae8d"],

Cell["XXXX", "RelatedTutorials",
 CellID->2077090857,ExpressionUUID->"5681b746-3531-4222-a4fe-f3b3757d458a"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Metadata", "MetadataSection",
 CellID->171867967,ExpressionUUID->"52d820ed-1c9a-4ab3-a80f-fd45e71929d2"],

Cell[TextData[{
 "New in: ",
 Cell["XX", "HistoryData",
  CellTags->"New",ExpressionUUID->"c5b1f736-563e-4a54-a507-51aecf4679aa"],
 " | Modified in: ",
 Cell[" ", "HistoryData",
  CellTags->"Modified",ExpressionUUID->"6e89879b-20f6-4f45-8b0c-a1443f478174"],
 " | Obsolete in: ",
 Cell[" ", "HistoryData",
  CellTags->"Obsolete",ExpressionUUID->
  "80dbd35b-45a6-4508-aec0-ad09055ad4c4"]
}], "History",
 CellID->219416154,ExpressionUUID->"4c421fdd-63eb-4ab5-b635-556c6511c341"],

Cell[CellGroupData[{

Cell["Categorization", "CategorizationSection",
 CellID->497878379,ExpressionUUID->"c911f354-b62b-4fb8-907b-887f8867cabe"],

Cell["Tech Note", "Categorization",
 CellLabel->"Entity Type",
 CellID->1245627141,ExpressionUUID->"5a641c80-d0f6-4c9c-b832-a4bc317cbf24"],

Cell["Wolfram/DiagrammaticComputation", "Categorization",
 CellLabel->"Paclet Name",
 CellID->1584767831,ExpressionUUID->"c9ff14af-4acb-4c35-bbc5-f98628070b40"],

Cell["Wolfram`DiagrammaticComputation`", "Categorization",
 CellLabel->"Context",
 CellID->2100745523,ExpressionUUID->"aa4a2283-b9ce-4133-8187-89cdf981b30d"],

Cell["\<\
Wolfram/DiagrammaticComputation/tutorial/IntroductiontoDiagrammaticComputation\
\>", "Categorization",
 CellLabel->"URI",
 CellID->451364734,ExpressionUUID->"29857961-8182-4c03-9421-12d3182a44ce"]
}, Closed]],

Cell[CellGroupData[{

Cell["Keywords", "KeywordsSection",
 CellID->1174843134,ExpressionUUID->"2aa9a416-f578-41a4-b075-d4160eefcfb5"],

Cell["XXXX", "Keywords",
 CellID->1623902620,ExpressionUUID->"a9c7906c-11ee-452a-a993-c9a288ee6ca6"]
}, Closed]]
}, Open  ]]
},
WindowSize->{700, 770},
WindowMargins->{{Automatic, 274}, {Automatic, 80}},
TaggingRules-><|"Paclet" -> "Wolfram/DiagrammaticComputation"|>,
FrontEndVersion->"15.0 for Mac OS X ARM (64-bit) (January 5, 2026)",
StyleDefinitions->FrontEnd`FileName[{"Wolfram"}, "TechNotePageStylesExt.nb", 
  CharacterEncoding -> "UTF-8"],
ExpressionUUID->"6924fedd-f63e-4a6f-9229-52037e4a03a4"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[576, 22, 133, 1, 112, "Title",ExpressionUUID->"b4bf44cf-d4cc-4c8b-bd8d-f0bc2b98e5cb",
 CellID->2019031772],
Cell[CellGroupData[{
Cell[734, 27, 456, 7, 79, "Text",ExpressionUUID->"1f4f97d9-544e-413c-964e-625ceedf7fc8",
 CellID->718336811],
Cell[CellGroupData[{
Cell[1215, 38, 208, 4, 26, "Input",ExpressionUUID->"4714a160-2c15-4f02-bcda-f6da5df15fb4",
 CellID->2081202690],
Cell[1426, 44, 24187, 431, 50, "Output",ExpressionUUID->"68340a21-ab72-4c02-b2f2-649ca239ea24",
 CellID->559968494]
}, Open  ]],
Cell[25628, 478, 180, 3, 26, "Input",ExpressionUUID->"47105a04-9a10-4903-80f0-b208e2efa093",
 CellID->1117137504]
}, Open  ]],
Cell[CellGroupData[{
Cell[25845, 486, 129, 1, 44, "Section",ExpressionUUID->"c08f1988-0d86-41f2-839f-24ac485e9ea4",
 CellID->280504007],
Cell[25977, 489, 464, 7, 79, "Text",ExpressionUUID->"d0d8b665-9bf7-47e2-a90d-719f4c994a09",
 CellID->704240484]
}, Open  ]],
Cell[CellGroupData[{
Cell[26478, 501, 117, 1, 44, "Section",ExpressionUUID->"7e7810f2-a82e-498b-b685-adb87c14ef16",
 CellID->1387435971],
Cell[CellGroupData[{
Cell[26620, 506, 178, 3, 24, "Text",ExpressionUUID->"0bed9253-b2ea-4105-8a0c-1823d7b2e943",
 CellID->1258925471],
Cell[CellGroupData[{
Cell[26823, 513, 259, 6, 26, "Input",ExpressionUUID->"c796093e-e921-4635-b512-50c68eafd127",
 CellID->1751500853],
Cell[27085, 521, 3311, 74, 110, "Output",ExpressionUUID->"24d97099-9309-4cc9-bc63-3966d7c601cd",
 CellID->264751408]
}, Open  ]]
}, Open  ]],
Cell[30423, 599, 364, 6, 61, "Text",ExpressionUUID->"f27a399c-7e2d-434d-805e-96b32c48e0ca",
 CellID->288812841],
Cell[CellGroupData[{
Cell[30812, 609, 191, 4, 24, "Text",ExpressionUUID->"8e75747d-6428-4251-a2ce-9f23e7152e4b",
 CellID->764376467],
Cell[CellGroupData[{
Cell[31028, 617, 508, 12, 63, "Input",ExpressionUUID->"bd580ecf-dc0e-4904-8d4e-8d535293779f",
 CellID->628104515],
Cell[31539, 631, 18289, 419, 280, "Output",ExpressionUUID->"cb5a5e46-23f7-4bd1-8b2f-f540521be9a0",
 CellID->2025997700]
}, Open  ]]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[49889, 1057, 130, 1, 44, "Section",ExpressionUUID->"c0348a54-f94d-439f-a1c2-763573d22ebb",
 CellID->1343972969],
Cell[CellGroupData[{
Cell[50044, 1062, 365, 8, 103, "Text",ExpressionUUID->"4d57d2fe-f504-46ac-bcf7-03f9efd9621f",
 CellID->920690837],
Cell[CellGroupData[{
Cell[50434, 1074, 263, 6, 26, "Input",ExpressionUUID->"3fc206a2-8ad1-4645-b400-50eb7d80e9da",
 CellID->1431220824],
Cell[50700, 1082, 2564, 57, 110, "Output",ExpressionUUID->"ce7f159e-4174-4569-b476-c0312e0711bd",
 CellID->1878825432]
}, Open  ]],
Cell[CellGroupData[{
Cell[53301, 1144, 255, 5, 26, "Input",ExpressionUUID->"85761fff-8b28-4f1d-9abd-e04d8ce1bc3b",
 CellID->1145467389],
Cell[53559, 1151, 2456, 55, 110, "Output",ExpressionUUID->"c8913b56-6a74-4bfb-9a63-ad4fc288a45e",
 CellID->2118203562]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[56064, 1212, 138, 1, 24, "Text",ExpressionUUID->"56138853-185f-43c6-9b90-6477a0c12249",
 CellID->1587393699],
Cell[CellGroupData[{
Cell[56227, 1217, 211, 4, 26, "Input",ExpressionUUID->"625616d3-15a2-4366-bae6-004e04e01516",
 CellID->1136552412],
Cell[56441, 1223, 5179, 113, 226, "Output",ExpressionUUID->"307cb994-3dbc-4ec2-8b14-ea2e2288b504",
 CellID->1067105024]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[61669, 1342, 146, 1, 24, "Text",ExpressionUUID->"eb94f404-1542-461a-b601-117dcb3d0885",
 CellID->823045858],
Cell[CellGroupData[{
Cell[61840, 1347, 262, 5, 26, "Input",ExpressionUUID->"7b8f6afc-c176-438d-b3f8-806a35e9c4fe",
 CellID->989565079],
Cell[62105, 1354, 5201, 114, 63, "Output",ExpressionUUID->"aa100893-5665-438e-bb79-4c373572e194",
 CellID->1021039707]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[67355, 1474, 287, 5, 42, "Text",ExpressionUUID->"efcfc20e-e596-4b47-bae4-09f35c213cb5",
 CellID->1536261624],
Cell[CellGroupData[{
Cell[67667, 1483, 228, 6, 26, "Input",ExpressionUUID->"78e3b507-00b4-4c67-8709-918358e5281f",
 CellID->753226687],
Cell[67898, 1491, 279, 5, 25, "Output",ExpressionUUID->"f98c83b6-ade8-4e41-a78a-5793b33aa12f",
 CellID->566987472]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[68226, 1502, 161, 3, 24, "Text",ExpressionUUID->"8528d356-10c5-4415-a768-11e41c1d967c",
 CellID->812575579],
Cell[CellGroupData[{
Cell[68412, 1509, 230, 6, 26, "Input",ExpressionUUID->"c9cfecd3-3f82-4733-80d8-7b58fcd9f0e5",
 CellID->1109244980],
Cell[68645, 1517, 254, 5, 25, "Output",ExpressionUUID->"81141519-2d06-4115-8e4c-f343dabac398",
 CellID->774839253]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[68948, 1528, 244, 4, 42, "Text",ExpressionUUID->"679c1537-2a51-48fe-af0d-2e33dae9c454",
 CellID->382489763],
Cell[CellGroupData[{
Cell[69217, 1536, 391, 12, 26, "Input",ExpressionUUID->"6fbcd388-20d5-4a04-bcc3-719ad98004b6",
 CellID->1086891270],
Cell[69611, 1550, 169, 3, 25, "Output",ExpressionUUID->"525eaa7e-01f1-4a29-a0f8-26b26e6a08ad",
 CellID->885673508]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[69829, 1559, 277, 5, 54, "Text",ExpressionUUID->"e2788b4f-54b0-4459-8691-4cc7c9b4b388",
 CellID->1305491599],
Cell[CellGroupData[{
Cell[70131, 1568, 210, 4, 26, "Input",ExpressionUUID->"aa505ece-7412-41f8-a807-c1b601137181",
 CellID->556882994],
Cell[70344, 1574, 6368, 138, 123, "Output",ExpressionUUID->"60e46f8c-ff60-4c68-90b0-49cb2a74c614",
 CellID->1678596319]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[76761, 1718, 395, 6, 61, "Text",ExpressionUUID->"6bce5193-652f-49fe-9b42-ee636ff7f296",
 CellID->612685927],
Cell[CellGroupData[{
Cell[77181, 1728, 247, 5, 26, "Input",ExpressionUUID->"d6aa4e47-c155-4443-80ef-5ce13a5c5cb7",
 CellID->228287724],
Cell[77431, 1735, 2451, 55, 110, "Output",ExpressionUUID->"60e2fec6-b630-4a38-bd15-3f478d4b5e10",
 CellID->334076221]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[79931, 1796, 207, 4, 42, "Text",ExpressionUUID->"16dc2e1b-3f21-4306-ba9b-bbcde250a879",
 CellID->590982362],
Cell[CellGroupData[{
Cell[80163, 1804, 212, 4, 26, "Input",ExpressionUUID->"b1090aaa-7c8d-4652-82ca-bb91db092606",
 CellID->528690759],
Cell[80378, 1810, 5208, 115, 226, "Output",ExpressionUUID->"e0330a5f-ce14-4097-b08c-cea9c122a744",
 CellID->1302242943]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[85635, 1931, 170, 3, 24, "Text",ExpressionUUID->"13578f87-cb52-4150-82fb-4a6e9e3534bd",
 CellID->108644980],
Cell[CellGroupData[{
Cell[85830, 1938, 387, 11, 26, "Input",ExpressionUUID->"dbcfeb4e-4bbf-44f1-9266-d6fd1ca42535",
 CellID->635078910],
Cell[86220, 1951, 170, 3, 25, "Output",ExpressionUUID->"fd2c3cfa-d85a-4db3-a7c4-6cca18180255",
 CellID->777514780]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[86439, 1960, 273, 5, 42, "Text",ExpressionUUID->"d286642f-d6f9-4c22-b24a-4806224286c8",
 CellID->252915465],
Cell[CellGroupData[{
Cell[86737, 1969, 207, 4, 26, "Input",ExpressionUUID->"b39eddd5-a362-4720-ae4d-cdc846434bf4",
 CellID->880082842],
Cell[86947, 1975, 6303, 137, 123, "Output",ExpressionUUID->"f0ce7e05-2ea5-45ba-8b26-0172ba3d736c",
 CellID->1120392233]
}, Open  ]],
Cell[CellGroupData[{
Cell[93287, 2117, 207, 4, 26, "Input",ExpressionUUID->"c4e08055-75a2-4ec2-8113-da91f71b007e",
 CellID->900722608],
Cell[93497, 2123, 6300, 137, 123, "Output",ExpressionUUID->"a6e042cb-7a6d-423a-bd59-22234967d373",
 CellID->1703945412]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[99846, 2266, 268, 5, 24, "Text",ExpressionUUID->"e37fdfbc-3373-42d3-ade3-19a5cd3ac62c",
 CellID->1260281219],
Cell[CellGroupData[{
Cell[100139, 2275, 325, 8, 26, "Input",ExpressionUUID->"72e73bb7-74c2-48e8-b18e-54e02511ae8f",
 CellID->915237372],
Cell[100467, 2285, 4792, 105, 110, "Output",ExpressionUUID->"0b268844-fe29-4a4c-a3f4-c6b6a881d6ca",
 CellID->1830473177]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[105308, 2396, 143, 1, 24, "Text",ExpressionUUID->"d3e38fee-0381-4600-9efd-778bc57a3135",
 CellID->1157159175],
Cell[CellGroupData[{
Cell[105476, 2401, 392, 10, 26, "Input",ExpressionUUID->"d47db99d-24a2-4ad5-af64-2cf5d72a29a8",
 CellID->762346993],
Cell[105871, 2413, 4936, 118, 130, "Output",ExpressionUUID->"93cb2b5a-6019-4e9b-98ff-53967289dcfd",
 CellID->1452667643]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[110856, 2537, 188, 4, 24, "Text",ExpressionUUID->"b3b49428-f3f3-4e05-992c-b4c6ea058158",
 CellID->551503518],
Cell[CellGroupData[{
Cell[111069, 2545, 225, 5, 26, "Input",ExpressionUUID->"47da48af-8ab9-42c5-bebb-fad57257ab28",
 CellID->580206574],
Cell[111297, 2552, 1810, 42, 110, "Output",ExpressionUUID->"b6c46212-0ac6-4158-833f-cacac10da030",
 CellID->84089621]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[113156, 2600, 194, 4, 24, "Text",ExpressionUUID->"5126e0e6-f055-4c1e-aae8-b1a7de926aaa",
 CellID->880649343],
Cell[CellGroupData[{
Cell[113375, 2608, 233, 5, 26, "Input",ExpressionUUID->"b1800aad-018b-436e-a72c-49f3f6f22039",
 CellID->616212677],
Cell[113611, 2615, 5747, 132, 226, "Output",ExpressionUUID->"b51a2a48-1f16-4403-b026-a93776dbc1dc",
 CellID->362845778]
}, Open  ]]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[119419, 2754, 112, 1, 44, "Section",ExpressionUUID->"19bf3f2b-9eb2-4e5d-a0d5-a5e5c983d7b0",
 CellID->1199067529],
Cell[119534, 2757, 429, 7, 79, "Text",ExpressionUUID->"f1fd1b24-779e-4613-aa74-c3a13439685f",
 CellID->741416455],
Cell[CellGroupData[{
Cell[119988, 2768, 208, 4, 24, "Text",ExpressionUUID->"7944c30b-5dfb-4f84-9f14-c0c14e5b870c",
 CellID->1286239291],
Cell[CellGroupData[{
Cell[120221, 2776, 396, 10, 26, "Input",ExpressionUUID->"82dc9df7-ada2-49de-992b-06d47caae1fc",
 CellID->1253373135],
Cell[120620, 2788, 3275, 73, 110, "Output",ExpressionUUID->"6d73414c-5cef-4964-9519-7c8b406d40a6",
 CellID->2034883763]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[123944, 2867, 164, 3, 24, "Text",ExpressionUUID->"1539d31f-7d41-46c4-835c-addaad8f3858",
 CellID->1924072552],
Cell[CellGroupData[{
Cell[124133, 2874, 170, 3, 26, "Input",ExpressionUUID->"d3786478-68b0-41d0-bece-ba8b2e2c9065",
 CellID->1078624938],
Cell[124306, 2879, 196, 3, 25, "Output",ExpressionUUID->"6da511db-40c1-4432-8a2b-e7f149b98d1c",
 CellID->796838052]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[124551, 2888, 251, 5, 42, "Text",ExpressionUUID->"cb9365ac-1e11-4d73-9b4f-d8af32f993db",
 CellID->1246785676],
Cell[CellGroupData[{
Cell[124827, 2897, 2480, 68, 214, "Input",ExpressionUUID->"609e0e05-d334-4ff9-bb15-11bb1a4f8c73",
 CellID->1728912753],
Cell[127310, 2967, 16333, 376, 130, "Output",ExpressionUUID->"333238f6-47e0-4356-8dd7-5ec47cb742f7",
 CellID->40206565]
}, Open  ]],
Cell[CellGroupData[{
Cell[143680, 3348, 528, 12, 176, "Input",ExpressionUUID->"ab1ed20b-dd3a-4360-85b1-25c39933b5c7",
 CellID->906522224],
Cell[144211, 3362, 13738, 300, 367, "Output",ExpressionUUID->"fa775d74-f11f-4940-a89c-535b9c0ab947",
 CellID->1076277027]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[157998, 3668, 201, 4, 24, "Text",ExpressionUUID->"905f441a-8bd5-4f7a-9f20-b680bd47027c",
 CellID->531682360],
Cell[CellGroupData[{
Cell[158224, 3676, 210, 4, 26, "Input",ExpressionUUID->"79f4685c-d3d5-44a2-87f1-5cf442a90303",
 CellID->305969353],
Cell[158437, 3682, 867, 28, 45, "Output",ExpressionUUID->"15e3a327-0a92-4121-aa63-a17dcb5c08b6",
 CellID->1626606068]
}, Open  ]],
Cell[CellGroupData[{
Cell[159341, 3715, 163, 3, 26, "Input",ExpressionUUID->"990c455f-161c-48fc-9cf4-e6bdb3981ea8",
 CellID->2004065340],
Cell[159507, 3720, 192, 3, 25, "Output",ExpressionUUID->"59196b93-5801-432d-936a-9fc002209de2",
 CellID->442877853]
}, Open  ]]
}, Open  ]],
Cell[159726, 3727, 252, 5, 42, "Text",ExpressionUUID->"8d088510-9d31-40cf-8e34-a226300e9470",
 CellID->253365326],
Cell[CellGroupData[{
Cell[160003, 3736, 194, 4, 24, "Text",ExpressionUUID->"bc57ac2d-3c6e-40ed-8d9a-10cf7160defa",
 CellID->1998445728],
Cell[CellGroupData[{
Cell[160222, 3744, 703, 19, 63, "Input",ExpressionUUID->"2b383602-4d22-4a70-9240-ef0424d38286",
 CellID->1233111416],
Cell[160928, 3765, 3464, 76, 110, "Output",ExpressionUUID->"ee9ebf69-7042-4d81-9d53-604bdbca6207",
 CellID->1737549555]
}, Open  ]],
Cell[CellGroupData[{
Cell[164429, 3846, 358, 7, 44, "Input",ExpressionUUID->"8caa7ccd-feb0-4b81-bd30-f0fb92aa89d7",
 CellID->418174628],
Cell[164790, 3855, 491, 15, 25, "Output",ExpressionUUID->"645fb278-a911-48e8-85cf-229cb94b8f7d",
 CellID->720720438]
}, Open  ]],
Cell[CellGroupData[{
Cell[165318, 3875, 188, 4, 26, "Input",ExpressionUUID->"285798ff-0106-4d3b-a7d7-551c4af24ab5",
 CellID->1341557417],
Cell[165509, 3881, 239, 5, 25, "Output",ExpressionUUID->"9779b357-653a-4f86-ac88-94f4c6c2f881",
 CellID->1340632386]
}, Open  ]],
Cell[CellGroupData[{
Cell[165785, 3891, 383, 8, 63, "Input",ExpressionUUID->"64edc779-e630-45b6-979e-a5f5909f5959",
 CellID->642611568],
Cell[166171, 3901, 802, 26, 25, "Output",ExpressionUUID->"1e575cd1-31cb-40a9-a78e-eba0a05e6187",
 CellID->1448488216]
}, Open  ]],
Cell[CellGroupData[{
Cell[167010, 3932, 215, 5, 26, "Input",ExpressionUUID->"e838ab4f-5b2b-445f-ac80-d7f6880b4f1e",
 CellID->622623944],
Cell[167228, 3939, 331, 7, 25, "Output",ExpressionUUID->"79ff3855-7e64-46d7-8b3a-ad61d6696a51",
 CellID->563502825]
}, Open  ]]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[167620, 3953, 110, 1, 44, "Section",ExpressionUUID->"5afed3f3-8381-4651-8357-0685911a6115",
 CellID->942175384],
Cell[167733, 3956, 332, 6, 61, "Text",ExpressionUUID->"113237d2-171a-41ac-8140-b6176560e237",
 CellID->1744749557],
Cell[CellGroupData[{
Cell[168090, 3966, 181, 4, 24, "Text",ExpressionUUID->"76969c9a-b808-4bb4-8c08-68169397cc4a",
 CellID->116604714],
Cell[CellGroupData[{
Cell[168296, 3974, 235, 5, 26, "Input",ExpressionUUID->"7c463142-24e2-4333-9ea9-e4c9ccbb3b6f",
 CellID->1270342134],
Cell[168534, 3981, 4508, 104, 250, "Output",ExpressionUUID->"2a75140a-50ab-4cce-b490-edd50fa417a9",
 CellID->54731535]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[173091, 4091, 138, 1, 24, "Text",ExpressionUUID->"50756883-0ae8-4b95-85af-7912c5254124",
 CellID->1055337248],
Cell[CellGroupData[{
Cell[173254, 4096, 409, 10, 26, "Input",ExpressionUUID->"fc775afe-2c22-4b14-a027-d9424b84e7d5",
 CellID->985686563],
Cell[173666, 4108, 11319, 258, 240, "Output",ExpressionUUID->"67a7ac3b-4361-4eb4-99f5-7a7e71ee185a",
 CellID->24525860]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[185034, 4372, 239, 4, 42, "Text",ExpressionUUID->"68515c82-2873-4781-9429-d1715d6a9965",
 CellID->643084777],
Cell[CellGroupData[{
Cell[185298, 4380, 636, 15, 44, "Input",ExpressionUUID->"90e5b2a9-cea4-4ea3-8116-dd7d22a71ff4",
 CellID->40651688],
Cell[185937, 4397, 13744, 290, 226, 7786, 190, "CachedBoxData", "BoxData", "Output",ExpressionUUID->"bea5e723-1cca-44c6-8ce0-15278724fb71",
 CellID->746057890]
}, Open  ]],
Cell[CellGroupData[{
Cell[199718, 4692, 818, 19, 63, "Input",ExpressionUUID->"0c9ffa5f-e40a-4a6e-9787-f94ec4fc77d3",
 CellID->1073076333],
Cell[200539, 4713, 19813, 468, 331, "Output",ExpressionUUID->"a1255ffc-f92d-458d-9820-eefd5a6c7250",
 CellID->750753106]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[220401, 5187, 110, 1, 40, "Subsection",ExpressionUUID->"cd07c0d1-412c-4959-bcf3-63235f8a44b5",
 CellID->137677110],
Cell[CellGroupData[{
Cell[220536, 5192, 246, 4, 42, "Text",ExpressionUUID->"5495673e-2059-49cc-b9f2-2f6e0e88f6ca",
 CellID->1099299951],
Cell[CellGroupData[{
Cell[220807, 5200, 168, 3, 26, "Input",ExpressionUUID->"375e3655-7613-4fc0-96ae-4227edc32f6f",
 CellID->1132461316],
Cell[220978, 5205, 2503, 54, 106, "Output",ExpressionUUID->"754725e3-1e2d-4f01-9820-e622910932db",
 CellID->1176932564]
}, Open  ]],
Cell[CellGroupData[{
Cell[223518, 5264, 290, 8, 26, "Input",ExpressionUUID->"25d70158-3296-4fe0-accc-d8849ee8af8c",
 CellID->1426657652],
Cell[223811, 5274, 4425, 92, 110, "Output",ExpressionUUID->"1359b78d-0f86-4aac-8414-cf4f00ef4146",
 CellID->233730631]
}, Open  ]],
Cell[CellGroupData[{
Cell[228273, 5371, 293, 8, 26, "Input",ExpressionUUID->"74d52de1-1ffe-48dc-91dd-ef8bb00d6ddc",
 CellID->2107976371],
Cell[228569, 5381, 4432, 92, 110, "Output",ExpressionUUID->"89167e55-6d23-4118-8c43-1fbf49ef7f2b",
 CellID->563124854]
}, Open  ]],
Cell[CellGroupData[{
Cell[233038, 5478, 162, 3, 26, "Input",ExpressionUUID->"1754a21e-363b-4b94-bb39-5faf61af6650",
 CellID->642953176],
Cell[233203, 5483, 2791, 60, 110, "Output",ExpressionUUID->"1653de3a-4615-4156-a877-5a18cfc3bd88",
 CellID->478988849]
}, Open  ]],
Cell[CellGroupData[{
Cell[236031, 5548, 163, 3, 26, "Input",ExpressionUUID->"82f3ae5e-4db9-4586-8b55-71f38c1c7b99",
 CellID->1397290038],
Cell[236197, 5553, 2798, 60, 110, "Output",ExpressionUUID->"2e848b3c-06b2-4b27-8a7d-cfc54d60a743",
 CellID->1596876187]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[239044, 5619, 249, 4, 42, "Text",ExpressionUUID->"f6eed918-d67a-4663-8714-a883c71b5903",
 CellID->2132452782],
Cell[CellGroupData[{
Cell[239318, 5627, 163, 3, 26, "Input",ExpressionUUID->"b94cf83c-6241-48d7-83eb-07bcc98bbcbe",
 CellID->779322291],
Cell[239484, 5632, 3492, 74, 110, "Output",ExpressionUUID->"3705436d-55d7-494c-851e-cca3936edbdb",
 CellID->1683006836]
}, Open  ]],
Cell[CellGroupData[{
Cell[243013, 5711, 316, 8, 26, "Input",ExpressionUUID->"51494b56-b1a1-4ee6-ba95-4e5d1a2f5f72",
 CellID->877901949],
Cell[243332, 5721, 14446, 296, 110, "Output",ExpressionUUID->"033f9032-c5a0-4f1e-8e02-f53bb067a601",
 CellID->1788778015]
}, Open  ]],
Cell[257793, 6020, 127, 2, 26, "Input",ExpressionUUID->"196c0dac-800d-42ad-864b-d899b471ee16",
 CellID->1241320141]
}, Open  ]]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[257981, 6029, 108, 1, 44, "Section",ExpressionUUID->"078dd2ca-9192-4547-a238-dc0219abeff2",
 CellID->63979182],
Cell[CellGroupData[{
Cell[258114, 6034, 202, 4, 24, "Text",ExpressionUUID->"2a12ac42-46ed-495a-9046-d32c44ef3471",
 CellID->1556288374],
Cell[CellGroupData[{
Cell[258341, 6042, 545, 16, 26, "Input",ExpressionUUID->"fa849627-3223-4155-9feb-b3100e332d57",
 CellID->187881358],
Cell[258889, 6060, 8230, 180, 195, "Output",ExpressionUUID->"78ae22a2-61ab-4d7a-8e0e-3c34f474cba4",
 CellID->1977160252]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[267168, 6246, 168, 3, 24, "Text",ExpressionUUID->"34a6121e-11f2-41e6-b462-ceb077d87e8f",
 CellID->568340936],
Cell[CellGroupData[{
Cell[267361, 6253, 170, 3, 26, "Input",ExpressionUUID->"1919b8ab-e52d-4f20-a963-69ef651a8205",
 CellID->98849496],
Cell[267534, 6258, 7740, 177, 70, "Output",ExpressionUUID->"a19a7b4f-3067-476c-94de-89879495f3cc",
 CellID->523283973]
}, Open  ]],
Cell[CellGroupData[{
Cell[275311, 6440, 171, 3, 26, "Input",ExpressionUUID->"48b7154c-df3d-406c-b097-4af64bfd55c5",
 CellID->135091236],
Cell[275485, 6445, 22447, 495, 280, "Output",ExpressionUUID->"ef2d9813-e623-4a46-aaff-9abd18294db4",
 CellID->1454435158]
}, Open  ]],
Cell[CellGroupData[{
Cell[297969, 6945, 355, 10, 26, "Input",ExpressionUUID->"5c806d35-e15e-4964-b1a0-56b9139bf2e5",
 CellID->818119270],
Cell[298327, 6957, 9047, 202, 195, "Output",ExpressionUUID->"c9ba8304-4b6b-4540-97a1-4775392922bb",
 CellID->263693493]
}, Open  ]],
Cell[CellGroupData[{
Cell[307411, 7164, 392, 11, 26, "Input",ExpressionUUID->"c862d6b3-10b2-4f03-98ae-c5d0f2ce38e1",
 CellID->457632677],
Cell[307806, 7177, 6349, 141, 195, "Output",ExpressionUUID->"b834335a-e251-4243-95a2-f90f8146d615",
 CellID->1694740799]
}, Open  ]]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[314216, 7325, 109, 1, 44, "Section",ExpressionUUID->"359549fc-1628-4299-9863-573ba753294e",
 CellID->246136043],
Cell[CellGroupData[{
Cell[314350, 7330, 145, 1, 24, "Text",ExpressionUUID->"a9d0fb42-5ab7-408f-84a3-cb8da20eb59a",
 CellID->754970579],
Cell[CellGroupData[{
Cell[314520, 7335, 208, 4, 26, "Input",ExpressionUUID->"5ad52880-c488-4716-9e80-e363573ad295",
 CellID->1457134777],
Cell[314731, 7341, 274, 6, 25, "Output",ExpressionUUID->"38187e75-20a6-45a6-bcc6-d6993a56d8e5",
 CellID->999574278]
}, Open  ]],
Cell[CellGroupData[{
Cell[315042, 7352, 260, 6, 26, "Input",ExpressionUUID->"cbced3e2-4fd1-4384-b679-068959cb7627",
 CellID->1273599078],
Cell[315305, 7360, 457, 12, 25, "Output",ExpressionUUID->"4e55dcc0-e8c9-4e99-949c-864d746d7dec",
 CellID->80319865]
}, Open  ]],
Cell[CellGroupData[{
Cell[315799, 7377, 203, 4, 26, "Input",ExpressionUUID->"29179057-e251-4f59-98f8-c287bab3fb99",
 CellID->1506021387],
Cell[316005, 7383, 271, 6, 25, "Output",ExpressionUUID->"49a15cac-fedc-466a-97cc-1a8a33bb9ffb",
 CellID->1316240739]
}, Open  ]]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[316337, 7396, 192, 2, 73, "TutorialMoreAboutSection",ExpressionUUID->"957f9ddd-705a-4bb6-8890-b44097d6e501",
 CellID->1800866590],
Cell[316532, 7400, 108, 1, 23, "TutorialMoreAbout",ExpressionUUID->"5e6fb7b5-7b4f-46ec-b1b4-26f14bc05630",
 CellID->530257312]
}, Open  ]],
Cell[CellGroupData[{
Cell[316677, 7406, 129, 1, 73, "RelatedTutorialsSection",ExpressionUUID->"4ca84b4c-24fc-43c8-bd8e-313c3571ae8d",
 CellID->2124991381],
Cell[316809, 7409, 108, 1, 23, "RelatedTutorials",ExpressionUUID->"5681b746-3531-4222-a4fe-f3b3757d458a",
 CellID->2077090857]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[316966, 7416, 110, 1, 71, "MetadataSection",ExpressionUUID->"52d820ed-1c9a-4ab3-a80f-fd45e71929d2",
 CellID->171867967],
Cell[317079, 7419, 476, 12, 70, "History",ExpressionUUID->"4c421fdd-63eb-4ab5-b635-556c6511c341",
 CellID->219416154],
Cell[CellGroupData[{
Cell[317580, 7435, 122, 1, 70, "CategorizationSection",ExpressionUUID->"c911f354-b62b-4fb8-907b-887f8867cabe",
 CellID->497878379],
Cell[317705, 7438, 138, 2, 70, "Categorization",ExpressionUUID->"5a641c80-d0f6-4c9c-b832-a4bc317cbf24",
 CellID->1245627141],
Cell[317846, 7442, 160, 2, 70, "Categorization",ExpressionUUID->"c9ff14af-4acb-4c35-bbc5-f98628070b40",
 CellID->1584767831],
Cell[318009, 7446, 157, 2, 70, "Categorization",ExpressionUUID->"aa4a2283-b9ce-4133-8187-89cdf981b30d",
 CellID->2100745523],
Cell[318169, 7450, 206, 4, 70, "Categorization",ExpressionUUID->"29857961-8182-4c03-9421-12d3182a44ce",
 CellID->451364734]
}, Closed]],
Cell[CellGroupData[{
Cell[318412, 7459, 111, 1, 70, "KeywordsSection",ExpressionUUID->"2aa9a416-f578-41a4-b075-d4160eefcfb5",
 CellID->1174843134],
Cell[318526, 7462, 100, 1, 70, "Keywords",ExpressionUUID->"a9c7906c-11ee-452a-a993-c9a288ee6ca6",
 CellID->1623902620]
}, Closed]]
}, Open  ]]
}
]
*)

